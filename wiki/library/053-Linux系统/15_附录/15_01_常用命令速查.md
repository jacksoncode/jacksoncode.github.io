# 常用命令速查

## 1 文件和目录操作

### 1.1 基本文件操作

| 命令 | 描述 | 示例 |
|------|------|------|
| `ls` | 列出目录内容 | `ls -la /home` |
| `cd` | 切换目录 | `cd /var/log` |
| `pwd` | 显示当前目录 | `pwd` |
| `cp` | 复制文件 | `cp file1.txt file2.txt` |
| `mv` | 移动/重命名文件 | `mv old.txt new.txt` |
| `rm` | 删除文件 | `rm -f file.txt` |
| `touch` | 创建空文件 | `touch newfile.txt` |
| `cat` | 查看文件内容 | `cat /etc/passwd` |
| `more` | 分页查看文件 | `more largefile.txt` |
| `less` | 交互式查看文件 | `less /var/log/syslog` |
| `head` | 查看文件开头 | `head -n 20 file.txt` |
| `tail` | 查看文件结尾 | `tail -f /var/log/app.log` |
| `file` | 识别文件类型 | `file document.pdf` |
| `stat` | 显示文件详细信息 | `stat /etc/passwd` |

### 1.2 目录操作

| 命令 | 描述 | 示例 |
|------|------|------|
| `mkdir` | 创建目录 | `mkdir -p /path/to/dir` |
| `rmdir` | 删除空目录 | `rmdir emptydir` |
| `tree` | 显示目录树 | `tree /etc` |
| `find` | 查找文件 | `find / -name "*.conf"` |
| `locate` | 快速查找文件 | `locate bashrc` |
| `updatedb` | 更新文件数据库 | `sudo updatedb` |

### 1.3 文件权限和属性

| 命令 | 描述 | 示例 |
|------|------|------|
| `chmod` | 修改权限 | `chmod 755 script.sh` |
| `chown` | 修改属主 | `chown user:group file` |
| `chgrp` | 修改属组 | `chgrp users file.txt` |
| `umask` | 设置默认权限 | `umask 022` |
| `getfacl` | 查看ACL权限 | `getfacl file.txt` |
| `setfacl` | 设置ACL权限 | `setfacl -m u:user:rwx file` |

## 2 系统信息和管理

### 2.1 系统信息

| 命令 | 描述 | 示例 |
|------|------|------|
| `uname` | 系统信息 | `uname -a` |
| `hostname` | 主机名 | `hostnamectl` |
| `uptime` | 系统运行时间 | `uptime` |
| `whoami` | 当前用户 | `whoami` |
| `who` | 登录用户 | `who -a` |
| `w` | 活动用户 | `w` |
| `id` | 用户ID信息 | `id username` |
| `date` | 系统日期时间 | `date` |
| `cal` | 日历 | `cal 2024` |

### 2.2 进程管理

| 命令 | 描述 | 示例 |
|------|------|------|
| `ps` | 查看进程 | `ps aux` |
| `top` | 动态进程查看 | `top -u username` |
| `htop` | 增强版top | `htop` |
| `pgrep` | 按名称查找进程 | `pgrep -f nginx` |
| `pkill` | 按名称终止进程 | `pkill firefox` |
| `kill` | 终止进程 | `kill -9 PID` |
| `killall` | 终止所有同名进程 | `killall chrome` |
| `nice` | 设置进程优先级 | `nice -n 10 command` |
| `renice` | 修改进程优先级 | `renice +5 PID` |

### 2.3 系统资源

| 命令 | 描述 | 示例 |
|------|------|------|
| `free` | 内存使用 | `free -h` |
| `df` | 磁盘空间 | `df -h` |
| `du` | 目录大小 | `du -sh /var/log` |
| `iostat` | I/O统计 | `iostat -x 1` |
| `vmstat` | 虚拟内存统计 | `vmstat 1 5` |
| `sar` | 系统活动报告 | `sar -u 1 5` |
| `lscpu` | CPU信息 | `lscpu` |
| `lsmem` | 内存信息 | `lsmem` |
| `lsblk` | 块设备信息 | `lsblk -f` |

## 3 网络命令

### 3.1 网络配置

| 命令 | 描述 | 示例 |
|------|------|------|
| `ip` | 网络配置 | `ip addr show` |
| `ifconfig` | 网络接口配置 | `ifconfig -a` |
| `route` | 路由表 | `route -n` |
| `ip route` | 路由配置 | `ip route show` |
| `netstat` | 网络连接 | `netstat -tuln` |
| `ss` | 套接字统计 | `ss -tuln` |
| `ping` | 网络连通性 | `ping google.com` |
| `traceroute` | 路由跟踪 | `traceroute google.com` |
| `mtr` | 网络诊断 | `mtr google.com` |
| `dig` | DNS查询 | `dig google.com` |
| `nslookup` | DNS查询 | `nslookup google.com` |
| `host` | DNS查询 | `host google.com` |

### 3.2 网络连接和传输

| 命令 | 描述 | 示例 |
|------|------|------|
| `curl` | 数据传输 | `curl -I https://example.com` |
| `wget` | 文件下载 | `wget https://file.tar.gz` |
| `scp` | 安全复制 | `scp file.txt user@host:/path` |
| `sftp` | 安全FTP | `sftp user@host` |
| `ssh` | 安全Shell | `ssh user@hostname` |
| `telnet` | 远程登录 | `telnet host 23` |
| `nc` | 网络连接 | `nc -zv host 80` |
| `nmap` | 端口扫描 | `nmap -sT localhost` |

## 4 软件包管理

### 4.1 Debian/Ubuntu (APT)

| 命令 | 描述 | 示例 |
|------|------|------|
| `apt update` | 更新包列表 | `sudo apt update` |
| `apt upgrade` | 升级包 | `sudo apt upgrade` |
| `apt install` | 安装包 | `sudo apt install nginx` |
| `apt remove` | 删除包 | `sudo apt remove nginx` |
| `apt purge` | 完全删除包 | `sudo apt purge nginx` |
| `apt search` | 搜索包 | `apt search nginx` |
| `apt show` | 显示包信息 | `apt show nginx` |
| `apt list` | 列出包 | `apt list --installed` |
| `dpkg -l` | 列出已安装包 | `dpkg -l | grep nginx` |
| `dpkg -i` | 安装.deb包 | `sudo dpkg -i package.deb` |

### 4.2 Red Hat/CentOS (YUM/DNF)

| 命令 | 描述 | 示例 |
|------|------|------|
| `yum update` | 更新包 | `sudo yum update` |
| `yum install` | 安装包 | `sudo yum install nginx` |
| `yum remove` | 删除包 | `sudo yum remove nginx` |
| `yum search` | 搜索包 | `yum search nginx` |
| `yum info` | 显示包信息 | `yum info nginx` |
| `yum list` | 列出包 | `yum list installed` |
| `rpm -qa` | 列出已安装包 | `rpm -qa | grep nginx` |
| `rpm -ivh` | 安装.rpm包 | `sudo rpm -ivh package.rpm` |
| `dnf` | 下一代YUM | `sudo dnf install nginx` |

### 4.3 通用包管理

| 命令 | 描述 | 示例 |
|------|------|------|
| `which` | 查找命令路径 | `which python3` |
| `whereis` | 查找命令位置 | `whereis python3` |
| `type` | 显示命令类型 | `type ls` |
| `hash` | 显示命令缓存 | `hash -r` |

## 5 文本处理

### 5.1 文本查看和搜索

| 命令 | 描述 | 示例 |
|------|------|------|
| `grep` | 文本搜索 | `grep "error" logfile` |
| `egrep` | 扩展正则表达式 | `egrep "error|fail" logfile` |
| `fgrep` | 固定字符串搜索 | `fgrep "exact match" file` |
| `rg` | ripgrep搜索 | `rg "pattern" /path` |
| `ack` | Perl正则搜索 | `ack "pattern" /path` |
| `wc` | 字数统计 | `wc -l file.txt` |
| `sort` | 排序 | `sort -n -k 2 file.txt` |
| `uniq` | 去重 | `uniq -c sorted_file` |
| `cut` | 字段提取 | `cut -d: -f1 /etc/passwd` |
| `awk` | 文本处理 | `awk '{print $1}' file` |
| `sed` | 流编辑器 | `sed 's/old/new/g' file` |

### 5.2 文本编辑

| 命令 | 描述 | 示例 |
|------|------|------|
| `vi/vim` | 文本编辑器 | `vim file.txt` |
| `nano` | 简单编辑器 | `nano file.txt` |
| `emacs` | 高级编辑器 | `emacs file.txt` |
| `ed` | 行编辑器 | `ed file.txt` |
| `ex` | 扩展编辑器 | `ex file.txt` |

### 5.3 文本转换

| 命令 | 描述 | 示例 |
|------|------|------|
| `tr` | 字符转换 | `tr 'a-z' 'A-Z' < file` |
| `expand` | 制表符转空格 | `expand file.txt` |
| `unexpand` | 空格转制表符 | `unexpand file.txt` |
| `col` | 过滤控制字符 | `col -bx < file` |
| `column` | 格式化列 | `column -t file.txt` |
| `fold` | 换行 | `fold -w 80 file.txt` |
| `fmt` | 格式化段落 | `fmt file.txt` |

## 6 系统调试和跟踪

### 6.1 系统调用跟踪

| 命令 | 描述 | 示例 |
|------|------|------|
| `strace` | 系统调用跟踪 | `strace -p PID` |
| `ltrace` | 库函数调用跟踪 | `ltrace command` |
| `perf` | 性能分析 | `perf top` |
| `gdb` | 调试器 | `gdb program` |

### 6.2 网络和进程查看

| `lsof` | 查看打开的文件 | `lsof -i :80` |
| `fuser` | 查看使用文件的进程 | `fuser -v file.txt` |
| `tcpdump` | 网络抓包 | `tcpdump -i eth0` |
| `wireshark` | 图形化网络分析 | `wireshark` |

## 7 Shell内置命令

### 7.1 别名和历史

| 命令 | 描述 | 示例 |
|------|------|------|
| `alias` | 创建命令别名 | `alias ll='ls -la'` |
| `unalias` | 删除别名 | `unalias ll` |
| `history` | 查看命令历史 | `history | grep command` |
| `fc` | 编辑历史命令 | `fc -l` |

### 7.2 变量和环境

| `export` | 导出环境变量 | `export PATH=$PATH:/usr/local/bin` |
| `source` | 加载配置文件 | `source ~/.bashrc` |
| `set` | 设置shell选项 | `set -x` |
| `unset` | 删除变量 | `unset VAR_NAME` |
| `env` | 显示环境变量 | `env` |
| `printenv` | 打印环境变量 | `printenv PATH` |

### 7.3 控制流

| `test` | 条件测试 | `test -f file.txt` |
| `[` | 条件测试 | `[ -f file.txt ]` |
| `true` | 返回真 | `true` |
| `false` | 返回假 | `false` |
| `exit` | 退出shell | `exit 0` |
| `return` | 从函数返回 | `return 0` |

## 8 进程和作业控制

### 8.1 作业控制

| 命令 | 描述 | 示例 |
|------|------|------|
| `jobs` | 查看作业 | `jobs -l` |
| `bg` | 后台运行作业 | `bg %1` |
| `fg` | 前台运行作业 | `fg %1` |
| `disown` | 从shell移除作业 | `disown %1` |
| `wait` | 等待作业完成 | `wait %1` |

### 8.2 进程管理

| `nohup` | 忽略挂起信号 | `nohup command &` |
| `timeout` | 设置命令超时 | `timeout 30 command` |
| `watch` | 定时执行命令 | `watch -n 1 date` |

## 9 系统监控工具

### 9.1 I/O监控

| 命令 | 描述 | 示例 |
|------|------|------|
| `iotop` | I/O活动监控 | `iotop -o` |
| `iostat` | CPU和I/O统计 | `iostat -x 1` |

### 9.2 网络监控

| `iftop` | 网络带宽监控 | `iftop -i eth0` |
| `nethogs` | 按进程的网络流量 | `nethogs` |
| `nmon` | 系统性能监控 | `nmon` |
| `vnstat` | 网络流量统计 | `vnstat -i eth0` |

### 9.3 系统活动

| `sar` | 系统活动报告 | `sar -u 1 5` |
| `mpstat` | CPU统计 | `mpstat -P ALL 1` |
| `pidstat` | 进程统计 | `pidstat -u 1` |

## 10 压缩和归档

### 10.1 压缩工具

| 命令 | 描述 | 示例 |
|------|------|------|
| `gzip` | GNU压缩 | `gzip file.txt` |
| `gunzip` | GNU解压 | `gunzip file.txt.gz` |
| `bzip2` | Burrows-Wheeler压缩 | `bzip2 file.txt` |
| `bunzip2` | bzip2解压 | `bunzip2 file.txt.bz2` |
| `xz` | LZMA压缩 | `xz file.txt` |
| `unxz` | xz解压 | `unxz file.txt.xz` |

### 10.2 归档工具

| `tar` | 磁带归档 | `tar -czf archive.tar.gz dir/` |
| `zip` | ZIP压缩 | `zip -r archive.zip dir/` |
| `unzip` | ZIP解压 | `unzip archive.zip` |
| `rar` | RAR压缩 | `rar a archive.rar file.txt` |
| `unrar` | RAR解压 | `unrar x archive.rar` |
| `7z` | 7-Zip压缩 | `7z a archive.7z file.txt` |

## 11 开发工具

### 11.1 版本控制

| 命令 | 描述 | 示例 |
|------|------|------|
| `git` | 版本控制 | `git status` |
| `svn` | Subversion | `svn update` |
| `hg` | Mercurial | `hg status` |

### 11.2 编译和构建

| `make` | 构建工具 | `make install` |
| `gcc` | GNU C编译器 | `gcc -o program source.c` |
| `g++` | GNU C++编译器 | `g++ -o program source.cpp` |
| `clang` | LLVM C编译器 | `clang -o program source.c` |
| `ld` | 链接器 | `ld -o program obj1.o obj2.o` |

### 11.3 调试和分析

| `gdb` | GNU调试器 | `gdb program` |
| `valgrind` | 内存检查 | `valgrind ./program` |
| `strace` | 系统调用跟踪 | `strace ./program` |
| `ltrace` | 库函数跟踪 | `ltrace ./program` |

## 12 其他实用命令

### 12.1 信息显示

| 命令 | 描述 | 示例 |
|------|------|------|
| `yes` | 重复输出字符串 | `yes | rm -i *.txt` |
| `seq` | 生成序列数字 | `seq 1 10` |
| `factor` | 分解质因数 | `factor 100` |
| `bc` | 计算器 | `echo "scale=2; 10/3" | bc` |
| `cal` | 显示日历 | `cal 2024` |
| `date` | 显示日期时间 | `date "+%Y-%m-%d %H:%M:%S"` |

### 12.2 系统管理

| `logger` | 系统日志 | `logger "System message"` |
| `wall` | 广播消息 | `wall "System maintenance"` |
| `mesg` | 控制消息权限 | `mesg n` |
| `write` | 发送消息给用户 | `write username` |

### 12.3 终端控制

| `clear` | 清屏 | `clear` |
| `reset` | 重置终端 | `reset` |
| `tput` | 终端控制 | `tput clear` |
| `stty` | 设置终端 | `stty -a` |
| `script` | 记录终端会话 | `script session.log` |

## 使用技巧

### 命令组合
- 管道：`|`
- 重定向：`>`, `>>`, `<`
- 后台运行：`&`
- 命令序列：`&&`, `||`, `;`
- 命令替换：`` `command` `` 或 `$(command)`

### 快捷键
- `Ctrl+C`：中断命令
- `Ctrl+D`：结束输入
- `Ctrl+Z`：挂起命令
- `Ctrl+L`：清屏
- `Tab`：自动补全
- `Ctrl+R`：搜索历史命令

### 通配符
- `*`：匹配任意字符
- `?`：匹配单个字符
- `[abc]`：匹配字符集
- `{a,b,c}`：扩展 brace