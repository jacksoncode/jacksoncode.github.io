<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover">
    <meta name="format-detection" content="telephone=no">
    <style type="text/css">

#watermark {

  position: relative;
  overflow: hidden;
}

#watermark .x {
  position: absolute;
  top: 800;
  left: 400;
  color: #3300ff;
  font-size: 50px;
  pointer-events: none;
  opacity:0.3;
  filter:Alpha(opacity=50);
  -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
}
    </style>


    <style type="text/css">
 html{color:#333;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;text-rendering:optimizelegibility;font-family:Helvetica Neue,PingFang SC,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif}html.borderbox *,html.borderbox :after,html.borderbox :before{box-sizing:border-box}article,aside,blockquote,body,button,code,dd,details,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hr,input,legend,li,menu,nav,ol,p,pre,section,td,textarea,th,ul{margin:0;padding:0}article,aside,details,figcaption,figure,footer,header,menu,nav,section{display:block}audio,canvas,video{display:inline-block}body,button,input,select,textarea{font:300 1em/1.8 PingFang SC,Lantinghei SC,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,Helvetica,sans-serif}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}blockquote{position:relative;color:#999;font-weight:400;border-left:1px solid #1abc9c;padding-left:1em;margin:1em 3em 1em 2em}@media only screen and (max-width:640px){blockquote{margin:1em 0}}abbr,acronym{border-bottom:1px dotted;font-variant:normal}abbr{cursor:help}del{text-decoration:line-through}address,caption,cite,code,dfn,em,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}q:after,q:before{content:""}sub,sup{font-size:75%;line-height:0;position:relative}:root sub,:root sup{vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}a{color:#1abc9c}a:hover{text-decoration:underline}.typo a{border-bottom:1px solid #1abc9c}.typo a:hover{border-bottom-color:#555;color:#555}.typo a:hover,a,ins{text-decoration:none}.typo-u,u{text-decoration:underline}mark{background:#fffdd1;border-bottom:1px solid #ffedce;padding:2px;margin:0 5px}code,pre,pre tt{font-family:Courier,Courier New,monospace}pre{background:hsla(0,0%,97%,.7);border:1px solid #ddd;padding:1em 1.5em;display:block;-webkit-overflow-scrolling:touch}hr{border:none;border-bottom:1px solid #cfcfcf;margin-bottom:.8em;height:10px}.typo-small,figcaption,small{font-size:.9em;color:#888}b,strong{font-weight:700;color:#000}[draggable]{cursor:move}.clearfix:after,.clearfix:before{content:"";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.textwrap,.textwrap td,.textwrap th{word-wrap:break-word;word-break:break-all}.textwrap-table{table-layout:fixed}.serif{font-family:Palatino,Optima,Georgia,serif}.typo-dl,.typo-form,.typo-hr,.typo-ol,.typo-p,.typo-pre,.typo-table,.typo-ul,.typo dl,.typo form,.typo hr,.typo ol,.typo p,.typo pre,.typo table,.typo ul,blockquote{margin-bottom:1rem}h1,h2,h3,h4,h5,h6{font-family:PingFang SC,Helvetica Neue,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#000;line-height:1.35}.typo-h1,.typo-h2,.typo-h3,.typo-h4,.typo-h5,.typo-h6,.typo h1,.typo h2,.typo h3,.typo h4,.typo h5,.typo h6{margin-top:1.2em;margin-bottom:.6em;line-height:1.35}.typo-h1,.typo h1{font-size:2em}.typo-h2,.typo h2{font-size:1.8em}.typo-h3,.typo h3{font-size:1.6em}.typo-h4,.typo h4{font-size:1.4em}.typo-h5,.typo-h6,.typo h5,.typo h6{font-size:1.2em}.typo-ul,.typo ul{margin-left:1.3em;list-style:disc}.typo-ol,.typo ol{list-style:decimal;margin-left:1.9em}.typo-ol ol,.typo-ol ul,.typo-ul ol,.typo-ul ul,.typo li ol,.typo li ul{margin-bottom:.8em;margin-left:2em}.typo-ol ul,.typo-ul ul,.typo li ul{list-style:circle}.typo-table td,.typo-table th,.typo table caption,.typo table td,.typo table th{border:1px solid #ddd;padding:.5em 1em;color:#666}.typo-table th,.typo table th{background:#fbfbfb}.typo-table thead th,.typo table thead th{background:hsla(0,0%,95%,.7)}.typo table caption{border-bottom:none}.typo-input,.typo-textarea{-webkit-appearance:none;border-radius:0}.typo-em,.typo em,caption,legend{color:#000;font-weight:inherit}.typo-em{position:relative}.typo-em:after{position:absolute;top:.65em;left:0;width:100%;overflow:hidden;white-space:nowrap;content:"\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"}.typo img{max-width:100%}.common-content{font-weight:400;color:#353535;line-height:1.75rem;white-space:normal;word-break:normal;font-size:1rem}.common-content img{display:block;max-width:100%;background-color:#eee}.common-content audio,.common-content video{width:100%;background-color:#eee}.common-content center,.common-content font{margin-top:1rem;display:inline-block}.common-content center{width:100%}.common-content pre{margin-top:1rem;padding-left:0;padding-right:0;position:relative;overflow:hidden}.common-content pre code{font-size:.8rem;font-family:Consolas,Liberation Mono,Menlo,monospace,Courier;display:block;width:100%;box-sizing:border-box;padding-left:1rem;padding-right:1rem;overflow-x:auto}.common-content hr{border:none;margin-top:1.5rem;margin-bottom:1.5rem;border-top:1px solid #f5f5f5;height:1px;background:none}.common-content b,.common-content h1,.common-content h2,.common-content h3,.common-content h4,.common-content h5,.common-content strong{font-weight:700}.common-content h1,.common-content h2{font-size:1.125rem;margin-bottom:.45rem}.common-content h3,.common-content h4,.common-content h5{font-size:1rem;margin-bottom:.45rem}.common-content p{font-weight:400;color:#353535;margin-top:.15rem}.common-content .orange{color:#ff5a05}.common-content .reference{font-size:1rem;color:#888}.custom-rich-content h1{margin-top:0;font-weight:400;font-size:15.25px;border-bottom:1px solid #eee;line-height:2.8}.custom-rich-content li,.custom-rich-content p{font-size:14px;color:#888;line-height:1.6}table.hljs-ln{margin-bottom:0;border-spacing:0;border-collapse:collapse}table.hljs-ln,table.hljs-ln tbody,table.hljs-ln td,table.hljs-ln tr{box-sizing:border-box}table.hljs-ln td{padding:0;border:0}table.hljs-ln td.hljs-ln-numbers{min-width:15px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;cursor:pointer;user-select:none}table.hljs-ln td.hljs-ln-code,table.hljs-ln td.hljs-ln-numbers{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;line-height:20px;vertical-align:top}table.hljs-ln td.hljs-ln-code{position:relative;padding-right:10px;padding-left:10px;overflow:visible;color:#24292e;word-wrap:normal;white-space:pre}video::-webkit-media-controls{overflow:hidden!important}video::-webkit-media-controls-enclosure{width:calc(100% + 32px);margin-left:auto}.button-cancel{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel,.button-primary{-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary{color:#fff;background-color:#ff5a05;border-radius:3px}@font-face{font-family:iconfont;src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot);src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.woff) format("woff"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.ttf) format("truetype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.svg#iconfont) format("svg")}@font-face{font-family:player-font;src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot);src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.woff) format("woff"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.ttf) format("truetype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.svg#player-font) format("svg")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-webkit-text-stroke-width:.2px;-moz-osx-font-smoothing:grayscale}html{background:#fff;min-height:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{width:100%}body.fixed{overflow:hidden;position:fixed;width:100vw;height:100vh}i{font-style:normal}a{word-wrap:break-word;-webkit-tap-highlight-color:rgba(0,0,0,0)}a:hover{text-decoration:none}.fade-enter-active,.fade-leave-active{transition:opacity .3s}.fade-enter,.fade-leave-to{opacity:0}.MathJax,.MathJax_CHTML,.MathJax_MathContainer,.MathJax_MathML,.MathJax_PHTML,.MathJax_PlainSource,.MathJax_SVG{outline:0}.ios-app-switch .js-audit{display:none}._loading_wrap_{position:fixed;width:100vw;height:100vh;top:50%;left:50%;transform:translate(-50%,-50%);z-index:999}._loading_div_class_,._loading_wrap_{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}._loading_div_class_{word-wrap:break-word;padding:.5rem .75rem;text-align:center;z-index:9999;font-size:.6rem;max-width:60%;color:#fff;border-radius:.25rem;-ms-flex-direction:column;flex-direction:column}._loading_div_class_ .message{color:#353535;font-size:16px;line-height:3}.spinner{animation:circle-rotator 1.4s linear infinite}.spinner *{line-height:0;box-sizing:border-box}@keyframes circle-rotator{0%{transform:rotate(0deg)}to{transform:rotate(270deg)}}.path{stroke-dasharray:187;stroke-dashoffset:0;transform-origin:center;animation:circle-dash 1.4s ease-in-out infinite,circle-colors 5.6s ease-in-out infinite}@keyframes circle-colors{0%{stroke:#ff5a05}to{stroke:#ff5a05}}@keyframes circle-dash{0%{stroke-dashoffset:187}50%{stroke-dashoffset:46.75;transform:rotate(135deg)}to{stroke-dashoffset:187;transform:rotate(450deg)}}.confirm-box-wrapper,.confirm-box-wrapper .mask{position:absolute;top:0;left:0;right:0;bottom:0}.confirm-box-wrapper .mask{background:rgba(0,0,0,.6)}.confirm-box-wrapper .confirm-box{position:fixed;top:50%;left:50%;width:267px;background:#fff;transform:translate(-50%,-50%);border-radius:7px}.confirm-box-wrapper .confirm-box .head{margin:0 18px;font-size:18px;text-align:center;line-height:65px;border-bottom:1px solid #d9d9d9}.confirm-box-wrapper .confirm-box .body{padding:18px;padding-bottom:0;color:#353535;font-size:12.5px;max-height:150px;overflow:auto}.confirm-box-wrapper .confirm-box .foot{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding:18px}.confirm-box-wrapper .confirm-box .foot .button-cancel{border:1px solid #d9d9d9}.hljs{display:block;overflow-x:auto;padding:.5em;color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}




    </style>
    <style type="text/css">
        .button-cancel[data-v-87ffcada]{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel[data-v-87ffcada],.button-primary[data-v-87ffcada]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary[data-v-87ffcada]{color:#fff;background-color:#ff5a05;border-radius:3px}.pd[data-v-87ffcada]{padding-left:1.375rem;padding-right:1.375rem}.article[data-v-87ffcada]{max-width:70rem;margin:0 auto}.article .article-unavailable[data-v-87ffcada]{color:#fa8919;font-size:15px;font-weight:600;line-height:24px;border-radius:5px;padding:12px;background-color:#f6f7fb;margin-top:20px}.article .article-unavailable .iconfont[data-v-87ffcada]{font-size:12px}.article .main[data-v-87ffcada]{padding:1.25rem 0;margin-bottom:52px}.article-title[data-v-87ffcada]{color:#353535;font-weight:400;line-height:1.65rem;font-size:1.34375rem}.article-info[data-v-87ffcada]{color:#888;font-size:.9375rem;margin-top:1.0625rem}.article-content[data-v-87ffcada]{margin-top:1.0625rem}.article-content.android video[data-v-87ffcada]::-webkit-media-controls-fullscreen-button{display:none}.copyright[data-v-87ffcada]{color:#b2b2b2;padding-bottom:20px;margin-top:20px;font-size:13px}.audio-player[data-v-87ffcada]{width:100%;margin:20px 0}.to-comment[data-v-87ffcada]{overflow:hidden;padding-top:10px;margin-bottom:-30px}.to-comment a.button-primary[data-v-87ffcada]{float:right;height:20px;font-size:12px;line-height:20px;padding:4px 8px;cursor:pointer}.article-comments[data-v-87ffcada]{margin-top:2rem}.article-comments h2[data-v-87ffcada]{text-align:center;color:#888;position:relative;z-index:1;margin-bottom:1rem}.article-comments h2[data-v-87ffcada]:before{border-top:1px dotted #888;content:"";position:absolute;top:56%;left:0;width:100%;z-index:-1}.article-comments h2 span[data-v-87ffcada]{font-size:15.25px;font-weight:400;padding:0 1rem;background:#fff;display:inline-block}.article-sub-bottom[data-v-87ffcada]{z-index:10;cursor:pointer}.switch-btns[data-v-87ffcada]{height:76px;cursor:pointer;padding-top:24px;padding-bottom:24px;border-bottom:10px solid #f6f7fb;position:relative}.switch-btns[data-v-87ffcada]:before{content:" ";height:1px;background:#e8e8e8;position:absolute;top:0;left:0;-webkit-box-sizing:border-box;box-sizing:border-box;left:1.375rem;right:1.375rem}.switch-btns .btn[data-v-87ffcada]{height:38px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.switch-btns .btn .tag[data-v-87ffcada]{-webkit-box-flex:0;-ms-flex:0 0 62px;flex:0 0 62px;text-align:center;color:#888;font-size:14px;border-radius:10px;height:22px;line-height:22px;background:#f6f7fb;font-weight:400}.switch-btns .btn .txt[data-v-87ffcada]{margin-left:10px;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;color:#888;font-size:15px;height:22px;line-height:22px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:400}@media (max-width:769px){.article .breadcrumb[data-v-87ffcada]{padding-top:10px;padding-bottom:10px}}





    </style>

    <style type="text/css">
        .comment-item{list-style-position:inside;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-bottom:1rem}.comment-item a{border-bottom:none}.comment-item .avatar{width:2.625rem;height:2.625rem;-ms-flex-negative:0;flex-shrink:0;border-radius:50%}.comment-item .info{margin-left:.5rem;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.comment-item .info .hd{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .username{color:#888;font-size:15.25px;font-weight:400;line-height:1.2}.comment-item .info .hd .control{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .control .btn-share{color:#888;font-size:.75rem;margin-right:1rem}.comment-item .info .hd .control .btn-praise{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:15.25px;text-decoration:none}.comment-item .info .hd .control .btn-praise i{color:#888;display:inline-block;font-size:.75rem;margin-right:.3rem;margin-top:-.01rem}.comment-item .info .hd .control .btn-praise i.on,.comment-item .info .hd .control .btn-praise span{color:#ff5a05}.comment-item .info .bd{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6}.comment-item .info .time{color:#888;font-size:9px;line-height:1}.comment-item .info .reply .reply-hd{font-size:15.25px}.comment-item .info .reply .reply-hd span{margin-left:-12px;color:#888;font-weight:400}.comment-item .info .reply .reply-hd i{color:#ff5a05;font-size:15.25px}.comment-item .info .reply .reply-content{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all}.comment-item .info .reply .reply-time{color:#888;font-size:9px}




    </style>
</head>
<body>
<div id="app">


    <div data-v-87ffcada="" class="article" id="watermark">
        <p class="x">æ›´å¤šè¯¾ç¨‹è¯·åŠ QQç¾¤170701297</p>
        <div data-v-87ffcada="" class="main main-app">
            <h1 data-v-87ffcada="" class="article-title pd">
                16è®²åŸºç¡€ç¯‡ï¼šæ€ä¹ˆç†è§£å†…å­˜ä¸­çš„Bufferå’ŒCache
            </h1>
            <div data-v-87ffcada="" class="article-content typo common-content pd"><img data-v-87ffcada=""
                                                                                        src="https://static001.geekbang.org/resource/image/00/ed/0085e81690064724422d7d184be6e4ed.jpg">


                <div data-v-87ffcada="" id="article-content" class="">
                    <div class="text">
                        <p>ä½ å¥½ï¼Œæˆ‘æ˜¯å€ªæœ‹é£ã€‚</p><p>ä¸Šä¸€èŠ‚ï¼Œæˆ‘ä»¬æ¢³ç†äº† Linux å†…å­˜ç®¡ç†çš„åŸºæœ¬åŸç†ï¼Œå¹¶å­¦ä¼šäº†ç”¨ free å’Œ top ç­‰å·¥å…·ï¼Œæ¥æŸ¥çœ‹ç³»ç»Ÿå’Œè¿›ç¨‹çš„å†…å­˜ä½¿ç”¨æƒ…å†µã€‚</p><p>å†…å­˜å’Œ  CPU  çš„å…³ç³»éå¸¸ç´§å¯†ï¼Œè€Œå†…å­˜ç®¡ç†æœ¬èº«ä¹Ÿæ˜¯å¾ˆå¤æ‚çš„æœºåˆ¶ï¼Œæ‰€ä»¥æ„Ÿè§‰çŸ¥è¯†å¾ˆç¡¬æ ¸ã€å¾ˆéš¾å•ƒï¼Œéƒ½æ˜¯æ­£å¸¸çš„ã€‚ä½†è¿˜æ˜¯é‚£å¥è¯ï¼Œåˆå­¦æ—¶ä¸ç”¨éå¾—ç†è§£æ‰€æœ‰å†…å®¹ï¼Œç»§ç»­å¾€åå­¦ï¼Œå¤šç†è§£ç›¸å…³çš„æ¦‚å¿µå¹¶é…åˆä¸€å®šçš„å®è·µä¹‹åï¼Œå†å›å¤´å¤ä¹ å¾€å¾€ä¼šå®¹æ˜“ä¸å°‘ã€‚å½“ç„¶ï¼ŒåŸºæœ¬åŠŸä¸å®¹æ”¾å¼ƒã€‚</p><p>åœ¨ä»Šå¤©çš„å†…å®¹å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸€ä¸‹ç³»ç»Ÿçš„å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ª free è¾“å‡ºç•Œé¢ï¼š</p><pre><code># æ³¨æ„ä¸åŒç‰ˆæœ¬çš„freeè¾“å‡ºå¯èƒ½ä¼šæœ‰æ‰€ä¸åŒ
$ free
              total        used        free      shared  buff/cache   available
Mem:        8169348      263524     6875352         668     1030472     7611064
Swap:             0           0           0
</code></pre><p>æ˜¾ç„¶ï¼Œè¿™ä¸ªç•Œé¢åŒ…å«äº†ç‰©ç†å†…å­˜Memå’Œäº¤æ¢åˆ†åŒºSwapçš„å…·ä½“ä½¿ç”¨æƒ…å†µï¼Œæ¯”å¦‚æ€»å†…å­˜ã€å·²ç”¨å†…å­˜ã€ç¼“å­˜ã€å¯ç”¨å†…å­˜ç­‰ã€‚å…¶ä¸­ç¼“å­˜æ˜¯ Bufferå’ŒCacheä¸¤éƒ¨åˆ†çš„æ€»å’Œ ã€‚</p><p>è¿™é‡Œçš„å¤§éƒ¨åˆ†æŒ‡æ ‡éƒ½æ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œä½† Bufferå’Œ Cacheå¯èƒ½ä¸å¤ªå¥½åŒºåˆ†ã€‚ä»å­—é¢ä¸Šæ¥è¯´ï¼ŒBufferæ˜¯ç¼“å†²åŒºï¼Œè€ŒCacheæ˜¯ç¼“å­˜ï¼Œä¸¤è€…éƒ½æ˜¯æ•°æ®åœ¨å†…å­˜ä¸­çš„ä¸´æ—¶å­˜å‚¨ã€‚é‚£ä¹ˆï¼Œä½ çŸ¥é“è¿™ä¸¤ç§â€œä¸´æ—¶å­˜å‚¨â€æœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿ</p><p>æ³¨ï¼šä»Šå¤©å†…å®¹æ¥ä¸‹æ¥çš„éƒ¨åˆ†ï¼ŒBufferå’ŒCacheæˆ‘ä¼šéƒ½ç”¨è‹±æ–‡æ¥è¡¨ç¤ºï¼Œé¿å…è·Ÿæ–‡ä¸­çš„â€œç¼“å­˜â€ä¸€è¯æ··æ·†ã€‚è€Œæ–‡ä¸­çš„â€œç¼“å­˜â€ï¼Œåˆ™é€šæŒ‡å†…å­˜ä¸­çš„ä¸´æ—¶å­˜å‚¨ã€‚</p><h2>freeæ•°æ®çš„æ¥æº</h2><!-- [[[read_end]]] --><p>åœ¨æˆ‘æ­£å¼è®²è§£ä¸¤ä¸ªæ¦‚å¿µå‰ï¼Œä½ å¯ä»¥å…ˆæƒ³æƒ³ï¼Œä½ æœ‰æ²¡æœ‰ä»€ä¹ˆé€”å¾„æ¥è¿›ä¸€æ­¥äº†è§£å®ƒä»¬ï¼Ÿé™¤äº†ä¸­æ–‡ç¿»è¯‘ç›´æ¥å¾—åˆ°æ¦‚å¿µï¼Œåˆ«å¿˜äº†ï¼ŒBufferå’ŒCacheè¿˜æ˜¯æˆ‘ä»¬ç”¨freeè·å¾—çš„æŒ‡æ ‡ã€‚</p><p>è¿˜è®°å¾—æˆ‘ä¹‹å‰è®²è¿‡çš„ï¼Œç¢°åˆ°çœ‹ä¸æ˜ç™½çš„æŒ‡æ ‡æ—¶è¯¥æ€ä¹ˆåŠå—ï¼Ÿ</p><p>ä¼°è®¡ä½ æƒ³èµ·æ¥äº†ï¼Œä¸æ‡‚å°±å»æŸ¥æ‰‹å†Œã€‚ç”¨ man å‘½ä»¤æŸ¥è¯¢ free çš„æ–‡æ¡£ï¼Œå°±å¯ä»¥æ‰¾åˆ°å¯¹åº”æŒ‡æ ‡çš„è¯¦ç»†è¯´æ˜ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬æ‰§è¡Œ man free  ï¼Œå°±å¯ä»¥çœ‹åˆ°ä¸‹é¢è¿™ä¸ªç•Œé¢ã€‚</p><pre><code>buffers
              Memory used by kernel buffers (Buffers in /proc/meminfo)

       cache  Memory used by the page cache and slabs (Cached and SReclaimable in /proc/meminfo)

       buff/cache
              Sum of buffers and cache
</code></pre><p>ä»freeçš„æ‰‹å†Œä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ° buffer å’Œ cache çš„è¯´æ˜ã€‚</p><ul>
<li>
<p>Buffers æ˜¯å†…æ ¸ç¼“å†²åŒºç”¨åˆ°çš„å†…å­˜ï¼Œå¯¹åº”çš„æ˜¯  /proc/meminfo ä¸­çš„ Buffers å€¼ã€‚</p>
</li>
<li>
<p>Cache æ˜¯å†…æ ¸é¡µç¼“å­˜å’ŒSlabç”¨åˆ°çš„å†…å­˜ï¼Œå¯¹åº”çš„æ˜¯  /proc/meminfo ä¸­çš„ Cached ä¸ SReclaimable ä¹‹å’Œã€‚</p>
</li>
</ul><p>è¿™é‡Œçš„è¯´æ˜å‘Šè¯‰æˆ‘ä»¬ï¼Œè¿™äº›æ•°å€¼éƒ½æ¥è‡ª /proc/meminfoï¼Œä½†æ›´å…·ä½“çš„ Buffersã€Cachedå’ŒSReclaimable çš„å«ä¹‰ï¼Œè¿˜æ˜¯æ²¡æœ‰è¯´æ¸…æ¥šã€‚</p><p>è¦å¼„æ˜ç™½å®ƒä»¬åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä¼°è®¡ä½ ç¬¬ä¸€ååº”å°±æ˜¯å»ç™¾åº¦æˆ–è€… Googleä¸€ä¸‹ã€‚è™½ç„¶å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œç½‘ç»œæœç´¢èƒ½ç»™å‡ºä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œä¸”ä¸è¯´ç­›é€‰ä¿¡æ¯èŠ±è´¹çš„æ—¶é—´ç²¾åŠ›ï¼Œå¯¹ä½ æ¥è¯´ï¼Œè¿™ä¸ªç­”æ¡ˆçš„å‡†ç¡®æ€§ä¹Ÿæ˜¯å¾ˆéš¾ä¿è¯çš„ã€‚</p><p>è¦æ³¨æ„ï¼Œç½‘ä¸Šçš„ç»“è®ºå¯èƒ½æ˜¯å¯¹çš„ï¼Œä½†æ˜¯å¾ˆå¯èƒ½è·Ÿä½ çš„ç¯å¢ƒå¹¶ä¸åŒ¹é…ã€‚æœ€ç®€å•æ¥è¯´ï¼ŒåŒä¸€ä¸ªæŒ‡æ ‡çš„å…·ä½“å«ä¹‰ï¼Œå°±å¯èƒ½å› ä¸ºå†…æ ¸ç‰ˆæœ¬ã€æ€§èƒ½å·¥å…·ç‰ˆæœ¬çš„ä¸åŒè€Œæœ‰æŒºå¤§å·®åˆ«ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼Œæˆ‘æ€»åœ¨ä¸“æ ä¸­å¼ºè°ƒé€šç”¨æ€è·¯å’Œæ–¹æ³•ï¼Œè€Œä¸æ˜¯è®©ä½ æ­»è®°ç»“è®ºã€‚å¯¹äºæ¡ˆä¾‹å®è·µæ¥è¯´ï¼Œæœºå™¨ç¯å¢ƒå°±æ˜¯æˆ‘ä»¬çš„æœ€å¤§é™åˆ¶ã€‚</p><p>é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰æ›´ç®€å•ã€æ›´å‡†ç¡®çš„æ–¹æ³•ï¼Œæ¥æŸ¥è¯¢å®ƒä»¬çš„å«ä¹‰å‘¢ï¼Ÿ</p><h2>procæ–‡ä»¶ç³»ç»Ÿ</h2><p>æˆ‘åœ¨å‰é¢ CPU æ€§èƒ½æ¨¡å—å°±æ›¾ç»æåˆ°è¿‡ï¼Œ/proc æ˜¯ Linux å†…æ ¸æä¾›çš„ä¸€ç§ç‰¹æ®Šæ–‡ä»¶ç³»ç»Ÿï¼Œæ˜¯ç”¨æˆ·è·Ÿå†…æ ¸äº¤äº’çš„æ¥å£ã€‚æ¯”æ–¹è¯´ï¼Œç”¨æˆ·å¯ä»¥ä» /proc ä¸­æŸ¥è¯¢å†…æ ¸çš„è¿è¡ŒçŠ¶æ€å’Œé…ç½®é€‰é¡¹ï¼ŒæŸ¥è¯¢è¿›ç¨‹çš„è¿è¡ŒçŠ¶æ€ã€ç»Ÿè®¡æ•°æ®ç­‰ï¼Œå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ /proc  æ¥ä¿®æ”¹å†…æ ¸çš„é…ç½®ã€‚</p><p>proc æ–‡ä»¶ç³»ç»ŸåŒæ—¶ä¹Ÿæ˜¯å¾ˆå¤šæ€§èƒ½å·¥å…·çš„æœ€ç»ˆæ•°æ®æ¥æºã€‚æ¯”å¦‚æˆ‘ä»¬åˆšæ‰çœ‹åˆ°çš„ free ï¼Œå°±æ˜¯é€šè¿‡è¯»å– /proc/meminfo  ï¼Œå¾—åˆ°å†…å­˜çš„ä½¿ç”¨æƒ…å†µã€‚</p><p>ç»§ç»­è¯´å› /proc/meminfoï¼Œæ—¢ç„¶ Buffersã€Cachedã€SReclaimable è¿™å‡ ä¸ªæŒ‡æ ‡ä¸å®¹æ˜“ç†è§£ï¼Œé‚£æˆ‘ä»¬è¿˜å¾—ç»§ç»­æŸ¥ proc æ–‡ä»¶ç³»ç»Ÿï¼Œè·å–å®ƒä»¬çš„è¯¦ç»†å®šä¹‰ã€‚</p><p>æ‰§è¡Œ man proc  ï¼Œä½ å°±å¯ä»¥å¾—åˆ° proc æ–‡ä»¶ç³»ç»Ÿçš„è¯¦ç»†æ–‡æ¡£ã€‚</p><p>æ³¨æ„è¿™ä¸ªæ–‡æ¡£æ¯”è¾ƒé•¿ï¼Œä½ æœ€å¥½æœç´¢ä¸€ä¸‹ï¼ˆæ¯”å¦‚æœç´¢ meminfoï¼‰ï¼Œä»¥ä¾¿æ›´å¿«å®šä½åˆ°å†…å­˜éƒ¨åˆ†ã€‚</p><pre><code>Buffers %lu
    Relatively temporary storage for raw disk blocks that shouldn't get tremendously large (20MB or so).

Cached %lu
   In-memory cache for files read from the disk (the page cache).  Doesn't include SwapCached.
...
SReclaimable %lu (since Linux 2.6.19)
    Part of Slab, that might be reclaimed, such as caches.
    
SUnreclaim %lu (since Linux 2.6.19)
    Part of Slab, that cannot be reclaimed on memory pressure.
</code></pre><p>é€šè¿‡è¿™ä¸ªæ–‡æ¡£ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š</p><ul>
<li>
<p>Buffers æ˜¯å¯¹åŸå§‹ç£ç›˜å—çš„ä¸´æ—¶å­˜å‚¨ï¼Œä¹Ÿå°±æ˜¯ç”¨æ¥<strong>ç¼“å­˜ç£ç›˜çš„æ•°æ®</strong>ï¼Œé€šå¸¸ä¸ä¼šç‰¹åˆ«å¤§ï¼ˆ20MBå·¦å³ï¼‰ã€‚è¿™æ ·ï¼Œå†…æ ¸å°±å¯ä»¥æŠŠåˆ†æ•£çš„å†™é›†ä¸­èµ·æ¥ï¼Œç»Ÿä¸€ä¼˜åŒ–ç£ç›˜çš„å†™å…¥ï¼Œæ¯”å¦‚å¯ä»¥æŠŠå¤šæ¬¡å°çš„å†™åˆå¹¶æˆå•æ¬¡å¤§çš„å†™ç­‰ç­‰ã€‚</p>
</li>
<li>
<p>Cached æ˜¯ä»ç£ç›˜è¯»å–æ–‡ä»¶çš„é¡µç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯ç”¨æ¥<strong>ç¼“å­˜ä»æ–‡ä»¶è¯»å–çš„æ•°æ®</strong>ã€‚è¿™æ ·ï¼Œä¸‹æ¬¡è®¿é—®è¿™äº›æ–‡ä»¶æ•°æ®æ—¶ï¼Œå°±å¯ä»¥ç›´æ¥ä»å†…å­˜ä¸­å¿«é€Ÿè·å–ï¼Œè€Œä¸éœ€è¦å†æ¬¡è®¿é—®ç¼“æ…¢çš„ç£ç›˜ã€‚</p>
</li>
<li>
<p>SReclaimable æ˜¯ Slab çš„ä¸€éƒ¨åˆ†ã€‚SlabåŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­çš„å¯å›æ”¶éƒ¨åˆ†ï¼Œç”¨ SReclaimable è®°å½•ï¼›è€Œä¸å¯å›æ”¶éƒ¨åˆ†ï¼Œç”¨ SUnreclaim è®°å½•ã€‚</p>
</li>
</ul><p>å¥½äº†ï¼Œæˆ‘ä»¬ç»ˆäºæ‰¾åˆ°äº†è¿™ä¸‰ä¸ªæŒ‡æ ‡çš„è¯¦ç»†å®šä¹‰ã€‚åˆ°è¿™é‡Œï¼Œä½ æ˜¯ä¸æ˜¯é•¿èˆ’ä¸€å£æ°”ï¼Œæ»¡æ„åœ°æƒ³ç€ï¼Œæ€»ç®—å¼„æ˜ç™½Buffer å’Œ Cacheäº†ã€‚ä¸è¿‡ï¼ŒçŸ¥é“è¿™ä¸ªå®šä¹‰å°±çœŸçš„ç†è§£äº†å—ï¼Ÿè¿™é‡Œæˆ‘ç»™ä½ æäº†ä¸¤ä¸ªé—®é¢˜ï¼Œä½ å…ˆæƒ³æƒ³èƒ½ä¸èƒ½å›ç­”å‡ºæ¥ã€‚</p><p>ç¬¬ä¸€ä¸ªé—®é¢˜ï¼ŒBuffer çš„æ–‡æ¡£æ²¡æœ‰æåˆ°è¿™æ˜¯ç£ç›˜è¯»æ•°æ®è¿˜æ˜¯å†™æ•°æ®çš„ç¼“å­˜ï¼Œè€Œåœ¨å¾ˆå¤šç½‘ç»œæœç´¢çš„ç»“æœä¸­éƒ½ä¼šæåˆ° Buffer åªæ˜¯å¯¹<strong>å°†è¦å†™å…¥ç£ç›˜æ•°æ®</strong>çš„ç¼“å­˜ã€‚é‚£åè¿‡æ¥è¯´ï¼Œå®ƒä¼šä¸ä¼šä¹Ÿç¼“å­˜ä»ç£ç›˜ä¸­è¯»å–çš„æ•°æ®å‘¢ï¼Ÿ</p><p>ç¬¬äºŒä¸ªé—®é¢˜ï¼Œæ–‡æ¡£ä¸­æåˆ°ï¼ŒCache æ˜¯å¯¹ä»æ–‡ä»¶è¯»å–æ•°æ®çš„ç¼“å­˜ï¼Œé‚£ä¹ˆå®ƒæ˜¯ä¸æ˜¯ä¹Ÿä¼šç¼“å­˜å†™æ–‡ä»¶çš„æ•°æ®å‘¢ï¼Ÿ</p><p>ä¸ºäº†è§£ç­”è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘å°†ç”¨å‡ ä¸ªæ¡ˆä¾‹æ¥å±•ç¤ºï¼Œ Buffer å’Œ Cache åœ¨ä¸åŒåœºæ™¯ä¸‹çš„ä½¿ç”¨æƒ…å†µã€‚</p><h2>æ¡ˆä¾‹</h2><h3>ä½ çš„å‡†å¤‡</h3><p>è·Ÿå‰é¢å®éªŒä¸€æ ·ï¼Œä»Šå¤©çš„æ¡ˆä¾‹ä¹Ÿæ˜¯åŸºäº Ubuntu 18.04ï¼Œå½“ç„¶ï¼Œå…¶ä»– Linux ç³»ç»Ÿä¹Ÿé€‚ç”¨ã€‚æˆ‘çš„æ¡ˆä¾‹ç¯å¢ƒæ˜¯è¿™æ ·çš„ã€‚</p><ul>
<li>
<p>æœºå™¨é…ç½®ï¼š2 CPUï¼Œ8GB å†…å­˜ã€‚</p>
</li>
<li>
<p>é¢„å…ˆå®‰è£… sysstat åŒ…ï¼Œå¦‚ apt install sysstatã€‚</p>
</li>
</ul><p>ä¹‹æ‰€ä»¥è¦å®‰è£… sysstat  ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬è¦ç”¨åˆ° vmstat  ï¼Œæ¥è§‚å¯Ÿ Buffer å’Œ Cache çš„å˜åŒ–æƒ…å†µã€‚è™½ç„¶ä» /proc/meminfo é‡Œä¹Ÿå¯ä»¥è¯»åˆ°ç›¸åŒçš„ç»“æœï¼Œä½†æ¯•ç«Ÿè¿˜æ˜¯  vmstat  çš„ç»“æœæ›´åŠ ç›´è§‚ã€‚</p><p>å¦å¤–ï¼Œè¿™å‡ ä¸ªæ¡ˆä¾‹ä½¿ç”¨äº† dd æ¥æ¨¡æ‹Ÿç£ç›˜å’Œæ–‡ä»¶çš„ I/Oï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿéœ€è¦è§‚æµ‹ I/O çš„å˜åŒ–æƒ…å†µã€‚</p><p>ä¸Šé¢çš„å·¥å…·å®‰è£…å®Œæˆåï¼Œä½ å¯ä»¥æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯ï¼Œè¿æ¥åˆ° Ubuntu æœºå™¨ä¸Šã€‚</p><p>å‡†å¤‡ç¯èŠ‚çš„æœ€åä¸€æ­¥ï¼Œä¸ºäº†å‡å°‘ç¼“å­˜çš„å½±å“ï¼Œè®°å¾—åœ¨ç¬¬ä¸€ä¸ªç»ˆç«¯ä¸­ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥æ¸…ç†ç³»ç»Ÿç¼“å­˜ï¼š</p><pre><code># æ¸…ç†æ–‡ä»¶é¡µã€ç›®å½•é¡¹ã€Inodesç­‰å„ç§ç¼“å­˜
$ echo 3 &gt; /proc/sys/vm/drop_caches
</code></pre><p>è¿™é‡Œçš„ /proc/sys/vm/drop_caches ï¼Œå°±æ˜¯é€šè¿‡ proc æ–‡ä»¶ç³»ç»Ÿä¿®æ”¹å†…æ ¸è¡Œä¸ºçš„ä¸€ä¸ªç¤ºä¾‹ï¼Œå†™å…¥ 3 è¡¨ç¤ºæ¸…ç†æ–‡ä»¶é¡µã€ç›®å½•é¡¹ã€Inodesç­‰å„ç§ç¼“å­˜ã€‚è¿™å‡ ç§ç¼“å­˜çš„åŒºåˆ«ä½ æš‚æ—¶ä¸ç”¨ç®¡ï¼Œåé¢æˆ‘ä»¬éƒ½ä¼šè®²åˆ°ã€‚</p><h3>åœºæ™¯1ï¼šç£ç›˜å’Œæ–‡ä»¶å†™æ¡ˆä¾‹</h3><p>æˆ‘ä»¬å…ˆæ¥æ¨¡æ‹Ÿç¬¬ä¸€ä¸ªåœºæ™¯ã€‚é¦–å…ˆï¼Œåœ¨ç¬¬ä¸€ä¸ªç»ˆç«¯ï¼Œè¿è¡Œä¸‹é¢è¿™ä¸ªvmstat å‘½ä»¤ï¼š</p><pre><code># æ¯éš”1ç§’è¾“å‡º1ç»„æ•°æ®
$ vmstat 1
procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----
r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
0  0      0 7743608   1112  92168    0    0     0     0   52  152  0  1 100  0  0
 0  0      0 7743608   1112  92168    0    0     0     0   36   92  0  0 100  0  0
</code></pre><p>è¾“å‡ºç•Œé¢é‡Œï¼Œ å†…å­˜éƒ¨åˆ†çš„ buff å’Œ cache ï¼Œä»¥åŠ io éƒ¨åˆ†çš„ bi å’Œ bo å°±æ˜¯æˆ‘ä»¬è¦å…³æ³¨çš„é‡ç‚¹ã€‚</p><ul>
<li>
<p>buff å’Œ cache å°±æ˜¯æˆ‘ä»¬å‰é¢çœ‹åˆ°çš„ Buffers å’Œ Cacheï¼Œå•ä½æ˜¯ KBã€‚</p>
</li>
<li>
<p>bi å’Œ bo åˆ™åˆ†åˆ«è¡¨ç¤ºå—è®¾å¤‡è¯»å–å’Œå†™å…¥çš„å¤§å°ï¼Œå•ä½ä¸ºå—/ç§’ã€‚å› ä¸º Linux ä¸­å—çš„å¤§å°æ˜¯ 1KBï¼Œæ‰€ä»¥è¿™ä¸ªå•ä½ä¹Ÿå°±ç­‰ä»·äº KB/sã€‚</p>
</li>
</ul><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œç©ºé—²ç³»ç»Ÿä¸­ï¼Œä½ åº”è¯¥çœ‹åˆ°çš„æ˜¯ï¼Œè¿™å‡ ä¸ªå€¼åœ¨å¤šæ¬¡ç»“æœä¸­ä¸€ç›´ä¿æŒä¸å˜ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œåˆ°ç¬¬äºŒä¸ªç»ˆç«¯æ‰§è¡Œ dd å‘½ä»¤ï¼Œé€šè¿‡è¯»å–éšæœºè®¾å¤‡ï¼Œç”Ÿæˆä¸€ä¸ª500MBå¤§å°çš„æ–‡ä»¶ï¼š</p><pre><code>$ dd if=/dev/urandom of=/tmp/file bs=1M count=500
</code></pre><p>ç„¶åå†å›åˆ°ç¬¬ä¸€ä¸ªç»ˆç«¯ï¼Œè§‚å¯ŸBufferå’ŒCacheçš„å˜åŒ–æƒ…å†µï¼š</p><pre><code>procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----
r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
0  0      0 7499460   1344 230484    0    0     0     0   29  145  0  0 100  0  0
 1  0      0 7338088   1752 390512    0    0   488     0   39  558  0 47 53  0  0
 1  0      0 7158872   1752 568800    0    0     0     4   30  376  1 50 49  0  0
 1  0      0 6980308   1752 747860    0    0     0     0   24  360  0 50 50  0  0
 0  0      0 6977448   1752 752072    0    0     0     0   29  138  0  0 100  0  0
 0  0      0 6977440   1760 752080    0    0     0   152   42  212  0  1 99  1  0
...
 0  1      0 6977216   1768 752104    0    0     4 122880   33  234  0  1 51 49  0
 0  1      0 6977440   1768 752108    0    0     0 10240   38  196  0  0 50 50  0
</code></pre><p>é€šè¿‡è§‚å¯Ÿ vmstat çš„è¾“å‡ºï¼Œæˆ‘ä»¬å‘ç°ï¼Œåœ¨ddå‘½ä»¤è¿è¡Œæ—¶ï¼Œ Cacheåœ¨ä¸åœåœ°å¢é•¿ï¼Œè€ŒBufferåŸºæœ¬ä¿æŒä¸å˜ã€‚</p><p>å†è¿›ä¸€æ­¥è§‚å¯ŸI/Oçš„æƒ…å†µï¼Œä½ ä¼šçœ‹åˆ°ï¼Œ</p><ul>
<li>
<p>åœ¨ Cache åˆšå¼€å§‹å¢é•¿æ—¶ï¼Œå—è®¾å¤‡ I/O å¾ˆå°‘ï¼Œbi åªå‡ºç°äº†ä¸€æ¬¡ 488 KB/sï¼Œbo åˆ™åªæœ‰ä¸€æ¬¡ 4KBã€‚è€Œè¿‡ä¸€æ®µæ—¶é—´åï¼Œæ‰ä¼šå‡ºç°å¤§é‡çš„å—è®¾å¤‡å†™ï¼Œæ¯”å¦‚ bo å˜æˆäº†122880ã€‚</p>
</li>
<li>
<p>å½“ dd å‘½ä»¤ç»“æŸåï¼ŒCache ä¸å†å¢é•¿ï¼Œä½†å—è®¾å¤‡å†™è¿˜ä¼šæŒç»­ä¸€æ®µæ—¶é—´ï¼Œå¹¶ä¸”ï¼Œå¤šæ¬¡ I/O å†™çš„ç»“æœåŠ èµ·æ¥ï¼Œæ‰æ˜¯ dd è¦å†™çš„ 500M çš„æ•°æ®ã€‚</p>
</li>
</ul><p>æŠŠè¿™ä¸ªç»“æœï¼Œè·Ÿæˆ‘ä»¬åˆšåˆšäº†è§£åˆ°çš„Cacheçš„å®šä¹‰åšä¸ªå¯¹æ¯”ï¼Œä½ å¯èƒ½ä¼šæœ‰ç‚¹æ™•ä¹ã€‚ä¸ºä»€ä¹ˆå‰é¢æ–‡æ¡£ä¸Šè¯´ Cache æ˜¯æ–‡ä»¶è¯»çš„é¡µç¼“å­˜ï¼Œæ€ä¹ˆç°åœ¨å†™æ–‡ä»¶ä¹Ÿæœ‰å®ƒçš„ä»½ï¼Ÿ</p><p>è¿™ä¸ªç–‘é—®ï¼Œæˆ‘ä»¬æš‚ä¸”å…ˆè®°ä¸‹æ¥ï¼Œæ¥ç€å†æ¥çœ‹å¦ä¸€ä¸ªç£ç›˜å†™çš„æ¡ˆä¾‹ã€‚ä¸¤ä¸ªæ¡ˆä¾‹ç»“æŸåï¼Œæˆ‘ä»¬å†ç»Ÿä¸€è¿›è¡Œåˆ†æã€‚</p><p>ä¸è¿‡ï¼Œå¯¹äºæ¥ä¸‹æ¥çš„æ¡ˆä¾‹ï¼Œæˆ‘å¿…é¡»å¼ºè°ƒä¸€ç‚¹ï¼š</p><p>ä¸‹é¢çš„å‘½ä»¤å¯¹ç¯å¢ƒè¦æ±‚å¾ˆé«˜ï¼Œéœ€è¦ä½ çš„ç³»ç»Ÿé…ç½®å¤šå—ç£ç›˜ï¼Œå¹¶ä¸”ç£ç›˜åˆ†åŒº /dev/sdb1 è¿˜è¦å¤„äºæœªä½¿ç”¨çŠ¶æ€ã€‚å¦‚æœä½ åªæœ‰ä¸€å—ç£ç›˜ï¼Œåƒä¸‡ä¸è¦å°è¯•ï¼Œå¦åˆ™å°†ä¼šå¯¹ä½ çš„ç£ç›˜åˆ†åŒºé€ æˆæŸåã€‚</p><p>å¦‚æœä½ çš„ç³»ç»Ÿç¬¦åˆæ ‡å‡†ï¼Œå°±å¯ä»¥ç»§ç»­åœ¨ç¬¬äºŒä¸ªç»ˆç«¯ä¸­ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤ã€‚æ¸…ç†ç¼“å­˜åï¼Œå‘ç£ç›˜åˆ†åŒº/dev/sdb1  å†™å…¥2GBçš„éšæœºæ•°æ®ï¼š</p><pre><code># é¦–å…ˆæ¸…ç†ç¼“å­˜
$ echo 3 &gt; /proc/sys/vm/drop_caches
# ç„¶åè¿è¡Œddå‘½ä»¤å‘ç£ç›˜åˆ†åŒº/dev/sdb1å†™å…¥2Gæ•°æ®
$ dd if=/dev/urandom of=/dev/sdb1 bs=1M count=2048
</code></pre><p>ç„¶åï¼Œå†å›åˆ°ç»ˆç«¯ä¸€ï¼Œè§‚å¯Ÿå†…å­˜å’ŒI/Oçš„å˜åŒ–æƒ…å†µï¼š</p><pre><code>procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
1  0      0 7584780 153592  97436    0    0   684     0   31  423  1 48 50  2  0
 1  0      0 7418580 315384 101668    0    0     0     0   32  144  0 50 50  0  0
 1  0      0 7253664 475844 106208    0    0     0     0   20  137  0 50 50  0  0
 1  0      0 7093352 631800 110520    0    0     0     0   23  223  0 50 50  0  0
 1  1      0 6930056 790520 114980    0    0     0 12804   23  168  0 50 42  9  0
 1  0      0 6757204 949240 119396    0    0     0 183804   24  191  0 53 26 21  0
 1  1      0 6591516 1107960 123840    0    0     0 77316   22  232  0 52 16 33  0
</code></pre><p>ä»è¿™é‡Œä½ ä¼šçœ‹åˆ°ï¼Œè™½ç„¶åŒæ˜¯å†™æ•°æ®ï¼Œå†™ç£ç›˜è·Ÿå†™æ–‡ä»¶çš„ç°è±¡è¿˜æ˜¯ä¸åŒçš„ã€‚å†™ç£ç›˜æ—¶ï¼ˆä¹Ÿå°±æ˜¯boå¤§äº  0 æ—¶ï¼‰ï¼ŒBufferå’ŒCacheéƒ½åœ¨å¢é•¿ï¼Œä½†æ˜¾ç„¶Bufferçš„å¢é•¿å¿«å¾—å¤šã€‚</p><p>è¿™è¯´æ˜ï¼Œå†™ç£ç›˜ç”¨åˆ°äº†å¤§é‡çš„Bufferï¼Œè¿™è·Ÿæˆ‘ä»¬åœ¨æ–‡æ¡£ä¸­æŸ¥åˆ°çš„å®šä¹‰æ˜¯ä¸€æ ·çš„ã€‚</p><p>å¯¹æ¯”ä¸¤ä¸ªæ¡ˆä¾‹ï¼Œæˆ‘ä»¬å‘ç°ï¼Œå†™æ–‡ä»¶æ—¶ä¼šç”¨åˆ° Cache ç¼“å­˜æ•°æ®ï¼Œè€Œå†™ç£ç›˜åˆ™ä¼šç”¨åˆ° Buffer æ¥ç¼“å­˜æ•°æ®ã€‚æ‰€ä»¥ï¼Œå›åˆ°åˆšåˆšçš„é—®é¢˜ï¼Œè™½ç„¶æ–‡æ¡£ä¸Šåªæåˆ°ï¼ŒCacheæ˜¯æ–‡ä»¶è¯»çš„ç¼“å­˜ï¼Œä½†å®é™…ä¸Šï¼ŒCacheä¹Ÿä¼šç¼“å­˜å†™æ–‡ä»¶æ—¶çš„æ•°æ®ã€‚</p><h3>åœºæ™¯2ï¼šç£ç›˜å’Œæ–‡ä»¶è¯»æ¡ˆä¾‹</h3><p>äº†è§£äº†ç£ç›˜å’Œæ–‡ä»¶å†™çš„æƒ…å†µï¼Œæˆ‘ä»¬å†åè¿‡æ¥æƒ³ï¼Œç£ç›˜å’Œæ–‡ä»¶è¯»çš„æ—¶å€™ï¼Œåˆæ˜¯æ€æ ·çš„å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å›åˆ°ç¬¬äºŒä¸ªç»ˆç«¯ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤ã€‚æ¸…ç†ç¼“å­˜åï¼Œä»æ–‡ä»¶/tmp/fileä¸­ï¼Œè¯»å–æ•°æ®å†™å…¥ç©ºè®¾å¤‡ï¼š</p><pre><code># é¦–å…ˆæ¸…ç†ç¼“å­˜
$ echo 3 &gt; /proc/sys/vm/drop_caches
# è¿è¡Œddå‘½ä»¤è¯»å–æ–‡ä»¶æ•°æ®
$ dd if=/tmp/file of=/dev/null
</code></pre><p>ç„¶åï¼Œå†å›åˆ°ç»ˆç«¯ä¸€ï¼Œè§‚å¯Ÿå†…å­˜å’ŒI/Oçš„å˜åŒ–æƒ…å†µï¼š</p><pre><code>procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
 0  1      0 7724164   2380 110844    0    0 16576     0   62  360  2  2 76 21  0
 0  1      0 7691544   2380 143472    0    0 32640     0   46  439  1  3 50 46  0
 0  1      0 7658736   2380 176204    0    0 32640     0   54  407  1  4 50 46  0
 0  1      0 7626052   2380 208908    0    0 32640    40   44  422  2  2 50 46  0
</code></pre><p>è§‚å¯Ÿ vmstat çš„è¾“å‡ºï¼Œä½ ä¼šå‘ç°è¯»å–æ–‡ä»¶æ—¶ï¼ˆä¹Ÿå°±æ˜¯biå¤§äº0æ—¶ï¼‰ï¼ŒBufferä¿æŒä¸å˜ï¼Œè€ŒCacheåˆ™åœ¨ä¸åœå¢é•¿ã€‚è¿™è·Ÿæˆ‘ä»¬æŸ¥åˆ°çš„å®šä¹‰â€œCacheæ˜¯å¯¹æ–‡ä»¶è¯»çš„é¡µç¼“å­˜â€æ˜¯ä¸€è‡´çš„ã€‚</p><p>é‚£ä¹ˆï¼Œç£ç›˜è¯»åˆæ˜¯ä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿæˆ‘ä»¬å†è¿è¡Œç¬¬äºŒä¸ªæ¡ˆä¾‹æ¥çœ‹çœ‹ã€‚</p><p>é¦–å…ˆï¼Œå›åˆ°ç¬¬äºŒä¸ªç»ˆç«¯ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤ã€‚æ¸…ç†ç¼“å­˜åï¼Œä»ç£ç›˜åˆ†åŒº /dev/sda1ä¸­è¯»å–æ•°æ®ï¼Œå†™å…¥ç©ºè®¾å¤‡ï¼š</p><pre><code># é¦–å…ˆæ¸…ç†ç¼“å­˜
$ echo 3 &gt; /proc/sys/vm/drop_caches
# è¿è¡Œddå‘½ä»¤è¯»å–æ–‡ä»¶
$ dd if=/dev/sda1 of=/dev/null bs=1M count=1024
</code></pre><p>ç„¶åï¼Œå†å›åˆ°ç»ˆç«¯ä¸€ï¼Œè§‚å¯Ÿå†…å­˜å’ŒI/Oçš„å˜åŒ–æƒ…å†µï¼š</p><pre><code>procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
0  0      0 7225880   2716 608184    0    0     0     0   48  159  0  0 100  0  0
 0  1      0 7199420  28644 608228    0    0 25928     0   60  252  0  1 65 35  0
 0  1      0 7167092  60900 608312    0    0 32256     0   54  269  0  1 50 49  0
 0  1      0 7134416  93572 608376    0    0 32672     0   53  253  0  0 51 49  0
 0  1      0 7101484 126320 608480    0    0 32748     0   80  414  0  1 50 49  0
</code></pre><p>è§‚å¯Ÿ vmstat çš„è¾“å‡ºï¼Œä½ ä¼šå‘ç°è¯»ç£ç›˜æ—¶ï¼ˆä¹Ÿå°±æ˜¯biå¤§äº0æ—¶ï¼‰ï¼ŒBufferå’ŒCacheéƒ½åœ¨å¢é•¿ï¼Œä½†æ˜¾ç„¶Bufferçš„å¢é•¿å¿«å¾ˆå¤šã€‚è¿™è¯´æ˜è¯»ç£ç›˜æ—¶ï¼Œæ•°æ®ç¼“å­˜åˆ°äº† Buffer ä¸­ã€‚</p><p>å½“ç„¶ï¼Œæˆ‘æƒ³ï¼Œç»è¿‡ä¸Šä¸€ä¸ªåœºæ™¯ä¸­ä¸¤ä¸ªæ¡ˆä¾‹çš„åˆ†æï¼Œä½ è‡ªå·±ä¹Ÿå¯ä»¥å¯¹æ¯”å¾—å‡ºè¿™ä¸ªç»“è®ºï¼šè¯»æ–‡ä»¶æ—¶æ•°æ®ä¼šç¼“å­˜åˆ° Cache ä¸­ï¼Œè€Œè¯»ç£ç›˜æ—¶æ•°æ®ä¼šç¼“å­˜åˆ° Buffer ä¸­ã€‚</p><p>åˆ°è¿™é‡Œä½ åº”è¯¥å‘ç°äº†ï¼Œè™½ç„¶æ–‡æ¡£æä¾›äº†å¯¹Bufferå’ŒCacheçš„è¯´æ˜ï¼Œä½†æ˜¯ä»ä¸èƒ½è¦†ç›–åˆ°æ‰€æœ‰çš„ç»†èŠ‚ã€‚æ¯”å¦‚è¯´ï¼Œä»Šå¤©æˆ‘ä»¬äº†è§£åˆ°çš„è¿™ä¸¤ç‚¹ï¼š</p><ul>
<li>
<p>Bufferæ—¢å¯ä»¥ç”¨ä½œâ€œå°†è¦å†™å…¥ç£ç›˜æ•°æ®çš„ç¼“å­˜â€ï¼Œä¹Ÿå¯ä»¥ç”¨ä½œâ€œä»ç£ç›˜è¯»å–æ•°æ®çš„ç¼“å­˜â€ã€‚</p>
</li>
<li>
<p>Cacheæ—¢å¯ä»¥ç”¨ä½œâ€œä»æ–‡ä»¶è¯»å–æ•°æ®çš„é¡µç¼“å­˜â€ï¼Œä¹Ÿå¯ä»¥ç”¨ä½œâ€œå†™æ–‡ä»¶çš„é¡µç¼“å­˜â€ã€‚</p>
</li>
</ul><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å›ç­”äº†æ¡ˆä¾‹å¼€å§‹å‰çš„ä¸¤ä¸ªé—®é¢˜ã€‚</p><p>ç®€å•æ¥è¯´ï¼Œ<strong>Bufferæ˜¯å¯¹ç£ç›˜æ•°æ®çš„ç¼“å­˜ï¼Œè€ŒCacheæ˜¯æ–‡ä»¶æ•°æ®çš„ç¼“å­˜ï¼Œå®ƒä»¬æ—¢ä¼šç”¨åœ¨è¯»è¯·æ±‚ä¸­ï¼Œä¹Ÿä¼šç”¨åœ¨å†™è¯·æ±‚ä¸­</strong>ã€‚</p><h2>å°ç»“</h2><p>ä»Šå¤©ï¼Œæˆ‘ä»¬ä¸€èµ·æ¢ç´¢äº†å†…å­˜æ€§èƒ½ä¸­ Buffer å’Œ Cache çš„è¯¦ç»†å«ä¹‰ã€‚Bufferå’ŒCacheåˆ†åˆ«ç¼“å­˜ç£ç›˜å’Œæ–‡ä»¶ç³»ç»Ÿçš„è¯»å†™æ•°æ®ã€‚</p><ul>
<li>
<p>ä»å†™çš„è§’åº¦æ¥è¯´ï¼Œä¸ä»…å¯ä»¥ä¼˜åŒ–ç£ç›˜å’Œæ–‡ä»¶çš„å†™å…¥ï¼Œå¯¹åº”ç”¨ç¨‹åºä¹Ÿæœ‰å¥½å¤„ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥åœ¨æ•°æ®çœŸæ­£è½ç›˜å‰ï¼Œå°±è¿”å›å»åšå…¶ä»–å·¥ä½œã€‚</p>
</li>
<li>
<p>ä»è¯»çš„è§’åº¦æ¥è¯´ï¼Œæ—¢å¯ä»¥åŠ é€Ÿè¯»å–é‚£äº›éœ€è¦é¢‘ç¹è®¿é—®çš„æ•°æ®ï¼Œä¹Ÿé™ä½äº†é¢‘ç¹I/Oå¯¹ç£ç›˜çš„å‹åŠ›ã€‚</p>
</li>
</ul><p>é™¤äº†æ¢ç´¢çš„å†…å®¹æœ¬èº«ï¼Œè¿™ä¸ªæ¢ç´¢è¿‡ç¨‹å¯¹ä½ åº”è¯¥ä¹Ÿæœ‰æ‰€å¯å‘ã€‚åœ¨æ’æŸ¥æ€§èƒ½é—®é¢˜æ—¶ï¼Œç”±äºå„ç§èµ„æºçš„æ€§èƒ½æŒ‡æ ‡å¤ªå¤šï¼Œæˆ‘ä»¬ä¸å¯èƒ½è®°ä½æ‰€æœ‰æŒ‡æ ‡çš„è¯¦ç»†å«ä¹‰ã€‚é‚£ä¹ˆï¼Œå‡†ç¡®é«˜æ•ˆçš„æ‰‹æ®µâ€”â€”æŸ¥æ–‡æ¡£ï¼Œå°±éå¸¸é‡è¦äº†ã€‚</p><p>ä½ ä¸€å®šè¦å…»æˆæŸ¥æ–‡æ¡£çš„ä¹ æƒ¯ï¼Œå¹¶å­¦ä¼šè§£è¯»è¿™äº›æ€§èƒ½æŒ‡æ ‡çš„è¯¦ç»†å«ä¹‰ã€‚æ­¤å¤–ï¼Œproc æ–‡ä»¶ç³»ç»Ÿä¹Ÿæ˜¯æˆ‘ä»¬çš„å¥½å¸®æ‰‹ã€‚å®ƒä¸ºæˆ‘ä»¬å‘ˆç°äº†ç³»ç»Ÿå†…éƒ¨çš„è¿è¡ŒçŠ¶æ€ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å¾ˆå¤šæ€§èƒ½å·¥å…·çš„æ•°æ®æ¥æºï¼Œæ˜¯è¾…åŠ©æ’æŸ¥æ€§èƒ½é—®é¢˜çš„å¥½æ–¹æ³•ã€‚</p><h2>æ€è€ƒ</h2><p>æœ€åï¼Œæˆ‘æƒ³ç»™ä½ ç•™ä¸€ä¸ªæ€è€ƒé¢˜ã€‚</p><p>æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œå¯ä»¥ä½¿ç”¨ psã€top æˆ–è€… proc æ–‡ä»¶ç³»ç»Ÿï¼Œæ¥è·å–è¿›ç¨‹çš„å†…å­˜ä½¿ç”¨æƒ…å†µã€‚é‚£ä¹ˆï¼Œå¦‚ä½•ç»Ÿè®¡å‡ºæ‰€æœ‰è¿›ç¨‹çš„ç‰©ç†å†…å­˜ä½¿ç”¨é‡å‘¢ï¼Ÿ</p><p>æç¤ºï¼šè¦é¿å…é‡å¤è®¡ç®—å¤šä¸ªè¿›ç¨‹åŒæ—¶å ç”¨çš„å†…å­˜ï¼Œåƒæ˜¯é¡µç¼“å­˜ã€å…±äº«å†…å­˜è¿™ç±»ã€‚å¦‚æœä½ æŠŠ psã€top å¾—åˆ°çš„æ•°æ®ç›´æ¥ç›¸åŠ ï¼Œå°±ä¼šå‡ºç°é‡å¤è®¡ç®—çš„é—®é¢˜ã€‚</p><p>è¿™é‡Œï¼Œæˆ‘æ¨èä» /proc/&lt; pid &gt;/smaps  å…¥æ‰‹ã€‚å‰é¢å†…å®¹é‡Œï¼Œæˆ‘å¹¶æ²¡æœ‰ç›´æ¥è®²è¿‡/proc/&lt; pid &gt;smaps æ–‡ä»¶ä¸­å„ä¸ªæŒ‡æ ‡å«ä¹‰ï¼Œæ‰€ä»¥ï¼Œéœ€è¦ä½ è‡ªå·±åŠ¨æ‰‹æŸ¥ proc æ–‡ä»¶ç³»ç»Ÿçš„æ–‡æ¡£ï¼Œè§£è¯»å¹¶å›ç­”è¿™ä¸ªé—®é¢˜ã€‚</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå’Œæˆ‘è®¨è®ºï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„åŒäº‹ã€æœ‹å‹ã€‚æˆ‘ä»¬ä¸€èµ·åœ¨å®æˆ˜ä¸­æ¼”ç»ƒï¼Œåœ¨äº¤æµä¸­è¿›æ­¥ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/a3/e9/a396aed4116c2c989771c1295736abe9.jpg" alt=""></p>
                    </div>
                </div>

            </div>
            <div data-v-87ffcada="" class="article-comments pd"><h2 data-v-87ffcada=""><span
                    data-v-87ffcada="">ç²¾é€‰ç•™è¨€</span></h2>
                <ul data-v-87ffcada="">
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/47/42/1d7db2f6.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å€ªæœ‹é£</span>
                            </div>
                            <div class="bd">å…³äºç£ç›˜å’Œæ–‡ä»¶çš„åŒºåˆ«ï¼Œæœ¬æ¥ä»¥ä¸ºå¤§å®¶éƒ½æ‡‚äº†ï¼Œæ‰€ä»¥æ²¡æœ‰ç»†è®²ã€‚ç£ç›˜æ˜¯ä¸€ä¸ªå—è®¾å¤‡ï¼Œå¯ä»¥åˆ’åˆ†ä¸ºä¸åŒçš„åˆ†åŒºï¼›åœ¨åˆ†åŒºä¹‹ä¸Šå†åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿï¼ŒæŒ‚è½½åˆ°æŸä¸ªç›®å½•ï¼Œä¹‹åæ‰å¯ä»¥åœ¨è¿™ä¸ªç›®å½•ä¸­è¯»å†™æ–‡ä»¶ã€‚<br><br>å…¶å® Linux ä¸­â€œä¸€åˆ‡çš†æ–‡ä»¶â€ï¼Œè€Œæ–‡ç« ä¸­æåˆ°çš„â€œæ–‡ä»¶â€æ˜¯æ™®é€šæ–‡ä»¶ï¼Œç£ç›˜æ˜¯å—è®¾å¤‡æ–‡ä»¶ï¼Œè¿™äº›å¤§å®¶å¯ä»¥æ‰§è¡Œ &quot;ls -l &lt;è·¯å¾„&gt;&quot; æŸ¥çœ‹å®ƒä»¬çš„åŒºåˆ«ï¼ˆè¾“å‡ºçš„å«ä¹‰å¦‚æœä¸æ‡‚è¯· man ls æŸ¥è¯¢ï¼‰ã€‚<br><br>åœ¨è¯»å†™æ™®é€šæ–‡ä»¶æ—¶ï¼Œä¼šç»è¿‡æ–‡ä»¶ç³»ç»Ÿï¼Œç”±æ–‡ä»¶ç³»ç»Ÿè´Ÿè´£ä¸ç£ç›˜äº¤äº’ï¼›è€Œè¯»å†™ç£ç›˜æˆ–è€…åˆ†åŒºæ—¶ï¼Œå°±ä¼šè·³è¿‡æ–‡ä»¶ç³»ç»Ÿï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„â€œè£¸I&#47;Oâ€œã€‚è¿™ä¸¤ç§è¯»å†™æ–¹å¼æ‰€ä½¿ç”¨çš„ç¼“å­˜æ˜¯ä¸åŒçš„ï¼Œä¹Ÿå°±æ˜¯æ–‡ä¸­æ‰€è®²çš„ Cache å’Œ Buffer åŒºåˆ«ã€‚<br><br>å…³äºæ–‡ä»¶ç³»ç»Ÿã€ç£ç›˜ä»¥åŠ I&#47;O çš„åŸç†ï¼Œå¤§å®¶ä¸è¦ç€æ€¥ï¼Œåé¢ I&#47;O æ¨¡å—è¿˜ä¼šè®²çš„ã€‚ <br></div>
                            <span class="time">2018-12-26 09:27</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIbas4S4X5W15njMeoEPPSyBZRX37nrTXbMFFeHghXl4Slk6WXE7oq5yxoNnukYfcOQs00RAvUmEA/132" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Geek_5258f8</span>
                            </div>
                            <div class="bd">ç†è®ºä¸Šï¼Œä¸€ä¸ªæ–‡ä»¶è¯»é¦–å…ˆåˆ°Block Buffer, ç„¶ååˆ°Page Cacheã€‚æœ‰äº†æ–‡ä»¶ç³»ç»Ÿæ‰æœ‰äº†Page Cache.<br>åœ¨è€çš„Linuxä¸Šè¿™ä¸¤ä¸ªCacheæ˜¯åˆ†å¼€çš„ã€‚é‚£è¿™æ ·å¯¹äºæ–‡ä»¶æ•°æ®ï¼Œä¼šè¢«Cacheä¸¤æ¬¡ã€‚è¿™ç§æ–¹æ¡ˆè™½ç„¶ç®€å•ï¼Œ<br>ä½†ä½æ•ˆã€‚åæœŸLinuxæŠŠè¿™ä¸¤ä¸ªCacheç»Ÿä¸€äº†ã€‚å¯¹äºæ–‡ä»¶ï¼ŒPage CacheæŒ‡å‘Block Bufferï¼Œå¯¹äºéæ–‡ä»¶<br>åˆ™æ˜¯Block Bufferã€‚è¿™æ ·å°±å¦‚æ–‡ä»¶å®éªŒçš„ç»“æœï¼Œæ–‡ä»¶æ“ä½œï¼Œåªå½±å“Page Cacheï¼ŒRawæ“ä½œï¼Œåˆ™åªå½±å“Buffer. æ¯”å¦‚ä¸€æ­¤VMè™šæ‹Ÿæœºï¼Œåˆ™ä¼šè¶Šè¿‡File Systemï¼Œåªæ¥æ“ä½œ Disk, å¸¸è¯´çš„Direct IO. <br></div>
                            <span class="time">2018-12-26 20:30</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ğŸ‘ </p>
                                <p class="reply-time">2018-12-26 22:01</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/22/9a/989a3d8e.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">JJ</span>
                            </div>
                            <div class="bd">è¿˜æ˜¯æœ‰ç‚¹å›°æƒ‘ï¼Œæ„Ÿè§‰è¯»å†™ç£ç›˜ä¸Šçš„æ•°æ®ä¸å°±æ˜¯è¯»å†™ç£ç›˜ä¸Šçš„æ–‡ä»¶é‡Œçš„æ•°æ®å˜›ï¼Œéš¾é“è¯»ç£ç›˜ä¸Šçš„æ•°æ®å¯ä»¥ä¸ç»è¿‡æ–‡ä»¶ç³»ç»Ÿå—ï¼Œå¯ä»¥ç›´æ¥è¯»è£¸ç£ç›˜ï¼Ÿæœ‰ç‚¹æ²¡ç†è§£bufferæ˜¯ç£ç›˜ä¸Šçš„æ•°æ®ç¼“å­˜ï¼Œcacheæ˜¯æ–‡ä»¶æ•°æ®ç¼“å­˜ï¼Œæ±‚å¤§ç¥è§£ç­”ä¸‹ã€‚ã€‚ <br></div>
                            <span class="time">2018-12-26 00:44</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">è¯·å‚è€ƒç½®é¡¶å›å¤</p>
                                <p class="reply-time">2018-12-26 09:30</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/de/d4/b83c4185.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">David.cui</span>
                            </div>
                            <div class="bd">æ•°æ®åº“ä½¿ç”¨è£¸è®¾å¤‡æ˜¯æ˜æ˜¾çš„ç£ç›˜è¯»å†™ï¼›å¦‚æœæ•°æ®åº“çš„æ•°æ®æ–‡ä»¶åœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šå°±æ˜¯æ–‡ä»¶è¯»å†™ã€‚è¿™æ ·ç†è§£å¯¹ä¹ˆ <br></div>
                            <span class="time">2018-12-26 11:56</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å¯¹çš„</p>
                                <p class="reply-time">2018-12-26 23:00</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æˆ‘æ¥ä¹Ÿ</span>
                            </div>
                            <div class="bd">[D16æ‰“å¡]<br>åªæœ‰ä¸€å—ç£ç›˜,å°±æ²¡è½»æ˜“çš„è¯•ç¬¬äºŒä¸ªæ¡ˆä¾‹.<br>---------------------------------------------------<br>ä»¥å‰åº”è¯¥åªæ¥è§¦åˆ°äº†æ–‡ä»¶æ•°æ®çš„ç¼“å­˜cache,æ²¡æ¥è§¦åˆ°ç£ç›˜æ•°æ®çš„ç¼“å­˜buffer.<br>1.vimä¸€ä¸ªå¤§æ–‡ä»¶,åœ¨ç¬¬ä¸€æ¬¡åŠ è½½æ—¶è¾ƒæ…¢,ä¹‹åå†æ¬¡æ‰“å¼€æ—¶,ä¼šæ˜æ˜¾æ„Ÿè§‰åˆ°åŠ è½½é€Ÿåº¦æ›´å¿«,åº”è¯¥å°±æ˜¯cacheçš„åŠŸåŠ³.<br>2.åœ¨linuxä¸‹å†™cç¨‹åºæ—¶,æ‰“å°æ—¥å¿—printfåé¢ä¹ æƒ¯åŠ fflush(stdout);<br>å¯ä»¥å¼ºåˆ¶åˆ·æ–°ç¼“å†²åŒºçš„å†…å®¹åˆ°ç‰©ç†è®¾å¤‡.åœ¨ç¨‹åºå®•æ‰æ—¶å¯ä»¥å®šä½åˆ°æœ€åçš„è¾“å‡ºæ—¥å¿—.<br>å¦‚æœä¸åŠ fflush,å¯èƒ½ä¼šä¸¢å¤±æ‰éƒ¨åˆ†ç¼“å†²åŒºå†…çš„æ—¥å¿—.<br>ä¸çŸ¥é“è¿™é‡Œçš„ç¼“å†²åŒºè·Ÿç³»ç»Ÿçš„cacheæ˜¯ä¸æ˜¯ä¸€ä¸ªæ¦‚å¿µ.<br>---------------------------------------------------<br>ls -l ç£ç›˜ä¸æ™®é€šæ–‡ä»¶çš„åŒºåˆ«:<br># ls -l &#47;dev&#47;sda1<br>brw-rw---- 1 root disk 8, 1 12æœˆ 12 10:17 &#47;dev&#47;sda1<br># ls -ld &#47;root&#47;<br>drwx------ 12 root root 4096 12æœˆ 26 11:48 &#47;root&#47;<br>ç¬¬ä¸€ä¸ªå­—ç¬¦båº”è¯¥è¡¨ç¤ºæ˜¯ç£ç›˜ç±»å‹ då°±æ˜¯ç›®å½•ç±»å‹äº†<br>æœ‰ä¸€åˆ—ä¸€ä¸ªæ˜¾ç¤ºçš„ç¬¬å‡ å—ç£ç›˜çš„ç¬¬å‡ ä¸ªåˆ†åŒº[8,1],ä¸€ä¸ªæ˜¯å ç”¨çš„ç©ºé—´å¤§å°[4096].<br>ç–‘é—®:man ls äº†ä¹Ÿæ²¡çœ‹åˆ°å„åˆ—å…·ä½“çš„å«ä¹‰å•Š,è¿™ä¸ªå»å“ªæŸ¥å‘¢?<br>---------------------------------------------------<br>è€å¸ˆæœ€åçš„é—®é¢˜æ·±å…¥æ¢ç´¢åˆæ˜¯ä¸€ç¯‡é•¿æ–‡äº†.å“ˆå“ˆ! <br></div>
                            <span class="time">2018-12-26 12:39</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å‰é¢2æ˜¯Cåº“çš„ç¼“å­˜ï¼Œè·Ÿç³»ç»Ÿçš„ç¼“å­˜æ²¡å…³ç³»<br><br>lsçš„æ–‡æ¡£å‚è€ƒ info coreutils &#39;ls invocation&#39;</p>
                                <p class="reply-time">2018-12-26 22:53</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/94/47/75875257.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">è™è™â¤ï¸</span>
                            </div>
                            <div class="bd"><br>é€šè¿‡è¯»csappï¼Œåˆå¤ä¹ äº†ä¸‹è™šæ‹Ÿå†…å­˜ã€‚å…¶æ¦‚å¿µä¸º â€œè™šæ‹Ÿå†…å­˜ç»„ç»‡ä¸ºä¸€ä¸ªç”±å­˜æ”¾åœ¨ç£ç›˜ä¸Šçš„Nä¸ªè¿ç»­çš„å­—èŠ‚å¤§å°çš„å•å…ƒç»„æˆçš„æ•°ç»„ã€‚â€ è®¿é—®è™šæ‹Ÿå†…å­˜æ—¶ï¼ŒMMUé€šè¿‡è®¿é—®é¡µè¡¨ï¼Œæ¥ç´¢å¼•åˆ°å®é™…çš„å­˜å‚¨åœ°å€ã€‚å¦‚æœåœ¨ç‰©ç†å†…å­˜ä¸­æœ‰ç¼“å­˜ï¼Œç›´æ¥ä»ç‰©ç†å†…å­˜ä¸­è¯»å–æ•°æ®ã€‚å¦åˆ™ï¼Œä»ç£ç›˜ä¸­è¯»å–ï¼Œå¹¶é€‰æ‹©ç‰ºç‰²ä¸€ä¸ªç‰©ç†é¡µï¼Œå¹¶æ›¿æ¢ä¸ºæ–°è¯»å–çš„é¡µï¼ˆå½“ç„¶ï¼Œæˆ‘è§‰å¾—è¿™ç§åº”è¯¥æ˜¯åœ¨å†…å­˜æ²¡æœ‰freeçš„æƒ…å†µä¸‹ï¼‰ã€‚å¦‚æœè¢«ç‰ºç‰²çš„é¡µå‘ç”Ÿæ”¹å˜ï¼Œåˆ™å†™å›ç£ç›˜ã€‚æœ€åæ›´æ–°é¡µè¡¨ã€‚<br><br>æˆ‘çš„é—®é¢˜æ˜¯ï¼š<br>1. ä¸Šä¸€èŠ‚è®²äº†è™šæ‹Ÿå†…å­˜çš„ç©ºé—´åˆ†å¸ƒï¼Œé‚£ä¹ˆç‰©ç†å†…å­˜æœ‰æ²¡æœ‰ç©ºé—´åˆ†å¸ƒçš„æ¦‚å¿µï¼Ÿä»vmstatçš„è¾“å‡ºæ¥çœ‹ï¼Œç‰©ç†å†…å­˜æ˜¯ä¸æ˜¯åªåŒ…æ‹¬buffer cache å’Œ freeå‘¢ï¼Ÿ<br>2. è¿™é‡Œçš„cacheæ˜¯ä¸æ˜¯ç­‰åŒäºè™šæ‹Ÿå†…å­˜åœ¨ç‰©ç†å†…å­˜ä¸­çš„ç¼“å­˜ï¼Ÿ<br>3. ä¸Šä¸€èŠ‚è¯¾æ‰€è¯´çš„å†…å­˜å›æ”¶ã€‚ä½¿ç”¨LRUç®—æ³•â€œå›æ”¶ç¼“å­˜â€ï¼Œæ˜¯å¦æ˜¯æˆ‘ä¸Šé¢æè¿°çš„æ¦‚å¿µï¼Ÿé‚£ä¹ˆæ‰€è°“çš„â€œå›æ”¶ä¸å¸¸è®¿é—®çš„å†…å­˜ï¼ŒæŠŠä¸å¸¸ç”¨çš„å†…å­˜é€šè¿‡äº¤æ¢åˆ†åŒºç›´æ¥å†™åˆ°ç£ç›˜ä¸­â€ï¼ŒæŒ‡çš„æ˜¯äº¤æ¢å‡ºå“ªç§å†…å­˜ï¼Ÿcacheï¼Ÿbufferï¼Ÿæˆ–è€…å…¶ä»–çš„ç§ç±»ï¼Ÿ<br><br>å¸Œæœ›å¾—åˆ°è€å¸ˆå›å¤ï¼Œä¹Ÿæ¬¢è¿å„ä½å¤§ä½¬å…±åŒæ¢è®¨ã€‚ <br></div>
                            <span class="time">2018-12-26 12:10</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">1. ç‰©ç†å†…å­˜çš„åˆ†å¸ƒç”±ç³»ç»Ÿç®¡ç†ï¼Œæ²¡æœ‰ç±»ä¼¼äºè™šæ‹Ÿå†…å­˜è¿™æ ·çš„åˆ†å¸ƒ<br>2. ä¸æ˜¯<br>3. LRUå›æ”¶çš„æ˜¯ç¼“å­˜ï¼ŒSwapæ¢å‡ºçš„æ˜¯ä¸å¯å›æ”¶çš„å†…å­˜ï¼Œæ¯”å¦‚è¿›ç¨‹çš„å †å†…å­˜</p>
                                <p class="reply-time">2018-12-26 22:59</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/e6/3b/cb2db23b.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Dr. ZZZ</span>
                            </div>
                            <div class="bd">è€å¸ˆï¼Œå…³äºbufferæ˜¯å¯¹ç›´æ¥å†™ç£ç›˜çš„ç¼“å­˜ï¼Œæˆ‘æƒ³é—®ä¸‹ã€‚ç°å®ä¸­æœ‰å“ªäº›æ˜¯ç›´æ¥å†™ç£ç›˜çš„åœºæ™¯ã€‚å†™è¯»å†™æ–‡ä»¶ä¸ä¹Ÿæœ€ç»ˆæ˜¯å†™åˆ°ç£ç›˜ä¸Šå—ï¼Ÿè°¢è°¢ <br></div>
                            <span class="time">2019-01-01 00:02</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">è…¾è¾¾</span>
                            </div>
                            <div class="bd">$ dd if=&#47;tmp&#47;file of=&#47;dev&#47;null  ä¸ºä»€ä¹ˆå¾ˆå¿«å°±ç»“æŸäº†ï¼Ÿå¯¼è‡´vmstatå€¼å˜åŒ–ä¸å¤§ <br></div>
                            <span class="time">2018-12-26 21:06</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">æ¸…ç¼“å­˜äº†å—ï¼Ÿ</p>
                                <p class="reply-time">2018-12-26 21:55</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/f8/70/f3a33a14.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æŸã€äºº</span>
                            </div>
                            <div class="bd">è€å¸ˆ,æ˜¯å¦ç»•å¼€æ–‡ä»¶ç³»ç»Ÿ,ç›´æ¥å¯¹ç£ç›˜è¿›è¡Œè¯»å†™ä¼šæ›´å¿«å‘¢ï¼Ÿ <br></div>
                            <span class="time">2018-12-26 20:52</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å»æ‰ç¼“å­˜çš„è¯ï¼Œæ–‡ä»¶ç³»ç»Ÿæ¯”ç£ç›˜åˆå¤šäº†ä¸€å±‚ï¼Œæ‰€ä»¥æœ‰å¯èƒ½æ¯”ç›´æ¥ç£ç›˜è¯»å†™æ…¢ã€‚ä½†æ–‡ä»¶ç³»ç»Ÿä¹Ÿæœ‰ç¼“å­˜ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¸ç»•å¼€ä¼šæ›´å¿«</p>
                                <p class="reply-time">2018-12-26 22:00</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/da/ec/779c1a78.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å¾€äº‹éšé£ï¼Œé¡ºå…¶è‡ªç„¶</span>
                            </div>
                            <div class="bd"># é¦–å…ˆæ¸…ç†ç¼“å­˜<br>$ echo 3 &gt; &#47;proc&#47;sys&#47;vm&#47;drop_caches<br># ç„¶åè¿è¡Œ dd å‘½ä»¤å‘ç£ç›˜åˆ†åŒº &#47;dev&#47;sdb1 å†™å…¥ 2G æ•°æ®<br>$ dd if=&#47;dev&#47;urandom of=&#47;dev&#47;sdb1 bs=1M count=2048<br>ã€<br>è¿™ä¸ªæµ‹è¯•ï¼Œåœ¨centosä¸‹æ˜¯cacheæ¯”bufferå¢é•¿çš„å¿«ï¼Œå’Œä½ è¯´ubä¸‹æ­£å¥½ç›¸åï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ<br>procs -----------memory---------- ---swap-- -----io---- --system-- -----cpu-----<br> r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st<br> 2  0  34840 213268    172 193516    0    0     0     0  952   94  0 23 77  0  0	<br> 1  0  34840 209176    172 197624    0    0     0     0 1044   92  0 24 76  0  0	<br> 1  0  34840 204092    172 202740    0    0     0     0 1042   97  0 24 76  0  0	<br> 1  0  34840 200000    180 206848    0    0     0    32 1056   97  0 25 75  0  0	<br> 1  0  34840 194792    180 211836    0    0     0     0 1060   87  0 25 75  0  0	<br> 1  0  34840 190700    180 216068    0    0     0     0 1006   96  0 24 76  0  0	<br> 1  0  34840 188716    180 218092    0    0     0     0  933   93  0 23 77  0  0	<br> 1  0  34840 184624    180 222212    0    0     0     0 1057   94  0 25 75  0  0	<br> 1  0  34840 179540    180 227196    0    0     0     0 1082  100  0 25 75  0  0	<br> 1  0  34840 175448    180 231428    0    0     0     0 1053   94  0 25 75  0  0	<br> 1  0  34840 170240    180 236412    0    0     0     0 1066   92  0 25 75  0  0	<br> 1  0  34840 166148    180 240644    0    0     0     0 1055   92  0 25 75  0  0	<br> 1  0  34840 164164    180 242668    0    0     0     0 1021  110  0 24 76  0  0	<br> 1  0  34840 158956    180 247812    0    0     0     0 1041   86  0 25 75  0  0	<br> 1  0  34840 154864    180 251908    0    0     0     0 1071   94  0 25 75  0  0 <br></div>
                            <span class="time">2018-12-26 12:24</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ç³»ç»Ÿä»€ä¹ˆç‰ˆæœ¬ï¼Ÿæ˜¯ä¸æ˜¯æ¯”è¾ƒè€ï¼Ÿ</p>
                                <p class="reply-time">2018-12-26 22:54</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/7c/59/26b1e65a.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">ç§‘å­¦Jia</span>
                            </div>
                            <div class="bd">è€å¸ˆï¼Œå¥³åŒå­¦æˆ‘ä»Šå¤©ä¸Šç­æ—¶é—´ç»ˆäºè¿½åˆ°è¿™é‡Œäº†ã€‚å†™çš„çœŸçœŸæ¸…æ¥šï¼Œæƒ³çŸ¥é“æ‚¨èŠ±äº†å¤šå°‘æ—¶é—´å­¦è¿™äº›? <br></div>
                            <span class="time">2018-12-26 11:26</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ä¹ŸèŠ±äº†æŒºå¤šæ—¶é—´ï¼Œæœ‰äº›åŸºç¡€çš„åŸç†åœ¨å­¦æ ¡å°±å­¦è¿‡äº†ï¼Œä¹Ÿæœ‰å¾ˆå¤šæ˜¯å®è·µä¸­å­¦åˆ°çš„ç»éªŒ</p>
                                <p class="reply-time">2018-12-26 23:21</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/42/f7/45fd5e3b.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Cå®¶æ—çš„é“ç²‰å„¿</span>
                            </div>
                            <div class="bd">å¦å¤–ï¼ŒLinuxé‡Œçš„å—è®¾å¤‡ï¼Œå¯ä»¥ç›´æ¥è®¿é—®(æ¯”å¦‚æ•°æ®åº“åº”ç”¨ç¨‹åº)ï¼Œä¹Ÿå¯ä»¥å­˜å‚¨æ–‡ä»¶ç³»ç»Ÿç„¶åè¢«è®¿é—®å§ã€‚ <br></div>
                            <span class="time">2018-12-26 08:45</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">æ˜¯çš„ğŸ‘</p>
                                <p class="reply-time">2018-12-26 23:59</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/14/14/2e/400913b1.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">é‡‘æ³¢</span>
                            </div>
                            <div class="bd">è¯·é—®&#47;tmp&#47;file æ˜¯ç£ç›˜ä¸‹çš„ä¸€ä¸ªæ–‡ä»¶å—ï¼Ÿ æ²¡è¯¦ç»†è¯´æ˜ï¼Œå¯èƒ½æ˜¯å†…å­˜æ–‡ä»¶ç³»ç»Ÿã€‚ç£ç›˜ä¸‹å’Œtmpfsçš„è¯»å¯¹Cacheæ˜¯å¦ä¸€æ ·ï¼Ÿ <br></div>
                            <span class="time">2018-12-26 05:29</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">&#47;tmp&#47;file æ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶ï¼Œç¡®åˆ‡çš„è¯´æ˜¯æ–‡ä»¶ç³»ç»Ÿç®¡ç†çš„æ–‡ä»¶ï¼Œè€Œæ²¡æœ‰ç£ç›˜ä¸‹çš„å“ªä¸ªæ–‡ä»¶è¿™ä¸€è¯´ã€‚ç•¥è¿‡æ–‡ä»¶ç³»ç»Ÿä¹‹ååˆ°äº†ç£ç›˜å°±éƒ½æ˜¯Blockäº†</p>
                                <p class="reply-time">2018-12-27 00:10</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/ae/95/d1b13c9e.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">f</span>
                            </div>
                            <div class="bd">æ‰“å¡ <br></div>
                            <span class="time">2019-01-10 09:57</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">dexter</span>
                            </div>
                            <div class="bd">æˆ‘æ˜¯6.10çš„centos ï¼ˆ3.10.5-3.el6.x86_64ï¼‰ï¼Œä½†æ˜¯man procé‡Œé¢æŸ¥æ‰¾meminfoï¼Œåªæ˜¾ç¤ºä»¥ä¸‹å†…å®¹ï¼š<br> &#47;proc&#47;meminfo<br>              This file reports statistics about memory usage on the system.  It is used by free(1) to report the amount of free and used memory  (both<br>              physical and swap) on the system as well as the shared memory and buffers used by the kernel.<br><br>       &#47;proc&#47;modules<br> <br></div>
                            <span class="time">2019-01-06 14:21</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å¦‚æœ</span>
                            </div>
                            <div class="bd">DAY16,æ‰“å¡ <br></div>
                            <span class="time">2019-01-06 12:29</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/da/6a/91bd13de.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å¼ æŒº</span>
                            </div>
                            <div class="bd">æ‚¨å¥½ï¼Œæ€è€ƒé¢˜é‡Œçš„è®¡ç®—æ‰€æœ‰è¿›ç¨‹çš„ç‰©ç†å†…å­˜ä½¿ç”¨é‡ï¼Œæ˜¯æŠŠ&#47;proc&#47;1&#47;smapsä¸‹çš„Rsså€¼ç›¸åŠ å—ï¼Ÿ <br></div>
                            <span class="time">2019-01-05 22:52</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/35/25/e5aeecc7.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å¥½å¥½å­¦ä¹ </span>
                            </div>
                            <div class="bd"># é¦–å…ˆæ¸…ç†ç¼“å­˜<br>$ echo 3 &gt; &#47;proc&#47;sys&#47;vm&#47;drop_caches<br># ç„¶åè¿è¡Œ dd å‘½ä»¤å‘ç£ç›˜åˆ†åŒº &#47;dev&#47;sdb1 å†™å…¥ 2G æ•°æ®<br>$ dd if=&#47;dev&#47;urandom of=&#47;dev&#47;sdb1 bs=1M count=2048<br>æ²¡æ³¨æ„ç£ç›˜å†™åäº† <br></div>
                            <span class="time">2019-01-04 23:51</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/5a/56/115c6433.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">jssfy</span>
                            </div>
                            <div class="bd">æ–‡ä¸­æåˆ°linuxå—çš„å¤§å°æ˜¯1KBï¼Œè¯·é—®è¿™ä¸ªå¦‚ä½•æŸ¥è¯ï¼Ÿ <br></div>
                            <span class="time">2019-01-04 09:37</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">è¿™æ˜¯vmstatæ–‡æ¡£ä¸­çš„</p>
                                <p class="reply-time">2019-01-12 10:11</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/b7/00/12149f4e.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">éƒ­åˆš</span>
                            </div>
                            <div class="bd">æ–‡ä¸­å› ä¸º Linux ä¸­å—çš„å¤§å°æ˜¯ 1KBã€‚è€å¸ˆï¼Œå—ä¸æ˜¯é»˜è®¤æ˜¯4Kå—ï¼Ÿ <br></div>
                            <span class="time">2018-12-29 09:08</span>
                            
                        </div>
                    </li>
                    


                </ul>
            </div>
        </div>
    </div>
</div>
</body>
</html>