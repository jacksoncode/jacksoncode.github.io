<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover">
    <meta name="format-detection" content="telephone=no">
    <style type="text/css">

#watermark {

  position: relative;
  overflow: hidden;
}

#watermark .x {
  position: absolute;
  top: 800;
  left: 400;
  color: #3300ff;
  font-size: 50px;
  pointer-events: none;
  opacity:0.3;
  filter:Alpha(opacity=50);
  -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
}
    </style>


    <style type="text/css">
 html{color:#333;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;text-rendering:optimizelegibility;font-family:Helvetica Neue,PingFang SC,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif}html.borderbox *,html.borderbox :after,html.borderbox :before{box-sizing:border-box}article,aside,blockquote,body,button,code,dd,details,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hr,input,legend,li,menu,nav,ol,p,pre,section,td,textarea,th,ul{margin:0;padding:0}article,aside,details,figcaption,figure,footer,header,menu,nav,section{display:block}audio,canvas,video{display:inline-block}body,button,input,select,textarea{font:300 1em/1.8 PingFang SC,Lantinghei SC,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,Helvetica,sans-serif}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}blockquote{position:relative;color:#999;font-weight:400;border-left:1px solid #1abc9c;padding-left:1em;margin:1em 3em 1em 2em}@media only screen and (max-width:640px){blockquote{margin:1em 0}}abbr,acronym{border-bottom:1px dotted;font-variant:normal}abbr{cursor:help}del{text-decoration:line-through}address,caption,cite,code,dfn,em,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}q:after,q:before{content:""}sub,sup{font-size:75%;line-height:0;position:relative}:root sub,:root sup{vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}a{color:#1abc9c}a:hover{text-decoration:underline}.typo a{border-bottom:1px solid #1abc9c}.typo a:hover{border-bottom-color:#555;color:#555}.typo a:hover,a,ins{text-decoration:none}.typo-u,u{text-decoration:underline}mark{background:#fffdd1;border-bottom:1px solid #ffedce;padding:2px;margin:0 5px}code,pre,pre tt{font-family:Courier,Courier New,monospace}pre{background:hsla(0,0%,97%,.7);border:1px solid #ddd;padding:1em 1.5em;display:block;-webkit-overflow-scrolling:touch}hr{border:none;border-bottom:1px solid #cfcfcf;margin-bottom:.8em;height:10px}.typo-small,figcaption,small{font-size:.9em;color:#888}b,strong{font-weight:700;color:#000}[draggable]{cursor:move}.clearfix:after,.clearfix:before{content:"";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.textwrap,.textwrap td,.textwrap th{word-wrap:break-word;word-break:break-all}.textwrap-table{table-layout:fixed}.serif{font-family:Palatino,Optima,Georgia,serif}.typo-dl,.typo-form,.typo-hr,.typo-ol,.typo-p,.typo-pre,.typo-table,.typo-ul,.typo dl,.typo form,.typo hr,.typo ol,.typo p,.typo pre,.typo table,.typo ul,blockquote{margin-bottom:1rem}h1,h2,h3,h4,h5,h6{font-family:PingFang SC,Helvetica Neue,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#000;line-height:1.35}.typo-h1,.typo-h2,.typo-h3,.typo-h4,.typo-h5,.typo-h6,.typo h1,.typo h2,.typo h3,.typo h4,.typo h5,.typo h6{margin-top:1.2em;margin-bottom:.6em;line-height:1.35}.typo-h1,.typo h1{font-size:2em}.typo-h2,.typo h2{font-size:1.8em}.typo-h3,.typo h3{font-size:1.6em}.typo-h4,.typo h4{font-size:1.4em}.typo-h5,.typo-h6,.typo h5,.typo h6{font-size:1.2em}.typo-ul,.typo ul{margin-left:1.3em;list-style:disc}.typo-ol,.typo ol{list-style:decimal;margin-left:1.9em}.typo-ol ol,.typo-ol ul,.typo-ul ol,.typo-ul ul,.typo li ol,.typo li ul{margin-bottom:.8em;margin-left:2em}.typo-ol ul,.typo-ul ul,.typo li ul{list-style:circle}.typo-table td,.typo-table th,.typo table caption,.typo table td,.typo table th{border:1px solid #ddd;padding:.5em 1em;color:#666}.typo-table th,.typo table th{background:#fbfbfb}.typo-table thead th,.typo table thead th{background:hsla(0,0%,95%,.7)}.typo table caption{border-bottom:none}.typo-input,.typo-textarea{-webkit-appearance:none;border-radius:0}.typo-em,.typo em,caption,legend{color:#000;font-weight:inherit}.typo-em{position:relative}.typo-em:after{position:absolute;top:.65em;left:0;width:100%;overflow:hidden;white-space:nowrap;content:"\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"}.typo img{max-width:100%}.common-content{font-weight:400;color:#353535;line-height:1.75rem;white-space:normal;word-break:normal;font-size:1rem}.common-content img{display:block;max-width:100%;background-color:#eee}.common-content audio,.common-content video{width:100%;background-color:#eee}.common-content center,.common-content font{margin-top:1rem;display:inline-block}.common-content center{width:100%}.common-content pre{margin-top:1rem;padding-left:0;padding-right:0;position:relative;overflow:hidden}.common-content pre code{font-size:.8rem;font-family:Consolas,Liberation Mono,Menlo,monospace,Courier;display:block;width:100%;box-sizing:border-box;padding-left:1rem;padding-right:1rem;overflow-x:auto}.common-content hr{border:none;margin-top:1.5rem;margin-bottom:1.5rem;border-top:1px solid #f5f5f5;height:1px;background:none}.common-content b,.common-content h1,.common-content h2,.common-content h3,.common-content h4,.common-content h5,.common-content strong{font-weight:700}.common-content h1,.common-content h2{font-size:1.125rem;margin-bottom:.45rem}.common-content h3,.common-content h4,.common-content h5{font-size:1rem;margin-bottom:.45rem}.common-content p{font-weight:400;color:#353535;margin-top:.15rem}.common-content .orange{color:#ff5a05}.common-content .reference{font-size:1rem;color:#888}.custom-rich-content h1{margin-top:0;font-weight:400;font-size:15.25px;border-bottom:1px solid #eee;line-height:2.8}.custom-rich-content li,.custom-rich-content p{font-size:14px;color:#888;line-height:1.6}table.hljs-ln{margin-bottom:0;border-spacing:0;border-collapse:collapse}table.hljs-ln,table.hljs-ln tbody,table.hljs-ln td,table.hljs-ln tr{box-sizing:border-box}table.hljs-ln td{padding:0;border:0}table.hljs-ln td.hljs-ln-numbers{min-width:15px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;cursor:pointer;user-select:none}table.hljs-ln td.hljs-ln-code,table.hljs-ln td.hljs-ln-numbers{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;line-height:20px;vertical-align:top}table.hljs-ln td.hljs-ln-code{position:relative;padding-right:10px;padding-left:10px;overflow:visible;color:#24292e;word-wrap:normal;white-space:pre}video::-webkit-media-controls{overflow:hidden!important}video::-webkit-media-controls-enclosure{width:calc(100% + 32px);margin-left:auto}.button-cancel{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel,.button-primary{-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary{color:#fff;background-color:#ff5a05;border-radius:3px}@font-face{font-family:iconfont;src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot);src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.woff) format("woff"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.ttf) format("truetype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.svg#iconfont) format("svg")}@font-face{font-family:player-font;src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot);src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.woff) format("woff"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.ttf) format("truetype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.svg#player-font) format("svg")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-webkit-text-stroke-width:.2px;-moz-osx-font-smoothing:grayscale}html{background:#fff;min-height:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{width:100%}body.fixed{overflow:hidden;position:fixed;width:100vw;height:100vh}i{font-style:normal}a{word-wrap:break-word;-webkit-tap-highlight-color:rgba(0,0,0,0)}a:hover{text-decoration:none}.fade-enter-active,.fade-leave-active{transition:opacity .3s}.fade-enter,.fade-leave-to{opacity:0}.MathJax,.MathJax_CHTML,.MathJax_MathContainer,.MathJax_MathML,.MathJax_PHTML,.MathJax_PlainSource,.MathJax_SVG{outline:0}.ios-app-switch .js-audit{display:none}._loading_wrap_{position:fixed;width:100vw;height:100vh;top:50%;left:50%;transform:translate(-50%,-50%);z-index:999}._loading_div_class_,._loading_wrap_{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}._loading_div_class_{word-wrap:break-word;padding:.5rem .75rem;text-align:center;z-index:9999;font-size:.6rem;max-width:60%;color:#fff;border-radius:.25rem;-ms-flex-direction:column;flex-direction:column}._loading_div_class_ .message{color:#353535;font-size:16px;line-height:3}.spinner{animation:circle-rotator 1.4s linear infinite}.spinner *{line-height:0;box-sizing:border-box}@keyframes circle-rotator{0%{transform:rotate(0deg)}to{transform:rotate(270deg)}}.path{stroke-dasharray:187;stroke-dashoffset:0;transform-origin:center;animation:circle-dash 1.4s ease-in-out infinite,circle-colors 5.6s ease-in-out infinite}@keyframes circle-colors{0%{stroke:#ff5a05}to{stroke:#ff5a05}}@keyframes circle-dash{0%{stroke-dashoffset:187}50%{stroke-dashoffset:46.75;transform:rotate(135deg)}to{stroke-dashoffset:187;transform:rotate(450deg)}}.confirm-box-wrapper,.confirm-box-wrapper .mask{position:absolute;top:0;left:0;right:0;bottom:0}.confirm-box-wrapper .mask{background:rgba(0,0,0,.6)}.confirm-box-wrapper .confirm-box{position:fixed;top:50%;left:50%;width:267px;background:#fff;transform:translate(-50%,-50%);border-radius:7px}.confirm-box-wrapper .confirm-box .head{margin:0 18px;font-size:18px;text-align:center;line-height:65px;border-bottom:1px solid #d9d9d9}.confirm-box-wrapper .confirm-box .body{padding:18px;padding-bottom:0;color:#353535;font-size:12.5px;max-height:150px;overflow:auto}.confirm-box-wrapper .confirm-box .foot{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding:18px}.confirm-box-wrapper .confirm-box .foot .button-cancel{border:1px solid #d9d9d9}.hljs{display:block;overflow-x:auto;padding:.5em;color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}




    </style>
    <style type="text/css">
        .button-cancel[data-v-87ffcada]{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel[data-v-87ffcada],.button-primary[data-v-87ffcada]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary[data-v-87ffcada]{color:#fff;background-color:#ff5a05;border-radius:3px}.pd[data-v-87ffcada]{padding-left:1.375rem;padding-right:1.375rem}.article[data-v-87ffcada]{max-width:70rem;margin:0 auto}.article .article-unavailable[data-v-87ffcada]{color:#fa8919;font-size:15px;font-weight:600;line-height:24px;border-radius:5px;padding:12px;background-color:#f6f7fb;margin-top:20px}.article .article-unavailable .iconfont[data-v-87ffcada]{font-size:12px}.article .main[data-v-87ffcada]{padding:1.25rem 0;margin-bottom:52px}.article-title[data-v-87ffcada]{color:#353535;font-weight:400;line-height:1.65rem;font-size:1.34375rem}.article-info[data-v-87ffcada]{color:#888;font-size:.9375rem;margin-top:1.0625rem}.article-content[data-v-87ffcada]{margin-top:1.0625rem}.article-content.android video[data-v-87ffcada]::-webkit-media-controls-fullscreen-button{display:none}.copyright[data-v-87ffcada]{color:#b2b2b2;padding-bottom:20px;margin-top:20px;font-size:13px}.audio-player[data-v-87ffcada]{width:100%;margin:20px 0}.to-comment[data-v-87ffcada]{overflow:hidden;padding-top:10px;margin-bottom:-30px}.to-comment a.button-primary[data-v-87ffcada]{float:right;height:20px;font-size:12px;line-height:20px;padding:4px 8px;cursor:pointer}.article-comments[data-v-87ffcada]{margin-top:2rem}.article-comments h2[data-v-87ffcada]{text-align:center;color:#888;position:relative;z-index:1;margin-bottom:1rem}.article-comments h2[data-v-87ffcada]:before{border-top:1px dotted #888;content:"";position:absolute;top:56%;left:0;width:100%;z-index:-1}.article-comments h2 span[data-v-87ffcada]{font-size:15.25px;font-weight:400;padding:0 1rem;background:#fff;display:inline-block}.article-sub-bottom[data-v-87ffcada]{z-index:10;cursor:pointer}.switch-btns[data-v-87ffcada]{height:76px;cursor:pointer;padding-top:24px;padding-bottom:24px;border-bottom:10px solid #f6f7fb;position:relative}.switch-btns[data-v-87ffcada]:before{content:" ";height:1px;background:#e8e8e8;position:absolute;top:0;left:0;-webkit-box-sizing:border-box;box-sizing:border-box;left:1.375rem;right:1.375rem}.switch-btns .btn[data-v-87ffcada]{height:38px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.switch-btns .btn .tag[data-v-87ffcada]{-webkit-box-flex:0;-ms-flex:0 0 62px;flex:0 0 62px;text-align:center;color:#888;font-size:14px;border-radius:10px;height:22px;line-height:22px;background:#f6f7fb;font-weight:400}.switch-btns .btn .txt[data-v-87ffcada]{margin-left:10px;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;color:#888;font-size:15px;height:22px;line-height:22px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:400}@media (max-width:769px){.article .breadcrumb[data-v-87ffcada]{padding-top:10px;padding-bottom:10px}}





    </style>

    <style type="text/css">
        .comment-item{list-style-position:inside;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-bottom:1rem}.comment-item a{border-bottom:none}.comment-item .avatar{width:2.625rem;height:2.625rem;-ms-flex-negative:0;flex-shrink:0;border-radius:50%}.comment-item .info{margin-left:.5rem;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.comment-item .info .hd{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .username{color:#888;font-size:15.25px;font-weight:400;line-height:1.2}.comment-item .info .hd .control{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .control .btn-share{color:#888;font-size:.75rem;margin-right:1rem}.comment-item .info .hd .control .btn-praise{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:15.25px;text-decoration:none}.comment-item .info .hd .control .btn-praise i{color:#888;display:inline-block;font-size:.75rem;margin-right:.3rem;margin-top:-.01rem}.comment-item .info .hd .control .btn-praise i.on,.comment-item .info .hd .control .btn-praise span{color:#ff5a05}.comment-item .info .bd{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6}.comment-item .info .time{color:#888;font-size:9px;line-height:1}.comment-item .info .reply .reply-hd{font-size:15.25px}.comment-item .info .reply .reply-hd span{margin-left:-12px;color:#888;font-weight:400}.comment-item .info .reply .reply-hd i{color:#ff5a05;font-size:15.25px}.comment-item .info .reply .reply-content{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all}.comment-item .info .reply .reply-time{color:#888;font-size:9px}




    </style>
</head>
<body>
<div id="app">


    <div data-v-87ffcada="" class="article" id="watermark">
        <p class="x">æ›´å¤šè¯¾ç¨‹è¯·åŠ QQç¾¤170701297</p>
        <div data-v-87ffcada="" class="main main-app">
            <h1 data-v-87ffcada="" class="article-title pd">
                14è®²Linuxæ€§èƒ½ä¼˜åŒ–ç­”ç–‘ï¼ˆäºŒï¼‰
            </h1>
            <div data-v-87ffcada="" class="article-content typo common-content pd"><img data-v-87ffcada=""
                                                                                        src="https://static001.geekbang.org/resource/image/20/bb/205728ffe6e9b8bdc28f802d9f608cbb.jpg">


                <div data-v-87ffcada="" id="article-content" class="">
                    <div class="text">
                        <p>ä½ å¥½ï¼Œæˆ‘æ˜¯å€ªæœ‹é£ã€‚</p><p>ä»Šå¤©æ˜¯æˆ‘ä»¬ç¬¬äºŒæœŸç­”ç–‘ï¼Œè¿™æœŸç­”ç–‘çš„ä¸»é¢˜æ˜¯æˆ‘ä»¬å¤šæ¬¡ç”¨åˆ°çš„perfå·¥å…·ï¼Œå†…å®¹ä¸»è¦åŒ…æ‹¬å‰é¢æ¡ˆä¾‹ä¸­ï¼Œ perf ä½¿ç”¨æ–¹æ³•çš„å„ç§ç–‘é—®ã€‚</p><p>perf åœ¨æ€§èƒ½åˆ†æä¸­éå¸¸æœ‰æ•ˆï¼Œæ˜¯æˆ‘ä»¬æ¯ä¸ªäººéƒ½éœ€è¦æŒæ¡çš„æ ¸å¿ƒå·¥å…·ã€‚perf çš„ä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆä¸°å¯Œï¼Œä¸è¿‡ä¸ç”¨æ‹…å¿ƒï¼Œç›®å‰ä½ åªè¦ä¼šç”¨ perf record å’Œ perf report å°±å¤Ÿäº†ã€‚è€Œå¯¹äº perf æ˜¾ç¤ºçš„è°ƒç”¨æ ˆä¸­çš„æŸäº›å†…æ ¸ç¬¦å·ï¼Œå¦‚æœä½ ä¸ç†è§£ä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œå¯ä»¥æš‚æ—¶è·³è¿‡ï¼Œå¹¶ä¸å½±å“æˆ‘ä»¬çš„åˆ†æã€‚</p><p>åŒæ ·çš„ï¼Œä¸ºäº†ä¾¿äºä½ å­¦ä¹ ç†è§£ï¼Œå®ƒä»¬å¹¶ä¸æ˜¯ä¸¥æ ¼æŒ‰ç…§æ–‡ç« é¡ºåºæ’åˆ—çš„ï¼Œå¦‚æœä½ éœ€è¦å›é¡¾å†…å®¹åŸæ–‡ï¼Œå¯ä»¥æ‰«ææ¯ä¸ªé—®é¢˜å³ä¸‹æ–¹çš„äºŒç»´ç æŸ¥çœ‹ã€‚</p><h2>é—®é¢˜ 1ï¼š ä½¿ç”¨ perf å·¥å…·æ—¶ï¼Œçœ‹åˆ°çš„æ˜¯16è¿›åˆ¶åœ°å€è€Œä¸æ˜¯å‡½æ•°å</h2><p><img src="https://static001.geekbang.org/resource/image/94/69/94f67501d5be157a25a26d852b8c2869.png" alt=""></p><p>è¿™ä¹Ÿæ˜¯ç•™è¨€æ¯”è¾ƒå¤šçš„ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨ CentOS ç³»ç»Ÿä¸­ï¼Œä½¿ç”¨ perf å·¥å…·çœ‹ä¸åˆ°å‡½æ•°åï¼Œåªèƒ½çœ‹åˆ°ä¸€äº›16è¿›åˆ¶æ ¼å¼çš„å‡½æ•°åœ°å€ã€‚</p><p>å…¶å®ï¼Œåªè¦ä½ è§‚å¯Ÿä¸€ä¸‹perfç•Œé¢æœ€ä¸‹é¢çš„é‚£ä¸€è¡Œï¼Œå°±ä¼šå‘ç°ä¸€ä¸ªè­¦å‘Šä¿¡æ¯ï¼š</p><pre><code>Failed to open /opt/bitnami/php/lib/php/extensions/opcache.so, continuing without symbols
</code></pre><p>è¿™è¯´æ˜ï¼Œperf æ‰¾ä¸åˆ°å¾…åˆ†æè¿›ç¨‹ä¾èµ–çš„åº“ã€‚å½“ç„¶ï¼Œå®é™…ä¸Šè¿™ä¸ªæ¡ˆä¾‹ä¸­æœ‰å¾ˆå¤šä¾èµ–åº“éƒ½æ‰¾ä¸åˆ°ï¼Œåªä¸è¿‡ï¼Œperfå·¥å…·æœ¬èº«åªåœ¨æœ€åä¸€è¡Œæ˜¾ç¤ºè­¦å‘Šä¿¡æ¯ï¼Œæ‰€ä»¥ä½ åªèƒ½çœ‹åˆ°è¿™ä¸€æ¡è­¦å‘Šã€‚</p><p>è¿™ä¸ªé—®é¢˜ï¼Œå…¶å®ä¹Ÿæ˜¯åœ¨åˆ†æDockerå®¹å™¨åº”ç”¨æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸ç¢°åˆ°çš„ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºå®¹å™¨åº”ç”¨ä¾èµ–çš„åº“éƒ½åœ¨é•œåƒé‡Œé¢ã€‚</p><!-- [[[read_end]]] --><p>é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘æ€»ç»“äº†ä¸‹é¢<strong>å››ä¸ªè§£å†³æ–¹æ³•</strong>ã€‚</p><p><strong>ç¬¬ä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨å®¹å™¨å¤–é¢æ„å»ºç›¸åŒè·¯å¾„çš„ä¾èµ–åº“</strong>ã€‚è¿™ç§æ–¹æ³•ä»åŸç†ä¸Šå¯è¡Œï¼Œä½†æ˜¯æˆ‘å¹¶ä¸æ¨èï¼Œä¸€æ–¹é¢æ˜¯å› ä¸ºæ‰¾å‡ºè¿™äº›ä¾èµ–åº“æ¯”è¾ƒéº»çƒ¦ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œæ„å»ºè¿™äº›è·¯å¾„ï¼Œä¼šæ±¡æŸ“å®¹å™¨ä¸»æœºçš„ç¯å¢ƒã€‚</p><p><strong>ç¬¬äºŒä¸ªæ–¹æ³•ï¼Œåœ¨å®¹å™¨å†…éƒ¨è¿è¡Œ perf</strong>ã€‚ä¸è¿‡ï¼Œè¿™éœ€è¦å®¹å™¨è¿è¡Œåœ¨ç‰¹æƒæ¨¡å¼ä¸‹ï¼Œä½†å®é™…çš„åº”ç”¨ç¨‹åºå¾€å¾€åªä»¥æ™®é€šå®¹å™¨çš„æ–¹å¼è¿è¡Œã€‚æ‰€ä»¥ï¼Œå®¹å™¨å†…éƒ¨ä¸€èˆ¬æ²¡æœ‰æƒé™æ‰§è¡Œ perf åˆ†æã€‚</p><p>æ¯”æ–¹è¯´ï¼Œå¦‚æœä½ åœ¨æ™®é€šå®¹å™¨å†…éƒ¨è¿è¡Œ perf record ï¼Œä½ å°†ä¼šçœ‹åˆ°ä¸‹é¢è¿™ä¸ªé”™è¯¯æç¤ºï¼š</p><pre><code>$ perf_4.9 record -a -g
perf_event_open(..., PERF_FLAG_FD_CLOEXEC) failed with unexpected error 1 (Operation not permitted)
perf_event_open(..., 0) failed unexpectedly with error 1 (Operation not permitted)
</code></pre><p>å½“ç„¶ï¼Œå…¶å®ä½ è¿˜å¯ä»¥é€šè¿‡é…ç½® /proc/sys/kernel/perf_event_paranoid ï¼ˆæ¯”å¦‚æ”¹æˆ-1ï¼‰ï¼Œæ¥å…è®¸éç‰¹æƒç”¨æˆ·æ‰§è¡Œ perf äº‹ä»¶åˆ†æã€‚</p><p>ä¸è¿‡è¿˜æ˜¯é‚£å¥è¯ï¼Œä¸ºäº†å®‰å…¨èµ·è§ï¼Œè¿™ç§æ–¹æ³•æˆ‘ä¹Ÿä¸æ¨èã€‚</p><p><strong>ç¬¬ä¸‰ä¸ªæ–¹æ³•ï¼ŒæŒ‡å®šç¬¦å·è·¯å¾„ä¸ºå®¹å™¨æ–‡ä»¶ç³»ç»Ÿçš„è·¯å¾„</strong>ã€‚æ¯”å¦‚å¯¹äºç¬¬05è®²çš„åº”ç”¨ï¼Œä½ å¯ä»¥æ‰§è¡Œä¸‹é¢è¿™ä¸ªå‘½ä»¤ï¼š</p><pre><code>$ mkdir /tmp/foo
$ PID=$(docker inspect --format {{.State.Pid}} phpfpm)
$ bindfs /proc/$PID/root /tmp/foo
$ perf report --symfs /tmp/foo

# ä½¿ç”¨å®Œæˆåä¸è¦å¿˜è®°è§£é™¤ç»‘å®š
$ umount /tmp/foo/
</code></pre><p>ä¸è¿‡è¿™é‡Œè¦æ³¨æ„ï¼Œbindfs è¿™ä¸ªå·¥å…·éœ€è¦ä½ é¢å¤–å®‰è£…ã€‚bindfs çš„åŸºæœ¬åŠŸèƒ½æ˜¯å®ç°ç›®å½•ç»‘å®šï¼ˆç±»ä¼¼äº mount --bindï¼‰ï¼Œè¿™é‡Œéœ€è¦ä½ å®‰è£…çš„æ˜¯ 1.13.10 ç‰ˆæœ¬ï¼ˆè¿™ä¹Ÿæ˜¯å®ƒçš„æœ€æ–°å‘å¸ƒç‰ˆï¼‰ã€‚</p><p>å¦‚æœä½ å®‰è£…çš„æ˜¯æ—§ç‰ˆæœ¬ï¼Œä½ å¯ä»¥åˆ° <a href="https://github.com/mpartel/bindfs">GitHub</a>ä¸Šé¢ä¸‹è½½æºç ï¼Œç„¶åç¼–è¯‘å®‰è£…ã€‚</p><p><strong>ç¬¬å››ä¸ªæ–¹æ³•ï¼Œåœ¨å®¹å™¨å¤–é¢æŠŠåˆ†æçºªå½•ä¿å­˜ä¸‹æ¥ï¼Œå†å»å®¹å™¨é‡ŒæŸ¥çœ‹ç»“æœ</strong>ã€‚è¿™æ ·ï¼Œåº“å’Œç¬¦å·çš„è·¯å¾„ä¹Ÿå°±éƒ½å¯¹äº†ã€‚</p><p>æ¯”å¦‚ï¼Œä½ å¯ä»¥è¿™ä¹ˆåšã€‚å…ˆè¿è¡Œ perf record -g -p &lt; pid&gt;ï¼Œæ‰§è¡Œä¸€ä¼šå„¿ï¼ˆæ¯”å¦‚15ç§’ï¼‰åï¼ŒæŒ‰Ctrl+Cåœæ­¢ã€‚</p><p>ç„¶åï¼ŒæŠŠç”Ÿæˆçš„ perf.data æ–‡ä»¶ï¼Œæ‹·è´åˆ°å®¹å™¨é‡Œé¢æ¥åˆ†æï¼š</p><pre><code>$ docker cp perf.data phpfpm:/tmp 
$ docker exec -i -t phpfpm bash
</code></pre><p>æ¥ä¸‹æ¥ï¼Œåœ¨å®¹å™¨çš„ bash ä¸­ç»§ç»­è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå®‰è£… perf å¹¶ä½¿ç”¨ perf report æŸ¥çœ‹æŠ¥å‘Šï¼š</p><pre><code>$ cd /tmp/ 
$ apt-get update &amp;&amp; apt-get install -y linux-tools linux-perf procps
$ perf_4.9 report
</code></pre><p>ä¸è¿‡ï¼Œè¿™é‡Œä¹Ÿæœ‰ä¸¤ç‚¹éœ€è¦ä½ æ³¨æ„ã€‚</p><p>é¦–å…ˆæ˜¯perfå·¥å…·çš„ç‰ˆæœ¬é—®é¢˜ã€‚åœ¨æœ€åä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬è¿è¡Œçš„å·¥å…·æ˜¯å®¹å™¨å†…éƒ¨å®‰è£…çš„ç‰ˆæœ¬ perf_4.9ï¼Œè€Œä¸æ˜¯æ™®é€šçš„ perf å‘½ä»¤ã€‚è¿™æ˜¯å› ä¸ºï¼Œ perf å‘½ä»¤å®é™…ä¸Šæ˜¯ä¸€ä¸ªè½¯è¿æ¥ï¼Œä¼šè·Ÿå†…æ ¸çš„ç‰ˆæœ¬è¿›è¡ŒåŒ¹é…ï¼Œä½†é•œåƒé‡Œå®‰è£…çš„perfç‰ˆæœ¬è·Ÿè™šæ‹Ÿæœºçš„å†…æ ¸ç‰ˆæœ¬æœ‰å¯èƒ½å¹¶ä¸ä¸€è‡´ã€‚</p><p>å¦å¤–ï¼Œphp-fpm é•œåƒæ˜¯åŸºäº Debian ç³»ç»Ÿçš„ï¼Œæ‰€ä»¥å®‰è£… perf å·¥å…·çš„å‘½ä»¤ï¼Œè·Ÿ Ubuntu ä¹Ÿå¹¶ä¸å®Œå…¨ä¸€æ ·ã€‚æ¯”å¦‚ï¼Œ Ubuntu ä¸Šçš„å®‰è£…æ–¹æ³•æ˜¯ä¸‹é¢è¿™æ ·ï¼š</p><pre><code>$ apt-get install -y linux-tools-common linux-tools-generic linux-tools-$(uname -r)ï¼‰
</code></pre><p>è€Œåœ¨ php-fpm å®¹å™¨é‡Œï¼Œä½ åº”è¯¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ¥å®‰è£… perfï¼š</p><pre><code>$ apt-get install -y linux-perf
</code></pre><p>å½“ä½ æŒ‰ç…§å‰é¢è¿™å‡ ç§æ–¹æ³•æ“ä½œåï¼Œä½ å°±å¯ä»¥åœ¨å®¹å™¨å†…éƒ¨çœ‹åˆ° sqrt çš„å †æ ˆï¼š</p><p><img src="https://static001.geekbang.org/resource/image/76/af/76f8d0f36210001e750b0a82026dedaf.png" alt=""></p><p>äº‹å®ä¸Šï¼ŒæŠ›å¼€æˆ‘ä»¬çš„æ¡ˆä¾‹æ¥è¯´ï¼Œå³ä½¿æ˜¯åœ¨éå®¹å™¨åŒ–çš„åº”ç”¨ä¸­ï¼Œä½ ä¹Ÿå¯èƒ½ä¼šç¢°åˆ°è¿™ä¸ªé—®é¢˜ã€‚å‡å¦‚ä½ çš„åº”ç”¨ç¨‹åºåœ¨ç¼–è¯‘æ—¶ï¼Œä½¿ç”¨ strip åˆ é™¤äº†ELFäºŒè¿›åˆ¶æ–‡ä»¶çš„ç¬¦å·è¡¨ï¼Œé‚£ä¹ˆä½ åŒæ ·ä¹Ÿåªèƒ½çœ‹åˆ°å‡½æ•°çš„åœ°å€ã€‚</p><p>ç°åœ¨çš„ç£ç›˜ç©ºé—´ï¼Œå…¶å®å·²ç»è¶³å¤Ÿå¤§äº†ã€‚ä¿ç•™è¿™äº›ç¬¦å·ï¼Œè™½ç„¶ä¼šå¯¼è‡´ç¼–è¯‘åçš„æ–‡ä»¶å˜å¤§ï¼Œä½†å¯¹æ•´ä¸ªç£ç›˜ç©ºé—´æ¥è¯´å·²ç»ä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜ã€‚æ‰€ä»¥ä¸ºäº†è°ƒè¯•çš„æ–¹ä¾¿ï¼Œå»ºè®®ä½ è¿˜æ˜¯æŠŠå®ƒä»¬ä¿ç•™ç€ã€‚</p><p>é¡ºä¾¿æä¸€ä¸‹ï¼Œæ¡ˆä¾‹ä¸­å„ç§å·¥å…·çš„å®‰è£…æ–¹æ³•ï¼Œå¯ä»¥ç®—æ˜¯æˆ‘ä»¬ä¸“æ å­¦ä¹ çš„åŸºæœ¬åŠŸï¼Œè¿™ä¸€ç‚¹å¸Œæœ›ä½ èƒ½å¤Ÿç†Ÿæ‚‰å¹¶æŒæ¡ã€‚è¿˜æ˜¯é‚£å¥è¯ï¼Œä¸ä¼šå®‰è£…å…ˆæŸ¥æ–‡æ¡£ï¼Œè¿˜æ˜¯ä¸è¡Œå°±ä¸Šç½‘æœç´¢æˆ–è€…åœ¨æ–‡ç« é‡Œç•™è¨€æé—®ã€‚</p><p>åœ¨è¿™é‡Œä¹Ÿè¦è¡¨æ‰¬ä¸€ä¸‹ï¼Œå¾ˆå¤šåŒå­¦å·²ç»æŠŠæ‘¸ç´¢åˆ°çš„æ–¹æ³•åˆ†äº«åˆ°äº†ç•™è¨€ä¸­ã€‚è®°å½•å¹¶åˆ†äº«ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¹ æƒ¯ã€‚</p><h2>é—®é¢˜ 2ï¼šå¦‚ä½•ç”¨perfå·¥å…·åˆ†æJavaç¨‹åº</h2><p><img src="https://static001.geekbang.org/resource/image/1e/dc/1eb200e2a68da9a00b2ee009f3de94dc.png" alt=""><img src="https://static001.geekbang.org/resource/image/97/6d/97f609aae409bd9840f606c1d9bc7e6d.jpg" alt=""></p><p>è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œå…¶å®æ˜¯ä¸Šä¸€ä¸ª perf é—®é¢˜çš„å»¶ä¼¸ã€‚ åƒæ˜¯Javaè¿™ç§é€šè¿‡ JVM æ¥è¿è¡Œçš„åº”ç”¨ç¨‹åºï¼Œè¿è¡Œå †æ ˆç”¨çš„éƒ½æ˜¯ JVM å†…ç½®çš„å‡½æ•°å’Œå †æ ˆç®¡ç†ã€‚æ‰€ä»¥ï¼Œä»ç³»ç»Ÿå±‚é¢ä½ åªèƒ½çœ‹åˆ°JVMçš„å‡½æ•°å †æ ˆï¼Œè€Œä¸èƒ½ç›´æ¥å¾—åˆ°Javaåº”ç”¨ç¨‹åºçš„å †æ ˆã€‚</p><p>perf_events å®é™…ä¸Šå·²ç»æ”¯æŒäº† JITï¼Œä½†è¿˜éœ€è¦ä¸€ä¸ª /tmp/perf-PID.mapæ–‡ä»¶ï¼Œæ¥è¿›è¡Œç¬¦å·ç¿»è¯‘ã€‚å½“ç„¶ï¼Œå¼€æºé¡¹ç›® <a href="https://github.com/jvm-profiling-tools/perf-map-agent">perf-map-agent </a>å¯ä»¥å¸®ä½ ç”Ÿæˆè¿™ä¸ªç¬¦å·è¡¨ã€‚</p><p>æ­¤å¤–ï¼Œä¸ºäº†ç”Ÿæˆå…¨éƒ¨è°ƒç”¨æ ˆï¼Œä½ è¿˜éœ€è¦å¼€å¯JDKçš„é€‰é¡¹ -XX:+PreserveFramePointerã€‚å› ä¸ºè¿™é‡Œæ¶‰åŠåˆ°å¤§é‡çš„ Java çŸ¥è¯†ï¼Œæˆ‘å°±ä¸å†è¯¦ç»†å±•å¼€äº†ã€‚å¦‚æœä½ çš„åº”ç”¨åˆšå¥½åŸºäº Java ï¼Œé‚£ä¹ˆä½ å¯ä»¥å‚è€ƒ NETFLIX çš„æŠ€æœ¯åšå®¢ <a href="https://medium.com/netflix-techblog/java-in-flames-e763b3d32166">Java in Flames</a> ï¼ˆé“¾æ¥ä¸ºhttps://medium.com/netflix-techblog/java-in-flames-e763b3d32166ï¼‰ï¼Œæ¥æŸ¥çœ‹è¯¦ç»†çš„ä½¿ç”¨æ­¥éª¤ã€‚</p><p>è¯´åˆ°è¿™é‡Œï¼Œæˆ‘ä¹Ÿæƒ³å¼ºè°ƒä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯å­¦ä¹ æ€§èƒ½ä¼˜åŒ–æ—¶ï¼Œä¸è¦ä¸€å¼€å§‹å°±æŠŠè‡ªå·±é™å®šåœ¨å…·ä½“çš„æŸä¸ªç¼–ç¨‹è¯­è¨€æˆ–è€…æ€§èƒ½å·¥å…·ä¸­ï¼Œçº ç»“äºè¯­è¨€æˆ–å·¥å…·çš„ç»†èŠ‚å‡ºä¸æ¥ã€‚</p><p>æŒæ¡æ•´ä½“çš„åˆ†ææ€è·¯ï¼Œæ‰æ˜¯æˆ‘ä»¬é¦–å…ˆè¦åšçš„ã€‚å› ä¸ºï¼Œæ€§èƒ½ä¼˜åŒ–çš„åŸç†å’Œæ€è·¯ï¼Œåœ¨ä»»ä½•ç¼–ç¨‹è¯­è¨€ä¸­éƒ½æ˜¯ç›¸é€šçš„ã€‚</p><h2>é—®é¢˜ 3ï¼šä¸ºä»€ä¹ˆ perf çš„æŠ¥å‘Šä¸­ï¼Œå¾ˆå¤šç¬¦å·éƒ½ä¸æ˜¾ç¤ºè°ƒç”¨æ ˆ</h2><p><img src="https://static001.geekbang.org/resource/image/49/05/4902af1ff4d710aa7cb150f44e3e3c05.png" alt=""></p><p>perf report æ˜¯ä¸€ä¸ªå¯è§†åŒ–å±•ç¤º perf.data çš„å·¥å…·ã€‚åœ¨ç¬¬ 08 è®²çš„æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ç›´æ¥ç»™å‡ºäº†æœ€ç»ˆç»“æœï¼Œå¹¶æ²¡æœ‰è¯¦ç»†ä»‹ç»å®ƒçš„å‚æ•°ã€‚ä¼°è®¡å¾ˆå¤šåŒå­¦çš„æœºå™¨åœ¨è¿è¡Œæ—¶ï¼Œéƒ½ç¢°åˆ°äº†è·Ÿè·¯è¿‡åŒå­¦ä¸€æ ·çš„é—®é¢˜ï¼Œçœ‹åˆ°çš„æ˜¯ä¸‹é¢è¿™ä¸ªç•Œé¢ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/33/e9/335d41ccf24d93aafe0e4d511218b6e9.png" alt=""></p><p>è¿™ä¸ªç•Œé¢å¯ä»¥æ¸…æ¥šçœ‹åˆ°ï¼Œperf report çš„è¾“å‡ºä¸­ï¼Œåªæœ‰ swapper æ˜¾ç¤ºäº†è°ƒç”¨æ ˆï¼Œå…¶ä»–æ‰€æœ‰ç¬¦å·éƒ½ä¸èƒ½æŸ¥çœ‹å †æ ˆæƒ…å†µï¼ŒåŒ…æ‹¬æˆ‘ä»¬æ¡ˆä¾‹ä¸­çš„ app åº”ç”¨ã€‚</p><p>è¿™ç§æƒ…å†µæˆ‘ä»¬ä»¥å‰ä¹Ÿé‡åˆ°è¿‡ï¼Œå½“ä½ å‘ç°æ€§èƒ½å·¥å…·çš„è¾“å‡ºæ— æ³•ç†è§£æ—¶ï¼Œåº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿå½“ç„¶è¿˜æ˜¯æŸ¥å·¥å…·çš„æ‰‹å†Œã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥æ‰§è¡Œ man perf-report å‘½ä»¤ï¼Œæ‰¾åˆ° -g å‚æ•°çš„è¯´æ˜ï¼š</p><pre><code>-g, --call-graph=&lt;print_type,threshold[,print_limit],order,sort_key[,branch],value&gt; 
           Display call chains using type, min percent threshold, print limit, call order, sort key, optional branch and value. Note that 
           ordering is not fixed so any parameter can be given in an arbitrary order. One exception is the print_limit which should be 
           preceded by threshold. 

               print_type can be either: 
               - flat: single column, linear exposure of call chains. 
               - graph: use a graph tree, displaying absolute overhead rates. (default) 
               - fractal: like graph, but displays relative rates. Each branch of 
                        the tree is considered as a new profiled object. 
               - folded: call chains are displayed in a line, separated by semicolons 
               - none: disable call chain display. 

               threshold is a percentage value which specifies a minimum percent to be 
               included in the output call graph.  Default is 0.5 (%). 

               print_limit is only applied when stdio interface is used.  It's to limit 
               number of call graph entries in a single hist entry.  Note that it needs 
               to be given after threshold (but not necessarily consecutive). 
               Default is 0 (unlimited). 

               order can be either: 
               - callee: callee based call graph. 
               - caller: inverted caller based call graph. 
               Default is 'caller' when --children is used, otherwise 'callee'. 

               sort_key can be: 
               - function: compare on functions (default) 
               - address: compare on individual code addresses 
               - srcline: compare on source filename and line number 

               branch can be: 
               - branch: include last branch information in callgraph when available. 
                         Usually more convenient to use --branch-history for this. 

               value can be: 
               - percent: diplay overhead percent (default) 
               - period: display event period 
               - count: display event count
</code></pre><p>é€šè¿‡è¿™ä¸ªè¯´æ˜å¯ä»¥çœ‹åˆ°ï¼Œ-g é€‰é¡¹ç­‰åŒäº --call-graphï¼Œå®ƒçš„å‚æ•°æ˜¯åé¢é‚£äº›è¢«é€—å·éš”å¼€çš„é€‰é¡¹ï¼Œæ„æ€åˆ†åˆ«æ˜¯è¾“å‡ºç±»å‹ã€æœ€å°é˜ˆå€¼ã€è¾“å‡ºé™åˆ¶ã€æ’åºæ–¹æ³•ã€æ’åºå…³é”®è¯ã€åˆ†æ”¯ä»¥åŠå€¼çš„ç±»å‹ã€‚</p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œé»˜è®¤çš„å‚æ•°æ˜¯ graph,0.5,caller,function,percentï¼Œå…·ä½“å«ä¹‰æ–‡æ¡£ä¸­éƒ½æœ‰è¯¦ç»†è®²è§£ï¼Œè¿™é‡Œæˆ‘å°±ä¸å†é‡å¤äº†ã€‚</p><p>ç°åœ¨å†å›è¿‡å¤´æ¥çœ‹æˆ‘ä»¬çš„é—®é¢˜ï¼Œå †æ ˆæ˜¾ç¤ºä¸å…¨ï¼Œç›¸å…³çš„å‚æ•°å½“ç„¶å°±æ˜¯æœ€å°é˜ˆå€¼ thresholdã€‚é€šè¿‡æ‰‹å†Œä¸­å¯¹thresholdçš„è¯´æ˜ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œå½“ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿæ¯”ä¾‹é«˜äºè¿™ä¸ªé˜ˆå€¼æ—¶ï¼Œå®ƒçš„è°ƒç”¨æ ˆæ‰ä¼šæ˜¾ç¤ºå‡ºæ¥ã€‚</p><p>threshold çš„é»˜è®¤å€¼ä¸º 0.5%ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œäº‹ä»¶æ¯”ä¾‹è¶…è¿‡ 0.5%æ—¶ï¼Œè°ƒç”¨æ ˆæ‰èƒ½è¢«æ˜¾ç¤ºã€‚å†è§‚å¯Ÿæˆ‘ä»¬æ¡ˆä¾‹åº”ç”¨ app çš„äº‹ä»¶æ¯”ä¾‹ï¼Œåªæœ‰ 0.34%ï¼Œä½äº 0.5%ï¼Œæ‰€ä»¥çœ‹ä¸åˆ° app çš„è°ƒç”¨æ ˆå°±å¾ˆæ­£å¸¸äº†ã€‚</p><p>è¿™ç§æƒ…å†µä¸‹ï¼Œä½ åªéœ€è¦ç»™ perf report è®¾ç½®ä¸€ä¸ªå°äº 0.34% çš„é˜ˆå€¼ï¼Œå°±å¯ä»¥æ˜¾ç¤ºæˆ‘ä»¬æƒ³çœ‹åˆ°çš„è°ƒç”¨å›¾äº†ã€‚æ¯”å¦‚æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><pre><code>$ perf report -g graph,0.3
</code></pre><p>ä½ å°±å¯ä»¥å¾—åˆ°ä¸‹é¢è¿™ä¸ªæ–°çš„è¾“å‡ºç•Œé¢ï¼Œå±•å¼€ app åï¼Œå°±å¯ä»¥çœ‹åˆ°å®ƒçš„è°ƒç”¨æ ˆäº†ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/b3/93/b34f95617d13088671f4d9c2b9134693.png" alt=""></p><h2>é—®é¢˜ 4ï¼šæ€ä¹ˆç†è§£ perf report æŠ¥å‘Š</h2><p><img src="https://static001.geekbang.org/resource/image/42/d8/42bf6b82da73656d6c3dad20074f57d8.png" alt=""><img src="https://static001.geekbang.org/resource/image/b9/8b/b90140f7d41790f74982d431f7e0238b.png" alt=""></p><p>çœ‹åˆ°è¿™é‡Œï¼Œæˆ‘ä¼°è®¡ä½ ä¹Ÿæ›¾å˜€å’•è¿‡ï¼Œä¸ºå•¥ä¸ä¸€ä¸Šæ¥å°±ç”¨ perf å·¥å…·è§£å†³ï¼Œè¿˜è¦æ‰§è¡Œé‚£ä¹ˆå¤šå…¶ä»–å·¥å…·å‘¢ï¼Ÿ è¿™ä¸ªé—®é¢˜å…¶å®å°±ç»™å‡ºäº†å¾ˆå¥½çš„è§£é‡Šã€‚</p><p>åœ¨é—®é¢˜4çš„perf report ç•Œé¢ä¸­ï¼Œä½ ä¹Ÿä¸€å®šæ³¨æ„åˆ°äº†ï¼Œ swapper é«˜è¾¾ 99% çš„æ¯”ä¾‹ã€‚ç›´è§‰æ¥è¯´ï¼Œæˆ‘ä»¬åº”è¯¥ç›´æ¥è§‚å¯Ÿå®ƒæ‰å¯¹ï¼Œä¸ºä»€ä¹ˆæ²¡é‚£ä¹ˆåšå‘¢ï¼Ÿ</p><p>å…¶å®ï¼Œå½“ä½ æ¸…æ¥šäº† swapper çš„åŸç†åï¼Œå°±å¾ˆå®¹æ˜“ç†è§£æˆ‘ä»¬ä¸ºä»€ä¹ˆå¯ä»¥å¿½ç•¥å®ƒäº†ã€‚</p><p>çœ‹åˆ°swapperï¼Œä½ å¯èƒ½é¦–å…ˆæƒ³åˆ°çš„æ˜¯SWAPåˆ†åŒºã€‚å®é™…ä¸Šï¼Œ swapper è·Ÿ SWAP æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œå®ƒåªåœ¨ç³»ç»Ÿåˆå§‹åŒ–æ—¶åˆ›å»º init è¿›ç¨‹ï¼Œä¹‹åï¼Œå®ƒå°±æˆäº†ä¸€ä¸ªæœ€ä½ä¼˜å…ˆçº§çš„ç©ºé—²ä»»åŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ CPU ä¸Šæ²¡æœ‰å…¶ä»–ä»»åŠ¡è¿è¡Œæ—¶ï¼Œå°±ä¼šæ‰§è¡Œswapper ã€‚æ‰€ä»¥ï¼Œä½ å¯ä»¥ç§°å®ƒä¸ºâ€œç©ºé—²ä»»åŠ¡â€ã€‚</p><p>å›åˆ°æˆ‘ä»¬çš„é—®é¢˜ï¼Œåœ¨ perf report çš„ç•Œé¢ä¸­ï¼Œå±•å¼€å®ƒçš„è°ƒç”¨æ ˆï¼Œä½ ä¼šçœ‹åˆ°ï¼Œ swapper æ—¶é’Ÿäº‹ä»¶éƒ½è€—è´¹åœ¨äº† do_idle ä¸Šï¼Œä¹Ÿå°±æ˜¯åœ¨æ‰§è¡Œç©ºé—²ä»»åŠ¡ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/12/bd/121dcefacba1b554accd0a90ef349fbd.png" alt=""></p><p>æ‰€ä»¥ï¼Œåˆ†ææ¡ˆä¾‹æ—¶ï¼Œæˆ‘ä»¬ç›´æ¥å¿½ç•¥äº†å‰é¢è¿™ä¸ª 99% çš„ç¬¦å·ï¼Œè½¬è€Œåˆ†æåé¢åªæœ‰ 0.3% çš„ appã€‚å…¶å®ä»è¿™é‡Œä½ ä¹Ÿèƒ½ç†è§£ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸€å¼€å§‹ä¸å…ˆç”¨ perf åˆ†æã€‚</p><p>å› ä¸ºåœ¨å¤šä»»åŠ¡ç³»ç»Ÿä¸­ï¼Œæ¬¡æ•°å¤šçš„äº‹ä»¶ï¼Œä¸ä¸€å®šå°±æ˜¯æ€§èƒ½ç“¶é¢ˆã€‚æ‰€ä»¥ï¼Œåªè§‚å¯Ÿåˆ°ä¸€ä¸ªå¤§æ•°å€¼ï¼Œå¹¶ä¸èƒ½è¯´æ˜ä»€ä¹ˆé—®é¢˜ã€‚å…·ä½“æœ‰æ²¡æœ‰ç“¶é¢ˆï¼Œè¿˜éœ€è¦ä½ è§‚æµ‹å¤šä¸ªæ–¹é¢çš„å¤šä¸ªæŒ‡æ ‡ï¼Œæ¥äº¤å‰éªŒè¯ã€‚è¿™ä¹Ÿæ˜¯æˆ‘åœ¨å¥—è·¯ç¯‡ä¸­ä¸æ–­å¼ºè°ƒçš„ä¸€ç‚¹ã€‚</p><p>å¦å¤–ï¼Œå…³äº Children å’Œ Self çš„å«ä¹‰ï¼Œæ‰‹å†Œé‡Œå…¶å®æœ‰è¯¦ç»†è¯´æ˜ï¼Œè¿˜å¾ˆå‹å¥½åœ°ä¸¾äº†ä¸€ä¸ªä¾‹å­ï¼Œæ¥è¯´æ˜å®ƒä»¬çš„ç™¾åˆ†æ¯”çš„è®¡ç®—æ–¹æ³•ã€‚ç®€å•æ¥è¯´ï¼Œ</p><ul>
<li>
<p>Self æ˜¯æœ€åä¸€åˆ—çš„ç¬¦å·ï¼ˆå¯ä»¥ç†è§£ä¸ºå‡½æ•°ï¼‰æœ¬èº«æ‰€å æ¯”ä¾‹ï¼›</p>
</li>
<li>
<p>Children æ˜¯è¿™ä¸ªç¬¦å·è°ƒç”¨çš„å…¶ä»–ç¬¦å·ï¼ˆå¯ä»¥ç†è§£ä¸ºå­å‡½æ•°ï¼ŒåŒ…æ‹¬ç›´æ¥å’Œé—´æ¥è°ƒç”¨ï¼‰å ç”¨çš„æ¯”ä¾‹ä¹‹å’Œã€‚</p>
</li>
</ul><p>æ­£å¦‚åŒå­¦ç•™è¨€é—®åˆ°çš„ï¼Œå¾ˆå¤šæ€§èƒ½å·¥å…·ç¡®å®ä¼šå¯¹ç³»ç»Ÿæ€§èƒ½æœ‰ä¸€å®šå½±å“ã€‚å°±æ‹¿ perf æ¥è¯´ï¼Œå®ƒéœ€è¦åœ¨å†…æ ¸ä¸­è·Ÿè¸ªå†…æ ¸æ ˆçš„å„ç§äº‹ä»¶ï¼Œé‚£ä¹ˆä¸å¯é¿å…å°±ä¼šå¸¦æ¥ä¸€å®šçš„æ€§èƒ½æŸå¤±ã€‚è¿™ä¸€ç‚¹ï¼Œè™½ç„¶å¯¹å¤§éƒ¨åˆ†åº”ç”¨æ¥è¯´ï¼Œæ²¡æœ‰å¤ªå¤§å½±å“ï¼Œä½†å¯¹ç‰¹å®šçš„æŸäº›åº”ç”¨ï¼ˆæ¯”å¦‚é‚£äº›å¯¹æ—¶é’Ÿå‘¨æœŸç‰¹åˆ«æ•æ„Ÿçš„åº”ç”¨ï¼‰ï¼Œå¯èƒ½å°±æ˜¯ç¾éš¾äº†ã€‚</p><p>æ‰€ä»¥ï¼Œä½¿ç”¨æ€§èƒ½å·¥å…·æ—¶ï¼Œç¡®å®åº”è¯¥è€ƒè™‘å·¥å…·æœ¬èº«å¯¹ç³»ç»Ÿæ€§èƒ½çš„å½±å“ã€‚è€Œè¿™ç§æƒ…å†µï¼Œå°±éœ€è¦ä½ äº†è§£è¿™äº›å·¥å…·çš„åŸç†ã€‚æ¯”å¦‚ï¼Œ</p><ul>
<li>
<p>perf è¿™ç§åŠ¨æ€è¿½è¸ªå·¥å…·ï¼Œä¼šç»™ç³»ç»Ÿå¸¦æ¥ä¸€å®šçš„æ€§èƒ½æŸå¤±ã€‚</p>
</li>
<li>
<p>vmstatã€pidstat è¿™äº›ç›´æ¥è¯»å– proc æ–‡ä»¶ç³»ç»Ÿæ¥è·å–æŒ‡æ ‡çš„å·¥å…·ï¼Œä¸ä¼šå¸¦æ¥æ€§èƒ½æŸå¤±ã€‚</p>
</li>
</ul><h2>é—®é¢˜ 5ï¼šæ€§èƒ½ä¼˜åŒ–ä¹¦ç±å’Œå‚è€ƒèµ„æ–™æ¨è</h2><p><img src="https://static001.geekbang.org/resource/image/a0/ba/a0be73a43e756da48bdbdd01d71598ba.png" alt=""></p><p>æˆ‘å¾ˆé«˜å…´çœ‹åˆ°ç•™è¨€æœ‰è¿™ä¹ˆé«˜çš„å­¦ä¹ çƒ­æƒ…ï¼Œå…¶å®å¥½å¤šæ–‡ç« åé¢éƒ½æœ‰å¤§é‡ç•™è¨€ï¼Œå¸Œæœ›æˆ‘èƒ½æ¨èä¹¦ç±å’Œå­¦ä¹ èµ„æ–™ã€‚è¿™ä¸€ç‚¹ä¹Ÿæ˜¯æˆ‘ä¹æ„çœ‹åˆ°çš„ã€‚ä¸“æ å­¦ä¹ ä¸€å®šä¸æ˜¯ä½ æ€§èƒ½ä¼˜åŒ–ä¹‹æ—…çš„å…¨éƒ¨ï¼Œèƒ½å¤Ÿå¸¦ä½ å…¥é—¨ã€å¸®ä½ è§£å†³å®é™…é—®é¢˜ã€ç”šè‡³æ˜¯æ¿€å‘ä½ çš„å­¦ä¹ çƒ­æƒ…ï¼Œå·²ç»è®©æˆ‘éå¸¸å¼€å¿ƒã€‚</p><p>åœ¨ <a href="https://time.geekbang.org/column/article/69346">å¦‚ä½•å­¦ä¹ Linuxæ€§èƒ½ä¼˜åŒ–</a> çš„æ–‡ç« ä¸­ï¼Œæˆ‘æ›¾ç»ä»‹ç»è¿‡ Brendan Greggï¼Œä»–æ˜¯å½“ä¹‹æ— æ„§çš„æ€§èƒ½ä¼˜åŒ–å¤§å¸ˆï¼Œä½ åœ¨å„ç§ Linux æ€§èƒ½ä¼˜åŒ–çš„æ–‡ç« ä¸­ï¼ŒåŸºæœ¬éƒ½èƒ½çœ‹åˆ°ä»–çš„é‚£å¼ æ€§èƒ½å·¥å…·å›¾è°±ã€‚</p><p>æ‰€ä»¥ï¼Œå…³äºæ€§èƒ½ä¼˜åŒ–çš„ä¹¦ç±ï¼Œæˆ‘æœ€å–œæ¬¢çš„å…¶å®æ­£æ˜¯ä»–å†™çš„é‚£æœ¬ ã€ŠSystems Performance: Enterprise and the Cloudã€‹ã€‚è¿™æœ¬ä¹¦ä¹Ÿå‡ºäº†ä¸­æ–‡ç‰ˆï¼Œåå­—æ˜¯ã€Šæ€§èƒ½ä¹‹å·…ï¼šæ´æ‚‰ç³»ç»Ÿã€ä¼ä¸šä¸äº‘è®¡ç®—ã€‹ã€‚</p><p>ä»å‡ºç‰ˆæ—¶é—´æ¥çœ‹ï¼Œè¿™æœ¬ä¹¦ç¡®å®ç®—ä¸€æœ¬è€ä¹¦äº†ï¼Œè‹±æ–‡ç‰ˆçš„æ˜¯ 2013 å¹´å‡ºç‰ˆçš„ã€‚ä½†æ˜¯ç»å…¸ä¹‹æ‰€ä»¥æˆä¸ºç»å…¸ï¼Œæ­£æ˜¯å› ä¸ºä¸ä¼šè¿‡æ—¶ã€‚è¿™æœ¬ä¹¦é‡Œçš„æ€§èƒ½åˆ†ææ€è·¯ä»¥åŠå¾ˆå¤šçš„æ€§èƒ½å·¥å…·ï¼Œåˆ°ä»Šå¤©ä¾ç„¶é€‚ç”¨ã€‚</p><p>å¦å¤–ï¼Œæˆ‘ä¹Ÿæ¨èä½ å»å…³æ³¨ä»–çš„ä¸ªäººç½‘ç«™ <a href="http://www.brendangregg.com/">http://www.brendangregg.com/</a>ï¼Œç‰¹åˆ«æ˜¯ <a href="http://www.brendangregg.com/linuxperf.html">Linux Performance </a>è¿™ä¸ªé¡µé¢ï¼ŒåŒ…å«äº†å¾ˆå¤š Linux æ€§èƒ½ä¼˜åŒ–çš„èµ„æ–™ï¼Œæ¯”å¦‚ï¼š</p><ul>
<li>
<p>Linuxæ€§èƒ½å·¥å…·å›¾è°± ï¼›</p>
</li>
<li>
<p>æ€§èƒ½åˆ†æå‚è€ƒèµ„æ–™ï¼›</p>
</li>
<li>
<p>æ€§èƒ½ä¼˜åŒ–çš„æ¼”è®²è§†é¢‘ ã€‚</p>
</li>
</ul><p>ä¸è¿‡ï¼Œè¿™é‡Œå¾ˆå¤šå†…å®¹ä¼šæ¶‰åŠåˆ°å¤§é‡çš„å†…æ ¸çŸ¥è¯†ï¼Œå¯¹åˆå­¦è€…æ¥è¯´å¹¶ä¸å‹å¥½ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ æƒ³æˆä¸ºé«˜æ‰‹ï¼Œè¾›è‹¦å’ŒåšæŒéƒ½æ˜¯ä¸å¯é¿å…çš„ã€‚æ‰€ä»¥ï¼Œå¸Œæœ›ä½ åœ¨æŸ¥çœ‹è¿™äº›èµ„æ–™æ—¶ï¼Œä¸è¦ä¸€é‡åˆ°ä¸æ‡‚çš„å°±æ‰“é€€å ‚é¼“ã€‚ä»»ä½•ä¸œè¥¿çš„ç¬¬ä¸€éå­¦ä¹ æœ‰ä¸æ‡‚çš„åœ°æ–¹å¾ˆæ­£å¸¸ï¼Œå¿ä½ææƒ§åˆ«æ”¾å¼ƒï¼Œç»§ç»­å¾€åèµ°ï¼Œå‰é¢å¾ˆå¤šé—®é¢˜å¯èƒ½ä¼šä¸€å¹¶è§£å†³æ‰ï¼Œå†çœ‹ç¬¬äºŒéã€ç¬¬ä¸‰éå°±æ›´è½»æ¾äº†ã€‚</p><p>è¿˜æ˜¯é‚£å¥è¯ï¼ŒæŠ“ä½ä¸»çº¿ä¸åŠ¨æ‘‡ï¼Œå…ˆä»æœ€åŸºæœ¬çš„åŸç†å¼€å§‹ï¼ŒæŒæ¡æ€§èƒ½åˆ†æçš„æ€è·¯ï¼Œç„¶åå†é€æ­¥æ·±å…¥ï¼Œæ¢ç©¶ç»†èŠ‚ï¼Œä¸è¦è¯•å›¾ä¸€å£åƒæˆä¸ªå¤§èƒ–å­ã€‚</p><p>æœ€åï¼Œæ¬¢è¿ç»§ç»­åœ¨ç•™è¨€åŒºå†™ä¸‹ä½ çš„ç–‘é—®ï¼Œæˆ‘ä¼šæŒç»­ä¸æ–­åœ°è§£ç­”ã€‚æˆ‘çš„ç›®çš„ä»ç„¶ä¸å˜ï¼Œå¸Œæœ›å¯ä»¥å’Œä½ ä¸€èµ·ï¼ŒæŠŠæ–‡ç« çš„çŸ¥è¯†å˜æˆä½ çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬ä¸ä»…ä»…åœ¨å®æˆ˜ä¸­æ¼”ç»ƒï¼Œä¹Ÿè¦åœ¨äº¤æµä¸­è¿›æ­¥ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/a3/e9/a396aed4116c2c989771c1295736abe9.jpg" alt=""></p>
                    </div>
                </div>

            </div>
            <div data-v-87ffcada="" class="article-comments pd"><h2 data-v-87ffcada=""><span
                    data-v-87ffcada="">ç²¾é€‰ç•™è¨€</span></h2>
                <ul data-v-87ffcada="">
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æˆ‘æ¥ä¹Ÿ</span>
                            </div>
                            <div class="bd">[D14æ‰“å¡]<br>å¾ˆèµåŒè€å¸ˆçš„è§‚ç‚¹:<br>&quot;ä»»ä½•ä¸œè¥¿çš„ç¬¬ä¸€éå­¦ä¹ æœ‰ä¸æ‡‚çš„åœ°æ–¹å¾ˆæ­£å¸¸ï¼Œå¿ä½ææƒ§åˆ«æ”¾å¼ƒï¼Œç»§ç»­å¾€åèµ°ï¼Œå‰é¢å¾ˆå¤šé—®é¢˜å¯èƒ½ä¼šä¸€å¹¶è§£å†³æ‰ ï¼Œå†çœ‹ç¬¬äºŒéã€ç¬¬ä¸‰éå°±æ›´è½»æ¾äº†ã€‚&quot;<br>æˆ‘å¥½åƒå¾ˆæ—©å°±è¿™æ ·å®è·µäº†: ç¬¬ä¸€éä¸ç®¡çœ‹ä¸çœ‹å¾—æ‡‚,å…ˆå°½é‡ç»†çœ‹. å†ç‰¹æ„è¿‡ä¸€æ®µæ—¶é—´å›å¤´é‡æ–°å­¦ä¸€é,é™¤äº†èƒ½æŒæ¡æ›´å¤šçš„ä¸œè¥¿,è¿˜èƒ½ä½“ä¼šåˆ°&quot;æ¸©æ•…è€ŒçŸ¥æ–°&quot;çš„æ„Ÿè§‰.<br>----------------------------<br>ç°åœ¨å°±æ˜¯&quot;å¸ˆå‚…é¢†è¿›é—¨,ä¿®è¡Œçœ‹ä¸ªäºº.&quot;<br>&quot;å…ˆä»æœ€åŸºæœ¬çš„åŸç†å¼€å§‹ï¼ŒæŒæ¡æ€§èƒ½åˆ†æçš„æ€è·¯ï¼Œç„¶åå†é€æ­¥æ·±å…¥ï¼Œæ¢ç©¶ç»†èŠ‚&quot;<br>----------------------------<br>è‡ªä»å­¦äº†ä¸“æ ,è¶Šæ¥è¶Šè§‰å¾—è‡ªå·±çš„&lt;è‹±è¯­&gt;è¯¥å¥½å¥½è¡¥è¡¥äº†,æ·±æ„Ÿèƒ½åŠ›ä¸è¶³å•Š.<br>é‚£ä¹ˆå¤šå¥½çš„èµ„æº,ä¸€æ‰‹èµ„æ–™å‡ ä¹éƒ½æ˜¯è‹±æ–‡çš„,çœ‹ä¸æ‡‚çœŸæ˜¯å¯æƒœäº†! <br></div>
                            <span class="time">2018-12-21 11:55</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">è‹±è¯­ä¹Ÿæ˜¯åŸºæœ¬è¦æ±‚ï¼Œå¤šè¯»å¤šçœ‹å°±ç†Ÿæ‚‰äº†ğŸ˜Š</p>
                                <p class="reply-time">2018-12-21 17:58</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://wx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKQMM4m7NHuicr55aRiblTSEWIYe0QqbpyHweaoAbG7j2v7UUElqqeP3Ihrm3UfDPDRb1Hv8LvPwXqA/132" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">ninuxer</span>
                            </div>
                            <div class="bd">æ‰“å¡day15<br>perf reportä¸­å…³äºswapperçš„å†…å®¹ï¼Œåé¢æˆ‘ä¹Ÿå»æŸ¥äº†ï¼Œæ‰å‘ç°æ˜¯è‡ªå·±ç†è§£æœ‰è¯¯ï¼Œæ„Ÿè°¢è€å¸ˆæŒ‡å‡ºï¼Œè¿™é‡Œçš„swapperä¸æ˜¯å†…å­˜æ¦‚å¿µçš„swapï¼Œè€Œæ˜¯cpuç©ºé—²æ—¶æ‰§è¡Œçš„ä¸€ä¸ªé»˜è®¤è°ƒç”¨<br>è¦å•ƒå•ƒã€Šæ€§èƒ½ä¹‹å·…ï¼šæ´æ‚‰ç³»ç»Ÿã€ä¼ä¸šä¸äº‘è®¡ç®—ã€‹äº†ï¼Œä½œè€…åšå®¢http:&#47;&#47;www.brendangregg.com&#47;<br>è¯·æ•™è€å¸ˆï¼Œç†è§£å†…æ ¸è¿™å—ï¼Œæœ‰åˆé€‚çš„ä¹¦æ¨èä¹ˆï¼Ÿæˆ‘æŸ¥äº†ä¸‹ï¼Œçœ‹äº†ä¸‹ç›®å½•ï¼Œæ„Ÿè§‰ã€ŠLinuxå†…æ ¸è®¾è®¡ä¸å®ç°ã€‹å¯èƒ½æ¯”è¾ƒé€‚åˆï¼Œå…¶ä»–çš„å¦‚ã€ŠLinuxå†…æ ¸æƒ…æ™¯åˆ†æã€‹ï¼Œã€Šæ·±å…¥ç†è§£Linuxå†…æ ¸ã€‹æ€ä¹ˆæ ·ï¼Ÿ <br></div>
                            <span class="time">2018-12-21 08:44</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ã€Šæ·±å…¥Linuxå†…æ ¸æ¶æ„ã€‹æŒºä¸é”™ï¼Œä¸è¿‡æ˜¯æœ¬å¤§å—å¤´ï¼Œå•ƒä¸‹åº”è¯¥è¦èŠ±ä¸å°‘æ—¶é—´</p>
                                <p class="reply-time">2018-12-21 18:02</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/14/4c/c8/bed1e08a.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">è¾£æ¤’</span>
                            </div>
                            <div class="bd">è€å¸ˆï¼Œæˆ‘æŠŠperf.dataæ‹·è´è¿›å®¹å™¨ï¼Œç„¶ååœ¨å®¹å™¨ä¸­æŒ‰ç…§æç¤ºå®‰è£…äº†perf, å†æ‰§è¡Œperf_4.9 reportæ—¶æŠ¥ä»¥ä¸‹ä¿¡æ¯ï¼š<br>Kernel address maps (&#47;proc&#47;{kallsyms,modules}) were restricted.   <br>Check &#47;proc&#47;sys&#47;kernel&#47;kptr_restrict before running &#39;perf record&#39;<br>As no suitable kallsyms nor vmlinux was found, kernel samples     <br>can&#39;t be resolved.                                             <br>Samples in kernel modules can&#39;t be resolved as well.              <br>  xPress any key...  <br><br>æˆ‘æœ¬èº«çš„æœºå™¨æ˜¯centos7.2. è¯·è€å¸ˆæç¤ºä¸€ä¸‹è§£å†³çš„æ€è·¯ï¼Œè°¢è°¢ï¼<br><br>                                                 <br></div>
                            <span class="time">2019-01-07 16:47</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/14/0f/61/dc7cc89a.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">training</span>
                            </div>
                            <div class="bd">åœ¨macbookä¸Šç”¨dockerä¸Šè¿è¡Œphpfpmå®ä¾‹ï¼Œæ˜¯ä¸æ˜¯æ²¡æœ‰åŠæ³•è·‘é€šperfé‚£äº›æµ‹è¯•,å­¦ä¹ ç”¨ã€‚ <br></div>
                            <span class="time">2019-01-04 22:50</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/14/0f/61/dc7cc89a.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">training</span>
                            </div>
                            <div class="bd">åœ¨macbookä¸Šdockerè¿è¡Œphpfpm é‚£ä¸ªå®ä¾‹ï¼Œæœ‰ä»€ä¹ˆåŠæ³•è¿è¡Œperfn <br></div>
                            <span class="time">2019-01-04 22:49</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/07/8c/51401220.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å°ç¾</span>
                            </div>
                            <div class="bd">æˆ‘ä»¬çš„å†…æ ¸ç‰ˆæœ¬æ˜¯3.10ï¼Œå®‰è£…goï¼Œç„¶åå†å®‰è£…pcstatä¹Ÿä¸å¤ªæ–¹ä¾¿ã€‚<br>äºæ˜¯æˆ‘ç”¨perfè§‚å¯Ÿcacheï¼Œæ¬¡æ–¹æ¡ˆæ˜¯å¦æœ‰ç¼ºé™·ï¼Ÿ<br>æˆ‘çš„å‘½ä»¤å¦‚ä¸‹ï¼Œè§‚å¯Ÿ60s<br>perf stat -e cache-misses -p [PID] -a sleep 60 <br></div>
                            <span class="time">2019-01-02 15:06</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKibu8C3CeYGF6JCBribiaEPia5gibaQnj9icryPVwoF6ibosmdicXJIhBEUdn0aDwZQ32oTyJL86DgDswhAg/132" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">èŠ±å¼€è¶è‡ªæ¥</span>
                            </div>
                            <div class="bd">d5 <br></div>
                            <span class="time">2019-01-01 13:01</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/4f/7d/dd852b04.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">chon</span>
                            </div>
                            <div class="bd">linuxå†…æ ¸ç›¸å…³çŸ¥è¯†ï¼Œæœ‰å•¥ä¹¦æ¨èæ²¡ï¼Ÿè°¢è°¢ <br></div>
                            <span class="time">2018-12-31 16:19</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å¤§é£</span>
                            </div>
                            <div class="bd">æ‰“å¡ <br></div>
                            <span class="time">2018-12-31 15:04</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å¦‚æœ</span>
                            </div>
                            <div class="bd">DAY14ï¼Œæ‰“å¡ <br></div>
                            <span class="time">2018-12-29 14:48</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/d8/ee/6e7c2264.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Only now</span>
                            </div>
                            <div class="bd">mark  <br></div>
                            <span class="time">2018-12-27 22:58</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/f4/b8/43a4c2c0.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å­è½©Zixuan</span>
                            </div>
                            <div class="bd">æ„Ÿè°¢è€å¸ˆè€å¿ƒå›å¤ï¼Œæ¥ç€çº¿ä¸Šå®šä½é—®é¢˜æƒ³é—®ä¸‹ï¼Œå¦‚æœè¦äº‹å…ˆåšå¥½ç›‘æ§ç³»ç»Ÿï¼Œä¸€èˆ¬éœ€è¦åšåˆ°ä»€ä¹ˆç¨‹åº¦ï¼Ÿç›®å‰åªæœ‰é˜¿é‡Œäº‘çš„ç›‘æ§æ„Ÿè§‰ä¸å¤Ÿç”¨ <br></div>
                            <span class="time">2018-12-25 08:29</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å¯¹çš„ï¼Œè‡³å°‘è¦ä»ç³»ç»Ÿå’Œåº”ç”¨ä¸¤ä¸ªå±‚é¢ç›‘æ§ã€‚ç³»ç»Ÿå±‚é¢å°±æ˜¯æˆ‘ä»¬ä¸“æ é‡Œæåˆ°çš„ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µï¼›åº”ç”¨å±‚é¢é™¤äº†è¿›ç¨‹çš„èµ„æºç›‘æ§ä¹‹å¤–ï¼Œè¿˜æœ‰åº”ç”¨å¯¹å¤–çš„æ¥å£ã€ä¸å…¶ä»–æœåŠ¡é—´è°ƒç”¨ã€æ•°æ®åº“ã€åº”ç”¨å†…éƒ¨åŠŸèƒ½æ¨¡å—ç­‰ä¸€ç³»åˆ—çš„metricsï¼ˆå¯ä»¥å‚è€ƒAPMï¼‰</p>
                                <p class="reply-time">2018-12-25 17:37</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">è…¾è¾¾</span>
                            </div>
                            <div class="bd">dockerç¬¦å·æ‰¾ä¸åˆ°çš„é—®é¢˜ï¼Œæ–‡ç« é‡Œå·²ç»ç»™äº†å‡ ä¸ªæ–¹æ³•ï¼Œæˆ‘æƒ³é—®çš„æ˜¯ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥ç›´æ¥æŠŠdockerçš„ç¬¦å·ä¸‹è½½ä¸‹æ¥ï¼Ÿä»å®¿ä¸»ç›´æ¥çœ‹å‡½æ•°è°ƒç”¨æ ˆï¼Ÿ dockerä¸ä¼šåƒjavaä¸€æ ·ï¼Œåœ¨javaä»£ç å±‚é¢åï¼Œä»ç³»ç»Ÿå±‚é¢(cè¯­è¨€å±‚é¢)å¾ˆéš¾æŸ¥é—®é¢˜ï¼Ÿ <br></div>
                            <span class="time">2018-12-24 15:40</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">çœ‹åº”ç”¨çš„ç±»å‹ï¼Œæœ‰äº›é™æ€ç¼–è¯‘çš„å¯ä»¥ä¸‹è½½ä¸‹æ¥ï¼Œä½†ä¹Ÿæœ‰å¾ˆå¤šåº”ç”¨ä¾èµ–å¤§é‡çš„åŠ¨æ€åº“ï¼Œæ”¾åˆ°å®¹å™¨å¤–é¢å°±æ˜¯è¿™å„¿æåˆ°çš„æ–¹æ³•ä¸€äº†</p>
                                <p class="reply-time">2018-12-25 07:42</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/42/18/edc1b373.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">é£é£˜ï¼Œå¾ç‹¬æ€</span>
                            </div>
                            <div class="bd">æ‰“å¡ <br></div>
                            <span class="time">2018-12-24 08:42</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/f4/b8/43a4c2c0.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å­è½©Zixuan</span>
                            </div>
                            <div class="bd">è¶å‘¨æœ«è·Ÿä¸Šäº†è€å¸ˆçš„è„šæ­¥ï¼Œè€å¸ˆè®²è§£çš„å¾ˆå¥½ï¼Œæ„Ÿè°¢ï¼å¦å¤–æˆ‘æ³¨æ„åˆ°è€å¸ˆåœ¨ä¸“æ é‡Œçš„å®ä¾‹éƒ½æ˜¯ç°åœºè°ƒè¯•ï¼Œä½†æ˜¯æˆ‘é‡åˆ°è¿‡å®é™…æƒ…å†µéœ€è¦å°½å¿«æ¢å¤æœåŠ¡ï¼Œå…ˆæŠŠä»£ç è¿˜åŸé‡æ–°å‘å¸ƒä¿è¯æœåŠ¡å¯ç”¨ï¼Œåªç•™ä¸‹ä¸€å°ä¿ç•™é—®é¢˜ç°åœºçš„æœºå™¨ï¼Œä½†æ˜¯å·²ç»ä¸æ¥å—è¯·æ±‚äº†ï¼Œåƒè¿™ç§æƒ…å†µé™¤äº†äº‹å…ˆç›‘æ§ä»¥å¤–ï¼Œè¿˜æœ‰åˆ«çš„æ–¹æ¡ˆèƒ½å®šä½é—®é¢˜å—ï¼Ÿ <br></div>
                            <span class="time">2018-12-23 22:48</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">æ˜¯çš„ï¼Œçº¿ä¸Šé—®é¢˜è¦ä¼˜å…ˆæ¢å¤ï¼Œæ’æŸ¥ä¸èƒ½èŠ±è¿‡å¤šæ—¶é—´ï¼Œæ‰€ä»¥å¾ˆå¤šæƒ…å†µä¸‹éƒ½è¦é ç›‘æ§ç³»ç»Ÿäº†è§£å½“æ—¶çš„çŠ¶å†µã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒåŸæ¥æœåŠ¡è¿˜åœ¨çš„è¯ï¼Œå¯ä»¥è¯•è¯•èƒ½å¦é‡ç°é—®é¢˜ï¼Œæ¯”å¦‚æ¨¡æ‹Ÿå½“æ—¶çš„è¯·æ±‚ï¼›æˆ–è€…ä¹Ÿå¯ä»¥ä»æ—¥å¿—ä¸­å¯»æ‰¾çº¿ç´¢ã€‚</p>
                                <p class="reply-time">2018-12-25 08:17</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/f2/2b/7d9751bb.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">è®¸å±±å±±</span>
                            </div>
                            <div class="bd">è¿™ä¸¤æœŸçš„ç­”ç–‘å¸®åŠ©å¾ˆå¤§ï¼Œè°¢è°¢è€å¸ˆäº†ã€‚ <br></div>
                            <span class="time">2018-12-23 22:17</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/97/61/34a0da09.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Griffin</span>
                            </div>
                            <div class="bd">ç»ˆäºèµ¶ä¸Šäº†ï¼Œå€ªè€å¸ˆèƒ½ä¸èƒ½è®²è®²ç½‘ç»œé—®é¢˜åº”è¯¥æ€ä¹ˆæ’æŸ¥å‘€ï¼Œæœ€è¿‘è€æ˜¯è¢«dockerï¼Œdocker swarmçš„containerå¯»å€å›°æ‰°ã€‚ <br></div>
                            <span class="time">2018-12-23 20:27</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ä¸è¦æ€¥ï¼Œæˆ‘ä»¬æœ‰ç½‘ç»œæ¨¡å—çš„</p>
                                <p class="reply-time">2018-12-25 08:18</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æ— åè€å’</span>
                            </div>
                            <div class="bd">å…¨éƒ¨åˆ·å®Œäº†ï¼ŒæŠŠå„ä¸ªCPUå®¹æ˜“å‡ºç°é—®é¢˜çš„æƒ…å†µåŸºæœ¬ä¸Šéƒ½å†™æ¸…æ¥šäº†ï¼Œè€Œä¸”éƒ½æœ‰è¯¦ç»†çš„æµ‹è¯•ç”¨ä¾‹ï¼Œé™¤äº†è½¯ä¸­æ–­é‚£ä¸ªéœ€è¦SYNæ”»å‡»ä¹‹å¤–ï¼Œå…¶ä»–çš„æµ‹è¯•ç”¨ä¾‹éƒ½ä¸€äº”ä¸€åçš„éƒ½åšè¿‡äº†ï¼Œå—ç›Šè‰¯å¤šã€‚æˆ‘æœ‰ä»¥ä¸‹ç–‘é—®ï¼Œå¸Œæœ›è€å¸ˆå¯ä»¥è§£ç­”ä¸‹ï¼š<br>1ã€è½¯ä¸­æ–­è€å¸ˆæ˜¯ç”¨SYNæ”»å‡»çš„æ–¹å¼æ¥è®²è§£è¿™éƒ¨åˆ†çš„å®ä¾‹çš„ï¼Œé‚£è¿˜æœ‰æ²¡æœ‰å…¶ä»–å…¸å‹çš„è½¯ä¸­æ–­çš„æ¡ˆä¾‹å‘¢ï¼Ÿ<br>2ã€ç¡¬ä¸­æ–­çš„å®ä¾‹è€å¸ˆæ²¡æœ‰è®²ï¼Œå¯ä»¥è¡¥ä¸€ç¯‡å—ï¼Ÿ<br>3ã€è€å¸ˆæ‰€è®²çš„å®ä¾‹ï¼Œéƒ½æ˜¯å•ä¸€æ¨¡å¼çš„ï¼Œåœ¨å®é™…çš„ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œæƒ…å†µè¦å¤æ‚å¾ˆå¤šï¼Œè€å¸ˆèƒ½å†è®²ä¸€ä¸‹å°è±¡æœ€æ·±åˆ»çš„å®é™…æƒ…å†µå—ï¼Ÿ<br><br>å¦å¤–ï¼Œæˆ‘æœ‰ä¸€ä¸ªå°å»ºè®®ï¼Œè€å¸ˆçš„æ¡ˆä¾‹éƒ½æ˜¯ç”¨dockeræ¥æ­å»ºç¯å¢ƒçš„ï¼Œåœ¨ä¸€ä¸ªç”¨ä¾‹è¦å¤šæ¬¡ä¸‹è½½ä¸åŒçš„imageï¼Œä½†å…¶å®è¿™äº›imageåªæ˜¯é‡Œé¢çš„æµ‹è¯•ç”¨ä¾‹å˜äº†ï¼Œæ‰€ä»¥å¯ä»¥å…ˆä¸‹è½½fileæ–‡ä»¶ï¼Œä½¿ç”¨docker -væŒ‚è½½çš„æ–¹å¼è¿›è¡Œæµ‹è¯•ã€‚è¿™æ ·å¯ä»¥å¤§å¤§å‡å°‘ä¸‹è½½é•œåƒçš„æ—¶é—´ã€‚å¦‚ä¸‹ï¼Œå°±æ˜¯ä½¿ç”¨docker run -v &#47;usr&#47;local&#47;src&#47;app-fix2:&#47;app --privileged --name app-fix -d feisky&#47;app:iowait æ¥è¿è¡Œçš„é•œåƒã€‚<br>```<br>[root@linjx src]# docker ps -a<br>CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                        PORTS               NAMES<br>0ecb229f87e4        feisky&#47;app:iowait   &quot;&#47;app&quot;              3 minutes ago       Up 3 minutes                                      app-fix<br>a251996e0d60        feisky&#47;app:iowait   &quot;&#47;app&quot;              5 hours ago         Exited (137) 20 minutes ago                       app<br>``` <br></div>
                            <span class="time">2018-12-23 10:26</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">1. ç½‘ç»œåé¢è¿˜ä¼šè®²<br>2. ç¡¬ä¸­æ–­çš„åŸç†å…¶å®å·®ä¸å¤ªå¤šï¼Œæ‰€ä»¥æ²¡æœ‰å•ç‹¬æ‹å‡ºæ¥<br>3. ç°åœ¨å•ä¸ªæ¨¡å—çš„æ¡ˆä¾‹çš„ç¡®ä¸å¤ªå¤æ‚ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºäº†è®©å¤§å®¶éƒ½èƒ½æ›´ç›´è§‚ç†è§£è¿™äº›é—®é¢˜<br><br>å…³äºimageä¸‹è½½ï¼Œå…¶å®å¯ä»¥ä½¿ç”¨å›½å†…çš„é•œåƒåŠ é€Ÿï¼Œç½‘ç»œæœç´¢æ‰¾åˆ°ã€‚å¹¶ä¸”åŸºç¡€é•œåƒä¸€æ ·çš„è¯ï¼Œä¹Ÿåªéœ€è¦ä¸‹è½½æ–°çš„layerå³å¯ã€‚<br><br>æœ€åï¼Œä½ çš„å®¹å™¨æ¨é€€å‡ºäº†ï¼Œè¯·å‚è€ƒgithubè®¾ç½®å¯åŠ¨å‚æ•°è§£å†³ã€‚</p>
                                <p class="reply-time">2018-12-25 08:28</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/bd/b5/b8dfa30a.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">åŒ</span>
                            </div>
                            <div class="bd">è¯·æ•™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬çº¿ä¸Šæœ‰å°æœºå™¨aä¸Šéƒ¨ç½²äº†ä¸€ä¸ªjavaåº”ç”¨ï¼Œé€šè¿‡javaæ¥è°ƒç”¨å¤–ç½‘çš„ä¸€ä¸ªhttpæœåŠ¡ï¼Œä½†æ˜¯é€Ÿåº¦ç‰¹åˆ«æ…¢ï¼Œä½†æ˜¯åœ¨æœºå™¨ä¸Šé€šè¿‡curlè®¿é—®å°±ç‰¹åˆ«å¿«ï¼Œæˆ‘ä»¬æ€€ç–‘æ˜¯åœ¨sockeyå±‚é¢å¯èƒ½å­˜åœ¨ä»€ä¹ˆé—®é¢˜ï¼Œè¯·é—®å¦‚ä½•æ’æŸ¥å‘¢ï¼Ÿ <br></div>
                            <span class="time">2018-12-22 22:10</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å¯ä»¥æŠ“åŒ…å¯¹æ¯”ä¸€ä¸‹ï¼Œçœ‹çœ‹Javaåº”ç”¨è·Ÿcurlæœ‰ä»€ä¹ˆä¸åŒã€‚ç½‘ç»œé—®é¢˜åé¢è¿˜ä¼šè®²çš„</p>
                                <p class="reply-time">2018-12-23 11:49</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/53/3d/370f0b05.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">W.T</span>
                            </div>
                            <div class="bd">ç»™è€å¸ˆç‚¹èµğŸ‘ <br></div>
                            <span class="time">2018-12-22 20:28</span>
                            
                        </div>
                    </li>
                    


                </ul>
            </div>
        </div>
    </div>
</div>
</body>
</html>