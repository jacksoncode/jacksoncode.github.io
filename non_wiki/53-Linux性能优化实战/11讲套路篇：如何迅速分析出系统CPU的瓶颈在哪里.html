<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover">
    <meta name="format-detection" content="telephone=no">
    <style type="text/css">

#watermark {

  position: relative;
  overflow: hidden;
}

#watermark .x {
  position: absolute;
  top: 800;
  left: 400;
  color: #3300ff;
  font-size: 50px;
  pointer-events: none;
  opacity:0.3;
  filter:Alpha(opacity=50);
  -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
}
    </style>


    <style type="text/css">
 html{color:#333;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;text-rendering:optimizelegibility;font-family:Helvetica Neue,PingFang SC,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif}html.borderbox *,html.borderbox :after,html.borderbox :before{box-sizing:border-box}article,aside,blockquote,body,button,code,dd,details,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hr,input,legend,li,menu,nav,ol,p,pre,section,td,textarea,th,ul{margin:0;padding:0}article,aside,details,figcaption,figure,footer,header,menu,nav,section{display:block}audio,canvas,video{display:inline-block}body,button,input,select,textarea{font:300 1em/1.8 PingFang SC,Lantinghei SC,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,Helvetica,sans-serif}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}blockquote{position:relative;color:#999;font-weight:400;border-left:1px solid #1abc9c;padding-left:1em;margin:1em 3em 1em 2em}@media only screen and (max-width:640px){blockquote{margin:1em 0}}abbr,acronym{border-bottom:1px dotted;font-variant:normal}abbr{cursor:help}del{text-decoration:line-through}address,caption,cite,code,dfn,em,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}q:after,q:before{content:""}sub,sup{font-size:75%;line-height:0;position:relative}:root sub,:root sup{vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}a{color:#1abc9c}a:hover{text-decoration:underline}.typo a{border-bottom:1px solid #1abc9c}.typo a:hover{border-bottom-color:#555;color:#555}.typo a:hover,a,ins{text-decoration:none}.typo-u,u{text-decoration:underline}mark{background:#fffdd1;border-bottom:1px solid #ffedce;padding:2px;margin:0 5px}code,pre,pre tt{font-family:Courier,Courier New,monospace}pre{background:hsla(0,0%,97%,.7);border:1px solid #ddd;padding:1em 1.5em;display:block;-webkit-overflow-scrolling:touch}hr{border:none;border-bottom:1px solid #cfcfcf;margin-bottom:.8em;height:10px}.typo-small,figcaption,small{font-size:.9em;color:#888}b,strong{font-weight:700;color:#000}[draggable]{cursor:move}.clearfix:after,.clearfix:before{content:"";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.textwrap,.textwrap td,.textwrap th{word-wrap:break-word;word-break:break-all}.textwrap-table{table-layout:fixed}.serif{font-family:Palatino,Optima,Georgia,serif}.typo-dl,.typo-form,.typo-hr,.typo-ol,.typo-p,.typo-pre,.typo-table,.typo-ul,.typo dl,.typo form,.typo hr,.typo ol,.typo p,.typo pre,.typo table,.typo ul,blockquote{margin-bottom:1rem}h1,h2,h3,h4,h5,h6{font-family:PingFang SC,Helvetica Neue,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#000;line-height:1.35}.typo-h1,.typo-h2,.typo-h3,.typo-h4,.typo-h5,.typo-h6,.typo h1,.typo h2,.typo h3,.typo h4,.typo h5,.typo h6{margin-top:1.2em;margin-bottom:.6em;line-height:1.35}.typo-h1,.typo h1{font-size:2em}.typo-h2,.typo h2{font-size:1.8em}.typo-h3,.typo h3{font-size:1.6em}.typo-h4,.typo h4{font-size:1.4em}.typo-h5,.typo-h6,.typo h5,.typo h6{font-size:1.2em}.typo-ul,.typo ul{margin-left:1.3em;list-style:disc}.typo-ol,.typo ol{list-style:decimal;margin-left:1.9em}.typo-ol ol,.typo-ol ul,.typo-ul ol,.typo-ul ul,.typo li ol,.typo li ul{margin-bottom:.8em;margin-left:2em}.typo-ol ul,.typo-ul ul,.typo li ul{list-style:circle}.typo-table td,.typo-table th,.typo table caption,.typo table td,.typo table th{border:1px solid #ddd;padding:.5em 1em;color:#666}.typo-table th,.typo table th{background:#fbfbfb}.typo-table thead th,.typo table thead th{background:hsla(0,0%,95%,.7)}.typo table caption{border-bottom:none}.typo-input,.typo-textarea{-webkit-appearance:none;border-radius:0}.typo-em,.typo em,caption,legend{color:#000;font-weight:inherit}.typo-em{position:relative}.typo-em:after{position:absolute;top:.65em;left:0;width:100%;overflow:hidden;white-space:nowrap;content:"\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"}.typo img{max-width:100%}.common-content{font-weight:400;color:#353535;line-height:1.75rem;white-space:normal;word-break:normal;font-size:1rem}.common-content img{display:block;max-width:100%;background-color:#eee}.common-content audio,.common-content video{width:100%;background-color:#eee}.common-content center,.common-content font{margin-top:1rem;display:inline-block}.common-content center{width:100%}.common-content pre{margin-top:1rem;padding-left:0;padding-right:0;position:relative;overflow:hidden}.common-content pre code{font-size:.8rem;font-family:Consolas,Liberation Mono,Menlo,monospace,Courier;display:block;width:100%;box-sizing:border-box;padding-left:1rem;padding-right:1rem;overflow-x:auto}.common-content hr{border:none;margin-top:1.5rem;margin-bottom:1.5rem;border-top:1px solid #f5f5f5;height:1px;background:none}.common-content b,.common-content h1,.common-content h2,.common-content h3,.common-content h4,.common-content h5,.common-content strong{font-weight:700}.common-content h1,.common-content h2{font-size:1.125rem;margin-bottom:.45rem}.common-content h3,.common-content h4,.common-content h5{font-size:1rem;margin-bottom:.45rem}.common-content p{font-weight:400;color:#353535;margin-top:.15rem}.common-content .orange{color:#ff5a05}.common-content .reference{font-size:1rem;color:#888}.custom-rich-content h1{margin-top:0;font-weight:400;font-size:15.25px;border-bottom:1px solid #eee;line-height:2.8}.custom-rich-content li,.custom-rich-content p{font-size:14px;color:#888;line-height:1.6}table.hljs-ln{margin-bottom:0;border-spacing:0;border-collapse:collapse}table.hljs-ln,table.hljs-ln tbody,table.hljs-ln td,table.hljs-ln tr{box-sizing:border-box}table.hljs-ln td{padding:0;border:0}table.hljs-ln td.hljs-ln-numbers{min-width:15px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;cursor:pointer;user-select:none}table.hljs-ln td.hljs-ln-code,table.hljs-ln td.hljs-ln-numbers{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;line-height:20px;vertical-align:top}table.hljs-ln td.hljs-ln-code{position:relative;padding-right:10px;padding-left:10px;overflow:visible;color:#24292e;word-wrap:normal;white-space:pre}video::-webkit-media-controls{overflow:hidden!important}video::-webkit-media-controls-enclosure{width:calc(100% + 32px);margin-left:auto}.button-cancel{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel,.button-primary{-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary{color:#fff;background-color:#ff5a05;border-radius:3px}@font-face{font-family:iconfont;src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot);src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.woff) format("woff"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.ttf) format("truetype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.svg#iconfont) format("svg")}@font-face{font-family:player-font;src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot);src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.woff) format("woff"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.ttf) format("truetype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.svg#player-font) format("svg")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-webkit-text-stroke-width:.2px;-moz-osx-font-smoothing:grayscale}html{background:#fff;min-height:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{width:100%}body.fixed{overflow:hidden;position:fixed;width:100vw;height:100vh}i{font-style:normal}a{word-wrap:break-word;-webkit-tap-highlight-color:rgba(0,0,0,0)}a:hover{text-decoration:none}.fade-enter-active,.fade-leave-active{transition:opacity .3s}.fade-enter,.fade-leave-to{opacity:0}.MathJax,.MathJax_CHTML,.MathJax_MathContainer,.MathJax_MathML,.MathJax_PHTML,.MathJax_PlainSource,.MathJax_SVG{outline:0}.ios-app-switch .js-audit{display:none}._loading_wrap_{position:fixed;width:100vw;height:100vh;top:50%;left:50%;transform:translate(-50%,-50%);z-index:999}._loading_div_class_,._loading_wrap_{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}._loading_div_class_{word-wrap:break-word;padding:.5rem .75rem;text-align:center;z-index:9999;font-size:.6rem;max-width:60%;color:#fff;border-radius:.25rem;-ms-flex-direction:column;flex-direction:column}._loading_div_class_ .message{color:#353535;font-size:16px;line-height:3}.spinner{animation:circle-rotator 1.4s linear infinite}.spinner *{line-height:0;box-sizing:border-box}@keyframes circle-rotator{0%{transform:rotate(0deg)}to{transform:rotate(270deg)}}.path{stroke-dasharray:187;stroke-dashoffset:0;transform-origin:center;animation:circle-dash 1.4s ease-in-out infinite,circle-colors 5.6s ease-in-out infinite}@keyframes circle-colors{0%{stroke:#ff5a05}to{stroke:#ff5a05}}@keyframes circle-dash{0%{stroke-dashoffset:187}50%{stroke-dashoffset:46.75;transform:rotate(135deg)}to{stroke-dashoffset:187;transform:rotate(450deg)}}.confirm-box-wrapper,.confirm-box-wrapper .mask{position:absolute;top:0;left:0;right:0;bottom:0}.confirm-box-wrapper .mask{background:rgba(0,0,0,.6)}.confirm-box-wrapper .confirm-box{position:fixed;top:50%;left:50%;width:267px;background:#fff;transform:translate(-50%,-50%);border-radius:7px}.confirm-box-wrapper .confirm-box .head{margin:0 18px;font-size:18px;text-align:center;line-height:65px;border-bottom:1px solid #d9d9d9}.confirm-box-wrapper .confirm-box .body{padding:18px;padding-bottom:0;color:#353535;font-size:12.5px;max-height:150px;overflow:auto}.confirm-box-wrapper .confirm-box .foot{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding:18px}.confirm-box-wrapper .confirm-box .foot .button-cancel{border:1px solid #d9d9d9}.hljs{display:block;overflow-x:auto;padding:.5em;color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}




    </style>
    <style type="text/css">
        .button-cancel[data-v-87ffcada]{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel[data-v-87ffcada],.button-primary[data-v-87ffcada]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary[data-v-87ffcada]{color:#fff;background-color:#ff5a05;border-radius:3px}.pd[data-v-87ffcada]{padding-left:1.375rem;padding-right:1.375rem}.article[data-v-87ffcada]{max-width:70rem;margin:0 auto}.article .article-unavailable[data-v-87ffcada]{color:#fa8919;font-size:15px;font-weight:600;line-height:24px;border-radius:5px;padding:12px;background-color:#f6f7fb;margin-top:20px}.article .article-unavailable .iconfont[data-v-87ffcada]{font-size:12px}.article .main[data-v-87ffcada]{padding:1.25rem 0;margin-bottom:52px}.article-title[data-v-87ffcada]{color:#353535;font-weight:400;line-height:1.65rem;font-size:1.34375rem}.article-info[data-v-87ffcada]{color:#888;font-size:.9375rem;margin-top:1.0625rem}.article-content[data-v-87ffcada]{margin-top:1.0625rem}.article-content.android video[data-v-87ffcada]::-webkit-media-controls-fullscreen-button{display:none}.copyright[data-v-87ffcada]{color:#b2b2b2;padding-bottom:20px;margin-top:20px;font-size:13px}.audio-player[data-v-87ffcada]{width:100%;margin:20px 0}.to-comment[data-v-87ffcada]{overflow:hidden;padding-top:10px;margin-bottom:-30px}.to-comment a.button-primary[data-v-87ffcada]{float:right;height:20px;font-size:12px;line-height:20px;padding:4px 8px;cursor:pointer}.article-comments[data-v-87ffcada]{margin-top:2rem}.article-comments h2[data-v-87ffcada]{text-align:center;color:#888;position:relative;z-index:1;margin-bottom:1rem}.article-comments h2[data-v-87ffcada]:before{border-top:1px dotted #888;content:"";position:absolute;top:56%;left:0;width:100%;z-index:-1}.article-comments h2 span[data-v-87ffcada]{font-size:15.25px;font-weight:400;padding:0 1rem;background:#fff;display:inline-block}.article-sub-bottom[data-v-87ffcada]{z-index:10;cursor:pointer}.switch-btns[data-v-87ffcada]{height:76px;cursor:pointer;padding-top:24px;padding-bottom:24px;border-bottom:10px solid #f6f7fb;position:relative}.switch-btns[data-v-87ffcada]:before{content:" ";height:1px;background:#e8e8e8;position:absolute;top:0;left:0;-webkit-box-sizing:border-box;box-sizing:border-box;left:1.375rem;right:1.375rem}.switch-btns .btn[data-v-87ffcada]{height:38px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.switch-btns .btn .tag[data-v-87ffcada]{-webkit-box-flex:0;-ms-flex:0 0 62px;flex:0 0 62px;text-align:center;color:#888;font-size:14px;border-radius:10px;height:22px;line-height:22px;background:#f6f7fb;font-weight:400}.switch-btns .btn .txt[data-v-87ffcada]{margin-left:10px;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;color:#888;font-size:15px;height:22px;line-height:22px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:400}@media (max-width:769px){.article .breadcrumb[data-v-87ffcada]{padding-top:10px;padding-bottom:10px}}





    </style>

    <style type="text/css">
        .comment-item{list-style-position:inside;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-bottom:1rem}.comment-item a{border-bottom:none}.comment-item .avatar{width:2.625rem;height:2.625rem;-ms-flex-negative:0;flex-shrink:0;border-radius:50%}.comment-item .info{margin-left:.5rem;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.comment-item .info .hd{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .username{color:#888;font-size:15.25px;font-weight:400;line-height:1.2}.comment-item .info .hd .control{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .control .btn-share{color:#888;font-size:.75rem;margin-right:1rem}.comment-item .info .hd .control .btn-praise{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:15.25px;text-decoration:none}.comment-item .info .hd .control .btn-praise i{color:#888;display:inline-block;font-size:.75rem;margin-right:.3rem;margin-top:-.01rem}.comment-item .info .hd .control .btn-praise i.on,.comment-item .info .hd .control .btn-praise span{color:#ff5a05}.comment-item .info .bd{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6}.comment-item .info .time{color:#888;font-size:9px;line-height:1}.comment-item .info .reply .reply-hd{font-size:15.25px}.comment-item .info .reply .reply-hd span{margin-left:-12px;color:#888;font-weight:400}.comment-item .info .reply .reply-hd i{color:#ff5a05;font-size:15.25px}.comment-item .info .reply .reply-content{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all}.comment-item .info .reply .reply-time{color:#888;font-size:9px}




    </style>
</head>
<body>
<div id="app">


    <div data-v-87ffcada="" class="article" id="watermark">
        <p class="x">æ›´å¤šè¯¾ç¨‹è¯·åŠ QQç¾¤170701297</p>
        <div data-v-87ffcada="" class="main main-app">
            <h1 data-v-87ffcada="" class="article-title pd">
                11è®²å¥—è·¯ç¯‡ï¼šå¦‚ä½•è¿…é€Ÿåˆ†æå‡ºç³»ç»ŸCPUçš„ç“¶é¢ˆåœ¨å“ªé‡Œ
            </h1>
            <div data-v-87ffcada="" class="article-content typo common-content pd"><img data-v-87ffcada=""
                                                                                        src="https://static001.geekbang.org/resource/image/2a/e4/2ab0c4854df1fc414b4c6aaac80059e4.jpg">


                <div data-v-87ffcada="" id="article-content" class="">
                    <div class="text">
                        <p>ä½ å¥½ï¼Œæˆ‘æ˜¯å€ªæœ‹é£ã€‚</p><p>å‰å‡ èŠ‚é‡Œï¼Œæˆ‘é€šè¿‡å‡ ä¸ªæ¡ˆä¾‹ï¼Œå¸¦ä½ åˆ†æäº†å„ç§å¸¸è§çš„ CPU æ€§èƒ½é—®é¢˜ã€‚é€šè¿‡è¿™äº›ï¼Œæˆ‘ç›¸ä¿¡ä½ å¯¹ CPU çš„æ€§èƒ½åˆ†æå·²ç»ä¸å†é™Œç”Ÿå’Œææƒ§ï¼Œèµ·ç æœ‰äº†åŸºæœ¬çš„æ€è·¯ï¼Œä¹Ÿäº†è§£äº†ä¸å°‘ CPU æ€§èƒ½çš„åˆ†æå·¥å…·ã€‚</p><p>ä¸è¿‡ï¼Œæˆ‘çŒœä½ å¯èƒ½ä¹Ÿç¢°åˆ°äº†ä¸€ä¸ªæˆ‘æ›¾æœ‰è¿‡çš„å›°æƒ‘ï¼š CPU çš„æ€§èƒ½æŒ‡æ ‡é‚£ä¹ˆå¤šï¼ŒCPU æ€§èƒ½åˆ†æå·¥å…·ä¹Ÿæ˜¯ä¸€æŠ“ä¸€å¤§æŠŠï¼Œå¦‚æœç¦»å¼€ä¸“æ ï¼Œæ¢æˆå®é™…çš„å·¥ä½œåœºæ™¯ï¼Œæˆ‘åˆè¯¥è§‚å¯Ÿä»€ä¹ˆæŒ‡æ ‡ã€é€‰æ‹©å“ªä¸ªæ€§èƒ½å·¥å…·å‘¢ï¼Ÿ</p><p>ä¸è¦æ‹…å¿ƒï¼Œä»Šå¤©æˆ‘å°±ä»¥å¤šå¹´çš„æ€§èƒ½ä¼˜åŒ–ç»éªŒï¼Œç»™ä½ æ€»ç»“å‡ºä¸€ä¸ªâ€œåˆå¿«åˆå‡†â€çš„ç“¶é¢ˆå®šä½å¥—è·¯ï¼Œå‘Šè¯‰ä½ åœ¨ä¸åŒåœºæ™¯ä¸‹ï¼ŒæŒ‡æ ‡å·¥å…·æ€ä¹ˆé€‰ï¼Œæ€§èƒ½ç“¶é¢ˆæ€ä¹ˆæ‰¾ã€‚</p><h2>CPU æ€§èƒ½æŒ‡æ ‡</h2><p>æˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸‹ï¼Œæè¿° CPU çš„æ€§èƒ½æŒ‡æ ‡éƒ½æœ‰å“ªäº›ã€‚ä½ å¯ä»¥è‡ªå·±å…ˆæ‰¾å¼ çº¸ï¼Œå‡­ç€è®°å¿†å†™ä¸€å†™ï¼›æˆ–è€…æ‰“å¼€å‰é¢çš„æ–‡ç« ï¼Œè‡ªå·±æ€»ç»“ä¸€ä¸‹ã€‚</p><p>é¦–å…ˆï¼Œ<strong>æœ€å®¹æ˜“æƒ³åˆ°çš„åº”è¯¥æ˜¯ CPU ä½¿ç”¨ç‡</strong>ï¼Œè¿™ä¹Ÿæ˜¯å®é™…ç¯å¢ƒä¸­æœ€å¸¸è§çš„ä¸€ä¸ªæ€§èƒ½æŒ‡æ ‡ã€‚</p><p>CPU ä½¿ç”¨ç‡æè¿°äº†éç©ºé—²æ—¶é—´å æ€» CPU æ—¶é—´çš„ç™¾åˆ†æ¯”ï¼Œæ ¹æ® CPU ä¸Šè¿è¡Œä»»åŠ¡çš„ä¸åŒï¼Œåˆè¢«åˆ†ä¸ºç”¨æˆ·CPUã€ç³»ç»ŸCPUã€ç­‰å¾…I/O CPUã€è½¯ä¸­æ–­å’Œç¡¬ä¸­æ–­ç­‰ã€‚</p><ul>
<li>
<p>ç”¨æˆ· CPU ä½¿ç”¨ç‡ï¼ŒåŒ…æ‹¬ç”¨æˆ·æ€ CPU ä½¿ç”¨ç‡ï¼ˆuserï¼‰å’Œä½ä¼˜å…ˆçº§ç”¨æˆ·æ€ CPU ä½¿ç”¨ç‡ï¼ˆniceï¼‰ï¼Œè¡¨ç¤º CPU åœ¨ç”¨æˆ·æ€è¿è¡Œçš„æ—¶é—´ç™¾åˆ†æ¯”ã€‚ç”¨æˆ· CPU ä½¿ç”¨ç‡é«˜ï¼Œé€šå¸¸è¯´æ˜æœ‰åº”ç”¨ç¨‹åºæ¯”è¾ƒç¹å¿™ã€‚</p>
</li>
<li>
<p>ç³»ç»Ÿ CPU ä½¿ç”¨ç‡ï¼Œè¡¨ç¤º CPU åœ¨å†…æ ¸æ€è¿è¡Œçš„æ—¶é—´ç™¾åˆ†æ¯”ï¼ˆä¸åŒ…æ‹¬ä¸­æ–­ï¼‰ã€‚ç³»ç»Ÿ CPU ä½¿ç”¨ç‡é«˜ï¼Œè¯´æ˜å†…æ ¸æ¯”è¾ƒç¹å¿™ã€‚</p>
</li>
<li>
<p>ç­‰å¾… I/O çš„CPUä½¿ç”¨ç‡ï¼Œé€šå¸¸ä¹Ÿç§°ä¸ºiowaitï¼Œè¡¨ç¤ºç­‰å¾… I/O çš„æ—¶é—´ç™¾åˆ†æ¯”ã€‚iowait é«˜ï¼Œé€šå¸¸è¯´æ˜ç³»ç»Ÿä¸ç¡¬ä»¶è®¾å¤‡çš„ I/O äº¤äº’æ—¶é—´æ¯”è¾ƒé•¿ã€‚</p>
</li>
<li>
<p>è½¯ä¸­æ–­å’Œç¡¬ä¸­æ–­çš„ CPU ä½¿ç”¨ç‡ï¼Œåˆ†åˆ«è¡¨ç¤ºå†…æ ¸è°ƒç”¨è½¯ä¸­æ–­å¤„ç†ç¨‹åºã€ç¡¬ä¸­æ–­å¤„ç†ç¨‹åºçš„æ—¶é—´ç™¾åˆ†æ¯”ã€‚å®ƒä»¬çš„ä½¿ç”¨ç‡é«˜ï¼Œé€šå¸¸è¯´æ˜ç³»ç»Ÿå‘ç”Ÿäº†å¤§é‡çš„ä¸­æ–­ã€‚</p>
</li>
<li>
<p>é™¤äº†ä¸Šé¢è¿™äº›ï¼Œè¿˜æœ‰åœ¨è™šæ‹ŸåŒ–ç¯å¢ƒä¸­ä¼šç”¨åˆ°çš„çªƒå– CPU ä½¿ç”¨ç‡ï¼ˆstealï¼‰å’Œå®¢æˆ· CPU ä½¿ç”¨ç‡ï¼ˆguestï¼‰ï¼Œåˆ†åˆ«è¡¨ç¤ºè¢«å…¶ä»–è™šæ‹Ÿæœºå ç”¨çš„ CPU æ—¶é—´ç™¾åˆ†æ¯”ï¼Œå’Œè¿è¡Œå®¢æˆ·è™šæ‹Ÿæœºçš„ CPU æ—¶é—´ç™¾åˆ†æ¯”ã€‚</p>
</li>
</ul><!-- [[[read_end]]] --><p><strong>ç¬¬äºŒä¸ªæ¯”è¾ƒå®¹æ˜“æƒ³åˆ°çš„ï¼Œåº”è¯¥æ˜¯å¹³å‡è´Ÿè½½ï¼ˆLoad Averageï¼‰</strong>ï¼Œä¹Ÿå°±æ˜¯ç³»ç»Ÿçš„å¹³å‡æ´»è·ƒè¿›ç¨‹æ•°ã€‚å®ƒååº”äº†ç³»ç»Ÿçš„æ•´ä½“è´Ÿè½½æƒ…å†µï¼Œä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªæ•°å€¼ï¼Œåˆ†åˆ«æŒ‡è¿‡å»1åˆ†é’Ÿã€è¿‡å»5åˆ†é’Ÿå’Œè¿‡å»15åˆ†é’Ÿçš„å¹³å‡è´Ÿè½½ã€‚</p><p>ç†æƒ³æƒ…å†µä¸‹ï¼Œå¹³å‡è´Ÿè½½ç­‰äºé€»è¾‘ CPU ä¸ªæ•°ï¼Œè¿™è¡¨ç¤ºæ¯ä¸ª CPU éƒ½æ°å¥½è¢«å……åˆ†åˆ©ç”¨ã€‚å¦‚æœå¹³å‡è´Ÿè½½å¤§äºé€»è¾‘CPUä¸ªæ•°ï¼Œå°±è¡¨ç¤ºè´Ÿè½½æ¯”è¾ƒé‡äº†ã€‚</p><p><strong>ç¬¬ä¸‰ä¸ªï¼Œä¹Ÿæ˜¯åœ¨ä¸“æ å­¦ä¹ å‰ä½ ä¼°è®¡ä¸å¤ªä¼šæ³¨æ„åˆ°çš„ï¼Œè¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢</strong>ï¼ŒåŒ…æ‹¬ï¼š</p><ul>
<li>
<p>æ— æ³•è·å–èµ„æºè€Œå¯¼è‡´çš„è‡ªæ„¿ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼›</p>
</li>
<li>
<p>è¢«ç³»ç»Ÿå¼ºåˆ¶è°ƒåº¦å¯¼è‡´çš„éè‡ªæ„¿ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</p>
</li>
</ul><p>ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œæœ¬èº«æ˜¯ä¿è¯ Linux æ­£å¸¸è¿è¡Œçš„ä¸€é¡¹æ ¸å¿ƒåŠŸèƒ½ã€‚ä½†è¿‡å¤šçš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œä¼šå°†åŸæœ¬è¿è¡Œè¿›ç¨‹çš„ CPU æ—¶é—´ï¼Œæ¶ˆè€—åœ¨å¯„å­˜å™¨ã€å†…æ ¸æ ˆä»¥åŠè™šæ‹Ÿå†…å­˜ç­‰æ•°æ®çš„ä¿å­˜å’Œæ¢å¤ä¸Šï¼Œç¼©çŸ­è¿›ç¨‹çœŸæ­£è¿è¡Œçš„æ—¶é—´ï¼Œæˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚</p><p>é™¤äº†ä¸Šé¢å‡ ç§ï¼Œ<strong>è¿˜æœ‰ä¸€ä¸ªæŒ‡æ ‡ï¼ŒCPUç¼“å­˜çš„å‘½ä¸­ç‡</strong>ã€‚ç”±äºCPUå‘å±•çš„é€Ÿåº¦è¿œå¿«äºå†…å­˜çš„å‘å±•ï¼ŒCPUçš„å¤„ç†é€Ÿåº¦å°±æ¯”å†…å­˜çš„è®¿é—®é€Ÿåº¦å¿«å¾—å¤šã€‚è¿™æ ·ï¼ŒCPUåœ¨è®¿é—®å†…å­˜çš„æ—¶å€™ï¼Œå…ä¸äº†è¦ç­‰å¾…å†…å­˜çš„å“åº”ã€‚ä¸ºäº†åè°ƒè¿™ä¸¤è€…å·¨å¤§çš„æ€§èƒ½å·®è·ï¼ŒCPUç¼“å­˜ï¼ˆé€šå¸¸æ˜¯å¤šçº§ç¼“å­˜ï¼‰å°±å‡ºç°äº†ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/aa/33/aa08816b60e453b52b5fae5e63549e33.png" alt=""></p><p>å°±åƒä¸Šé¢è¿™å¼ å›¾æ˜¾ç¤ºçš„ï¼ŒCPUç¼“å­˜çš„é€Ÿåº¦ä»‹äºCPUå’Œå†…å­˜ä¹‹é—´ï¼Œç¼“å­˜çš„æ˜¯çƒ­ç‚¹çš„å†…å­˜æ•°æ®ã€‚æ ¹æ®ä¸æ–­å¢é•¿çš„çƒ­ç‚¹æ•°æ®ï¼Œè¿™äº›ç¼“å­˜æŒ‰ç…§å¤§å°ä¸åŒåˆ†ä¸º L1ã€L2ã€L3 ç­‰ä¸‰çº§ç¼“å­˜ï¼Œå…¶ä¸­ L1 å’Œ L2 å¸¸ç”¨åœ¨å•æ ¸ä¸­ï¼Œ L3 åˆ™ç”¨åœ¨å¤šæ ¸ä¸­ã€‚</p><p>ä» L1 åˆ° L3ï¼Œä¸‰çº§ç¼“å­˜çš„å¤§å°ä¾æ¬¡å¢å¤§ï¼Œç›¸åº”çš„ï¼Œæ€§èƒ½ä¾æ¬¡é™ä½ï¼ˆå½“ç„¶æ¯”å†…å­˜è¿˜æ˜¯å¥½å¾—å¤šï¼‰ã€‚è€Œå®ƒä»¬çš„å‘½ä¸­ç‡ï¼Œè¡¡é‡çš„æ˜¯CPUç¼“å­˜çš„å¤ç”¨æƒ…å†µï¼Œå‘½ä¸­ç‡è¶Šé«˜ï¼Œåˆ™è¡¨ç¤ºæ€§èƒ½è¶Šå¥½ã€‚</p><p>è¿™äº›æŒ‡æ ‡éƒ½å¾ˆæœ‰ç”¨ï¼Œéœ€è¦æˆ‘ä»¬ç†Ÿç»ƒæŒæ¡ï¼Œæ‰€ä»¥æˆ‘æ€»ç»“æˆäº†ä¸€å¼ å›¾ï¼Œå¸®ä½ åˆ†ç±»å’Œè®°å¿†ã€‚ä½ å¯ä»¥ä¿å­˜æ‰“å°ä¸‹æ¥ï¼Œéšæ—¶æŸ¥çœ‹å¤ä¹ ï¼Œä¹Ÿå¯ä»¥å½“æˆCPUæ€§èƒ½åˆ†æçš„â€œæŒ‡æ ‡ç­›é€‰â€æ¸…å•ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/1e/07/1e66612e0022cd6c17847f3ab6989007.png" alt=""></p><h2>æ€§èƒ½å·¥å…·</h2><p>æŒæ¡äº† CPU çš„æ€§èƒ½æŒ‡æ ‡ï¼Œæˆ‘ä»¬è¿˜éœ€è¦çŸ¥é“ï¼Œæ€æ ·å»è·å–è¿™äº›æŒ‡æ ‡ï¼Œä¹Ÿå°±æ˜¯å·¥å…·çš„ä½¿ç”¨ã€‚</p><p>ä½ è¿˜è®°å¾—å‰é¢æ¡ˆä¾‹éƒ½ç”¨äº†å“ªäº›å·¥å…·å—ï¼Ÿè¿™é‡Œæˆ‘ä»¬ä¹Ÿä¸€èµ·å›é¡¾ä¸€ä¸‹CPUæ€§èƒ½å·¥å…·ã€‚</p><p>é¦–å…ˆï¼Œå¹³å‡è´Ÿè½½çš„æ¡ˆä¾‹ã€‚æˆ‘ä»¬å…ˆç”¨ uptimeï¼Œ æŸ¥çœ‹äº†ç³»ç»Ÿçš„å¹³å‡è´Ÿè½½ï¼›è€Œåœ¨å¹³å‡è´Ÿè½½å‡é«˜åï¼Œåˆç”¨ mpstat å’Œ pidstat  ï¼Œåˆ†åˆ«è§‚å¯Ÿäº†æ¯ä¸ª CPU å’Œæ¯ä¸ªè¿›ç¨‹ CPU çš„ä½¿ç”¨æƒ…å†µï¼Œè¿›è€Œæ‰¾å‡ºäº†å¯¼è‡´å¹³å‡è´Ÿè½½å‡é«˜çš„è¿›ç¨‹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„å‹æµ‹å·¥å…· stressã€‚</p><p>ç¬¬äºŒä¸ªï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ¡ˆä¾‹ã€‚æˆ‘ä»¬å…ˆç”¨ vmstat  ï¼ŒæŸ¥çœ‹äº†ç³»ç»Ÿçš„ä¸Šä¸‹æ–‡åˆ‡æ¢æ¬¡æ•°å’Œä¸­æ–­æ¬¡æ•°ï¼›ç„¶åé€šè¿‡ pidstat ï¼Œè§‚å¯Ÿäº†è¿›ç¨‹çš„è‡ªæ„¿ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œéè‡ªæ„¿ä¸Šä¸‹æ–‡åˆ‡æ¢æƒ…å†µï¼›æœ€åé€šè¿‡ pidstat ï¼Œè§‚å¯Ÿäº†çº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢æƒ…å†µï¼Œæ‰¾å‡ºäº†ä¸Šä¸‹æ–‡åˆ‡æ¢æ¬¡æ•°å¢å¤šçš„æ ¹æºï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„åŸºå‡†æµ‹è¯•å·¥å…· sysbenchã€‚</p><p>ç¬¬ä¸‰ä¸ªï¼Œè¿›ç¨‹ CPU ä½¿ç”¨ç‡å‡é«˜çš„æ¡ˆä¾‹ã€‚æˆ‘ä»¬å…ˆç”¨ top  ï¼ŒæŸ¥çœ‹äº†ç³»ç»Ÿå’Œè¿›ç¨‹çš„CPUä½¿ç”¨æƒ…å†µï¼Œå‘ç° CPU ä½¿ç”¨ç‡å‡é«˜çš„è¿›ç¨‹æ˜¯ php-fpmï¼›å†ç”¨ perf top  ï¼Œè§‚å¯Ÿ php-fpm çš„è°ƒç”¨é“¾ï¼Œæœ€ç»ˆæ‰¾å‡º CPU å‡é«˜çš„æ ¹æºï¼Œä¹Ÿå°±æ˜¯åº“å‡½æ•° sqrt() ã€‚</p><p>ç¬¬å››ä¸ªï¼Œç³»ç»Ÿçš„ CPU ä½¿ç”¨ç‡å‡é«˜çš„æ¡ˆä¾‹ã€‚æˆ‘ä»¬å…ˆç”¨  top è§‚å¯Ÿåˆ°äº†ç³»ç»ŸCPUå‡é«˜ï¼Œä½†é€šè¿‡ top å’Œ pidstat  ï¼Œå´æ‰¾ä¸å‡ºé«˜ CPU ä½¿ç”¨ç‡çš„è¿›ç¨‹ã€‚äºæ˜¯ï¼Œæˆ‘ä»¬é‡æ–°å®¡è§† top çš„è¾“å‡ºï¼Œåˆä» CPU ä½¿ç”¨ç‡ä¸é«˜ä½†å¤„äº Running çŠ¶æ€çš„è¿›ç¨‹å…¥æ‰‹ï¼Œæ‰¾å‡ºäº†å¯ç–‘ä¹‹å¤„ï¼Œæœ€ç»ˆé€šè¿‡  perf record å’Œ perf report ï¼Œå‘ç°åŸæ¥æ˜¯çŸ­æ—¶è¿›ç¨‹åœ¨æ£é¬¼ã€‚</p><p>å¦å¤–ï¼Œå¯¹äºçŸ­æ—¶è¿›ç¨‹ï¼Œæˆ‘è¿˜ä»‹ç»äº†ä¸€ä¸ªä¸“é—¨çš„å·¥å…· execsnoopï¼Œå®ƒå¯ä»¥å®æ—¶ç›‘æ§è¿›ç¨‹è°ƒç”¨çš„å¤–éƒ¨å‘½ä»¤ã€‚</p><p>ç¬¬äº”ä¸ªï¼Œä¸å¯ä¸­æ–­è¿›ç¨‹å’Œåƒµå°¸è¿›ç¨‹çš„æ¡ˆä¾‹ã€‚æˆ‘ä»¬å…ˆç”¨ top è§‚å¯Ÿåˆ°äº† iowait å‡é«˜çš„é—®é¢˜ï¼Œå¹¶å‘ç°äº†å¤§é‡çš„ä¸å¯ä¸­æ–­è¿›ç¨‹å’Œåƒµå°¸è¿›ç¨‹ï¼›æ¥ç€æˆ‘ä»¬ç”¨ dstat å‘ç°æ˜¯è¿™æ˜¯ç”±ç£ç›˜è¯»å¯¼è‡´çš„ï¼Œäºæ˜¯åˆé€šè¿‡ pidstat æ‰¾å‡ºäº†ç›¸å…³çš„è¿›ç¨‹ã€‚ä½†æˆ‘ä»¬ç”¨ strace æŸ¥çœ‹è¿›ç¨‹ç³»ç»Ÿè°ƒç”¨å´å¤±è´¥äº†ï¼Œæœ€ç»ˆè¿˜æ˜¯ç”¨  perf åˆ†æè¿›ç¨‹è°ƒç”¨é“¾ï¼Œæ‰å‘ç°æ ¹æºåœ¨äºç£ç›˜ç›´æ¥ I/O ã€‚</p><p>æœ€åä¸€ä¸ªï¼Œè½¯ä¸­æ–­çš„æ¡ˆä¾‹ã€‚æˆ‘ä»¬é€šè¿‡ top è§‚å¯Ÿåˆ°ï¼Œç³»ç»Ÿçš„è½¯ä¸­æ–­ CPU ä½¿ç”¨ç‡å‡é«˜ï¼›æ¥ç€æŸ¥çœ‹ /proc/softirqsï¼Œ æ‰¾åˆ°äº†å‡ ç§å˜åŒ–é€Ÿç‡è¾ƒå¿«çš„è½¯ä¸­æ–­ï¼›ç„¶åé€šè¿‡ sar å‘½ä»¤ï¼Œå‘ç°æ˜¯ç½‘ç»œå°åŒ…çš„é—®é¢˜ï¼Œæœ€åå†ç”¨  tcpdump  ï¼Œæ‰¾å‡ºç½‘ç»œå¸§çš„ç±»å‹å’Œæ¥æºï¼Œç¡®å®šæ˜¯ä¸€ä¸ª SYN FLOOD æ”»å‡»å¯¼è‡´çš„ã€‚</p><p>åˆ°è¿™é‡Œï¼Œä¼°è®¡ä½ å·²ç»æ™•äº†å§ï¼ŒåŸæ¥çŸ­çŸ­å‡ ä¸ªæ¡ˆä¾‹ï¼Œæˆ‘ä»¬å·²ç»ç”¨è¿‡åå‡ ç§ CPU æ€§èƒ½å·¥å…·äº†ï¼Œè€Œä¸”æ¯ç§å·¥å…·çš„é€‚ç”¨åœºæ™¯è¿˜ä¸åŒå‘¢ï¼è¿™ä¹ˆå¤šçš„å·¥å…·è¦æ€ä¹ˆåŒºåˆ†å‘¢ï¼Ÿåœ¨å®é™…çš„æ€§èƒ½åˆ†æä¸­ï¼Œåˆè¯¥æ€ä¹ˆé€‰æ‹©å‘¢ï¼Ÿ</p><p>æˆ‘çš„ç»éªŒæ˜¯ï¼Œä»ä¸¤ä¸ªä¸åŒçš„ç»´åº¦æ¥ç†è§£å®ƒä»¬ï¼Œåšåˆ°æ´»å­¦æ´»ç”¨ã€‚</p><h2>æ´»å­¦æ´»ç”¨ï¼ŒæŠŠæ€§èƒ½æŒ‡æ ‡å’Œæ€§èƒ½å·¥å…·è”ç³»èµ·æ¥</h2><p><strong>ç¬¬ä¸€ä¸ªç»´åº¦ï¼Œä» CPU çš„æ€§èƒ½æŒ‡æ ‡å‡ºå‘ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä½ è¦æŸ¥çœ‹æŸä¸ªæ€§èƒ½æŒ‡æ ‡æ—¶ï¼Œè¦æ¸…æ¥šçŸ¥é“å“ªäº›å·¥å…·å¯ä»¥åšåˆ°</strong>ã€‚</p><p>æ ¹æ®ä¸åŒçš„æ€§èƒ½æŒ‡æ ‡ï¼Œå¯¹æä¾›æŒ‡æ ‡çš„æ€§èƒ½å·¥å…·è¿›è¡Œåˆ†ç±»å’Œç†è§£ã€‚è¿™æ ·ï¼Œåœ¨å®é™…æ’æŸ¥æ€§èƒ½é—®é¢˜æ—¶ï¼Œä½ å°±å¯ä»¥æ¸…æ¥šçŸ¥é“ï¼Œä»€ä¹ˆå·¥å…·å¯ä»¥æä¾›ä½ æƒ³è¦çš„æŒ‡æ ‡ï¼Œè€Œä¸æ˜¯æ¯«æ— æ ¹æ®åœ°æŒ¨ä¸ªå°è¯•ï¼Œæ’è¿æ°”ã€‚</p><p>å…¶å®ï¼Œæˆ‘åœ¨å‰é¢çš„æ¡ˆä¾‹ä¸­å·²ç»å¤šæ¬¡ç”¨åˆ°äº†è¿™ä¸ªæ€è·¯ã€‚æ¯”å¦‚ç”¨ top å‘ç°äº†è½¯ä¸­æ–­ CPU ä½¿ç”¨ç‡é«˜åï¼Œä¸‹ä¸€æ­¥è‡ªç„¶å°±æƒ³çŸ¥é“å…·ä½“çš„è½¯ä¸­æ–­ç±»å‹ã€‚é‚£åœ¨å“ªé‡Œå¯ä»¥è§‚å¯Ÿå„ç±»è½¯ä¸­æ–­çš„è¿è¡Œæƒ…å†µå‘¢ï¼Ÿå½“ç„¶æ˜¯ proc æ–‡ä»¶ç³»ç»Ÿä¸­çš„ /proc/softirqs è¿™ä¸ªæ–‡ä»¶ã€‚</p><p>ç´§æ¥ç€ï¼Œæ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬æ‰¾åˆ°çš„è½¯ä¸­æ–­ç±»å‹æ˜¯ç½‘ç»œæ¥æ”¶ï¼Œé‚£å°±è¦ç»§ç»­å¾€ç½‘ç»œæ¥æ”¶æ–¹å‘æ€è€ƒã€‚ç³»ç»Ÿçš„ç½‘ç»œæ¥æ”¶æƒ…å†µæ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿä»€ä¹ˆå·¥å…·å¯ä»¥æŸ¥åˆ°ç½‘ç»œæ¥æ”¶æƒ…å†µå‘¢ï¼Ÿåœ¨æˆ‘ä»¬æ¡ˆä¾‹ä¸­ï¼Œç”¨çš„æ­£æ˜¯ dstatã€‚</p><p>è™½ç„¶ä½ ä¸éœ€è¦æŠŠæ‰€æœ‰å·¥å…·èƒŒä¸‹æ¥ï¼Œä½†å¦‚æœèƒ½ç†è§£æ¯ä¸ªæŒ‡æ ‡å¯¹åº”çš„å·¥å…·çš„ç‰¹æ€§ï¼Œä¸€å®šæ›´é«˜æ•ˆã€æ›´çµæ´»åœ°ä½¿ç”¨ã€‚è¿™é‡Œï¼Œæˆ‘æŠŠæä¾› CPU æ€§èƒ½æŒ‡æ ‡çš„å·¥å…·åšæˆäº†ä¸€ä¸ªè¡¨æ ¼ï¼Œæ–¹ä¾¿ä½ æ¢³ç†å…³ç³»å’Œç†è§£è®°å¿†ï¼Œå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å½“æˆä¸€ä¸ªâ€œæŒ‡æ ‡å·¥å…·â€æŒ‡å—æ¥ä½¿ç”¨ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/59/ec/596397e1d6335d2990f70427ad4b14ec.png" alt=""></p><p>ä¸‹é¢ï¼Œæˆ‘ä»¬å†æ¥çœ‹ç¬¬äºŒä¸ªç»´åº¦ã€‚</p><p><strong>ç¬¬äºŒä¸ªç»´åº¦ï¼Œä»å·¥å…·å‡ºå‘ã€‚ä¹Ÿå°±æ˜¯å½“ä½ å·²ç»å®‰è£…äº†æŸä¸ªå·¥å…·åï¼Œè¦çŸ¥é“è¿™ä¸ªå·¥å…·èƒ½æä¾›å“ªäº›æŒ‡æ ‡</strong>ã€‚</p><p>è¿™åœ¨å®é™…ç¯å¢ƒç‰¹åˆ«æ˜¯ç”Ÿäº§ç¯å¢ƒä¸­ä¹Ÿæ˜¯éå¸¸é‡è¦çš„ï¼Œå› ä¸ºå¾ˆå¤šæƒ…å†µä¸‹ï¼Œä½ å¹¶æ²¡æœ‰æƒé™å®‰è£…æ–°çš„å·¥å…·åŒ…ï¼Œåªèƒ½æœ€å¤§åŒ–åœ°åˆ©ç”¨å¥½ç³»ç»Ÿä¸­å·²ç»å®‰è£…å¥½çš„å·¥å…·ï¼Œè¿™å°±éœ€è¦ä½ å¯¹å®ƒä»¬æœ‰è¶³å¤Ÿçš„äº†è§£ã€‚</p><p>å…·ä½“åˆ°æ¯ä¸ªå·¥å…·çš„ä½¿ç”¨æ–¹æ³•ï¼Œä¸€èˆ¬éƒ½æ”¯æŒä¸°å¯Œçš„é…ç½®é€‰é¡¹ã€‚ä¸è¿‡ä¸ç”¨æ‹…å¿ƒï¼Œè¿™äº›é…ç½®é€‰é¡¹å¹¶ä¸ç”¨èƒŒä¸‹æ¥ã€‚ä½ åªè¦çŸ¥é“æœ‰å“ªäº›å·¥å…·ã€ä»¥åŠè¿™äº›å·¥å…·çš„åŸºæœ¬åŠŸèƒ½æ˜¯ä»€ä¹ˆå°±å¤Ÿäº†ã€‚çœŸæ­£è¦ç”¨åˆ°çš„æ—¶å€™ï¼Œ  é€šè¿‡man å‘½ä»¤ï¼ŒæŸ¥å®ƒä»¬çš„ä½¿ç”¨æ‰‹å†Œå°±å¯ä»¥äº†ã€‚</p><p>åŒæ ·çš„ï¼Œæˆ‘ä¹Ÿå°†è¿™äº›å¸¸ç”¨å·¥å…·æ±‡æ€»æˆäº†ä¸€ä¸ªè¡¨æ ¼ï¼Œæ–¹ä¾¿ä½ åŒºåˆ†å’Œç†è§£ï¼Œè‡ªç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å½“æˆä¸€ä¸ªâ€œå·¥å…·æŒ‡æ ‡â€æŒ‡å—ä½¿ç”¨ï¼Œéœ€è¦æ—¶æŸ¥è¡¨å³å¯ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/b0/ca/b0c67a7196f5ca4cc58f14f959a364ca.png" alt=""></p><h2>å¦‚ä½•è¿…é€Ÿåˆ†æCPUçš„æ€§èƒ½ç“¶é¢ˆ</h2><p>æˆ‘ç›¸ä¿¡åˆ°è¿™ä¸€æ­¥ï¼Œä½ å¯¹ CPU çš„æ€§èƒ½æŒ‡æ ‡å·²ç»éå¸¸ç†Ÿæ‚‰ï¼Œä¹Ÿæ¸…æ¥šæ¯ç§æ€§èƒ½æŒ‡æ ‡åˆ†åˆ«èƒ½ç”¨ä»€ä¹ˆå·¥å…·æ¥è·å–ã€‚</p><p>é‚£æ˜¯ä¸æ˜¯è¯´ï¼Œæ¯æ¬¡ç¢°åˆ° CPU çš„æ€§èƒ½é—®é¢˜ï¼Œä½ éƒ½è¦æŠŠä¸Šé¢è¿™äº›å·¥å…·å…¨è·‘ä¸€éï¼Œç„¶åå†æŠŠæ‰€æœ‰çš„ CPU æ€§èƒ½æŒ‡æ ‡å…¨åˆ†æä¸€éå‘¢ï¼Ÿ</p><p>ä½ ä¼°è®¡è§‰å¾—è¿™ç§ç®€å•æŸ¥æ‰¾çš„æ–¹å¼ï¼Œå°±åƒæ˜¯åœ¨å‚»æ‰¾ã€‚ä¸è¿‡ï¼Œåˆ«ç¬‘è¯ï¼Œå› ä¸ºæœ€æ—©çš„æ—¶å€™æˆ‘å°±æ˜¯è¿™ä¹ˆåšçš„ã€‚æŠŠæ‰€æœ‰çš„æŒ‡æ ‡éƒ½æŸ¥å‡ºæ¥å†ç»Ÿä¸€åˆ†æï¼Œå½“ç„¶æ˜¯å¯ä»¥çš„ï¼Œä¹Ÿå¾ˆå¯èƒ½æ‰¾åˆ°ç³»ç»Ÿçš„æ½œåœ¨ç“¶é¢ˆã€‚</p><p>ä½†æ˜¯è¿™ç§æ–¹æ³•çš„æ•ˆç‡çœŸçš„å¤ªä½äº†ï¼è€—æ—¶è€—åŠ›ä¸è¯´ï¼Œåœ¨åºå¤§çš„æŒ‡æ ‡ä½“ç³»é¢å‰ï¼Œä½ ä¸€ä¸å°å¿ƒå¯èƒ½å°±å¿½ç•¥äº†æŸä¸ªç»†èŠ‚ï¼Œå¯¼è‡´ç™½å¹²ä¸€åœºã€‚æˆ‘å°±åƒè¿‡å¥½å¤šæ¬¡è¿™æ ·çš„è‹¦ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éƒ½å¸Œæœ›å°½å¯èƒ½<strong>å¿«</strong>åœ°å®šä½ç³»ç»Ÿçš„ç“¶é¢ˆï¼Œç„¶åå°½å¯èƒ½<strong>å¿«</strong>åœ°ä¼˜åŒ–æ€§èƒ½ï¼Œä¹Ÿå°±æ˜¯è¦åˆå¿«åˆå‡†åœ°è§£å†³æ€§èƒ½é—®é¢˜ã€‚</p><p>é‚£æœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•ï¼Œå¯ä»¥åˆå¿«åˆå‡†æ‰¾å‡ºç³»ç»Ÿç“¶é¢ˆå‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚</p><p>è™½ç„¶ CPU çš„æ€§èƒ½æŒ‡æ ‡æ¯”è¾ƒå¤šï¼Œä½†è¦çŸ¥é“ï¼Œæ—¢ç„¶éƒ½æ˜¯æè¿°ç³»ç»Ÿçš„CPUæ€§èƒ½ï¼Œå®ƒä»¬å°±ä¸ä¼šæ˜¯å®Œå…¨å­¤ç«‹çš„ï¼Œå¾ˆå¤šæŒ‡æ ‡é—´éƒ½æœ‰ä¸€å®šçš„å…³è”ã€‚<strong>æƒ³å¼„æ¸…æ¥šæ€§èƒ½æŒ‡æ ‡çš„å…³è”æ€§ï¼Œå°±è¦é€šæ™“æ¯ç§æ€§èƒ½æŒ‡æ ‡çš„å·¥ä½œåŸç†</strong>ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘åœ¨ä»‹ç»æ¯ä¸ªæ€§èƒ½æŒ‡æ ‡æ—¶ï¼Œéƒ½è¦ç©¿æ’è®²è§£ç›¸å…³çš„ç³»ç»ŸåŸç†ï¼Œå¸Œæœ›ä½ èƒ½è®°ä½è¿™ä¸€ç‚¹ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œç”¨æˆ· CPU ä½¿ç”¨ç‡é«˜ï¼Œæˆ‘ä»¬åº”è¯¥å»æ’æŸ¥è¿›ç¨‹çš„ç”¨æˆ·æ€è€Œä¸æ˜¯å†…æ ¸æ€ã€‚å› ä¸ºç”¨æˆ· CPU ä½¿ç”¨ç‡åæ˜ çš„å°±æ˜¯ç”¨æˆ·æ€çš„ CPU ä½¿ç”¨æƒ…å†µï¼Œè€Œå†…æ ¸æ€çš„ CPU ä½¿ç”¨æƒ…å†µåªä¼šåæ˜ åˆ°ç³»ç»Ÿ CPU ä½¿ç”¨ç‡ä¸Šã€‚</p><p>ä½ çœ‹ï¼Œæœ‰è¿™æ ·çš„åŸºæœ¬è®¤è¯†ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç¼©å°æ’æŸ¥çš„èŒƒå›´ï¼Œçœæ—¶çœåŠ›ã€‚</p><p>æ‰€ä»¥ï¼Œä¸ºäº†<strong>ç¼©å°æ’æŸ¥èŒƒå›´ï¼Œæˆ‘é€šå¸¸ä¼šå…ˆè¿è¡Œå‡ ä¸ªæ”¯æŒæŒ‡æ ‡è¾ƒå¤šçš„å·¥å…·ï¼Œå¦‚ topã€vmstat å’Œ pidstat</strong> ã€‚ä¸ºä»€ä¹ˆæ˜¯è¿™ä¸‰ä¸ªå·¥å…·å‘¢ï¼Ÿä»”ç»†çœ‹çœ‹ä¸‹é¢è¿™å¼ å›¾ï¼Œä½ å°±æ¸…æ¥šäº†ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/7a/17/7a445960a4bc0a58a02e1bc75648aa17.png" alt=""></p><p>è¿™å¼ å›¾é‡Œï¼Œæˆ‘åˆ—å‡ºäº† topã€vmstat å’Œ pidstat åˆ†åˆ«æä¾›çš„é‡è¦çš„ CPU æŒ‡æ ‡ï¼Œå¹¶ç”¨è™šçº¿è¡¨ç¤ºå…³è”å…³ç³»ï¼Œå¯¹åº”å‡ºäº†æ€§èƒ½åˆ†æä¸‹ä¸€æ­¥çš„æ–¹å‘ã€‚</p><p>é€šè¿‡è¿™å¼ å›¾ä½ å¯ä»¥å‘ç°ï¼Œè¿™ä¸‰ä¸ªå‘½ä»¤ï¼Œå‡ ä¹åŒ…å«äº†æ‰€æœ‰é‡è¦çš„ CPU æ€§èƒ½æŒ‡æ ‡ï¼Œæ¯”å¦‚ï¼š</p><ul>
<li>
<p>ä» top çš„è¾“å‡ºå¯ä»¥å¾—åˆ°å„ç§ CPU ä½¿ç”¨ç‡ä»¥åŠåƒµå°¸è¿›ç¨‹å’Œå¹³å‡è´Ÿè½½ç­‰ä¿¡æ¯ã€‚</p>
</li>
<li>
<p>ä» vmstat çš„è¾“å‡ºå¯ä»¥å¾—åˆ°ä¸Šä¸‹æ–‡åˆ‡æ¢æ¬¡æ•°ã€ä¸­æ–­æ¬¡æ•°ã€è¿è¡ŒçŠ¶æ€å’Œä¸å¯ä¸­æ–­çŠ¶æ€çš„è¿›ç¨‹æ•°ã€‚</p>
</li>
<li>
<p>ä» pidstat çš„è¾“å‡ºå¯ä»¥å¾—åˆ°è¿›ç¨‹çš„ç”¨æˆ· CPU ä½¿ç”¨ç‡ã€ç³»ç»Ÿ CPU ä½¿ç”¨ç‡ã€ä»¥åŠè‡ªæ„¿ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œéè‡ªæ„¿ä¸Šä¸‹æ–‡åˆ‡æ¢æƒ…å†µã€‚</p>
</li>
</ul><p>å¦å¤–ï¼Œè¿™ä¸‰ä¸ªå·¥å…·è¾“å‡ºçš„å¾ˆå¤šæŒ‡æ ‡æ˜¯ç›¸äº’å…³è”çš„ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä¹Ÿç”¨è™šçº¿è¡¨ç¤ºäº†å®ƒä»¬çš„å…³è”å…³ç³»ï¼Œä¸¾å‡ ä¸ªä¾‹å­ä½ å¯èƒ½ä¼šæ›´å®¹æ˜“ç†è§£ã€‚</p><p>ç¬¬ä¸€ä¸ªä¾‹å­ï¼Œpidstat è¾“å‡ºçš„è¿›ç¨‹ç”¨æˆ· CPU ä½¿ç”¨ç‡å‡é«˜ï¼Œä¼šå¯¼è‡´ top è¾“å‡ºçš„ç”¨æˆ· CPU ä½¿ç”¨ç‡å‡é«˜ã€‚æ‰€ä»¥ï¼Œå½“å‘ç° top è¾“å‡ºçš„ç”¨æˆ· CPU ä½¿ç”¨ç‡æœ‰é—®é¢˜æ—¶ï¼Œå¯ä»¥è·Ÿ pidstat çš„è¾“å‡ºåšå¯¹æ¯”ï¼Œè§‚å¯Ÿæ˜¯å¦æ˜¯æŸä¸ªè¿›ç¨‹å¯¼è‡´çš„é—®é¢˜ã€‚</p><p>è€Œæ‰¾å‡ºå¯¼è‡´æ€§èƒ½é—®é¢˜çš„è¿›ç¨‹åï¼Œå°±è¦ç”¨è¿›ç¨‹åˆ†æå·¥å…·æ¥åˆ†æè¿›ç¨‹çš„è¡Œä¸ºï¼Œæ¯”å¦‚ä½¿ç”¨ strace åˆ†æç³»ç»Ÿè°ƒç”¨æƒ…å†µï¼Œä»¥åŠä½¿ç”¨ perf åˆ†æè°ƒç”¨é“¾ä¸­å„çº§å‡½æ•°çš„æ‰§è¡Œæƒ…å†µã€‚</p><p>ç¬¬äºŒä¸ªä¾‹å­ï¼Œtop è¾“å‡ºçš„å¹³å‡è´Ÿè½½å‡é«˜ï¼Œå¯ä»¥è·Ÿ vmstat è¾“å‡ºçš„è¿è¡ŒçŠ¶æ€å’Œä¸å¯ä¸­æ–­çŠ¶æ€çš„è¿›ç¨‹æ•°åšå¯¹æ¯”ï¼Œè§‚å¯Ÿæ˜¯å“ªç§è¿›ç¨‹å¯¼è‡´çš„è´Ÿè½½å‡é«˜ã€‚</p><ul>
<li>
<p>å¦‚æœæ˜¯ä¸å¯ä¸­æ–­è¿›ç¨‹æ•°å¢å¤šäº†ï¼Œé‚£ä¹ˆå°±éœ€è¦åš I/O çš„åˆ†æï¼Œä¹Ÿå°±æ˜¯ç”¨ dstat æˆ– sar ç­‰å·¥å…·ï¼Œè¿›ä¸€æ­¥åˆ†æ I/O çš„æƒ…å†µã€‚</p>
</li>
<li>
<p>å¦‚æœæ˜¯è¿è¡ŒçŠ¶æ€è¿›ç¨‹æ•°å¢å¤šäº†ï¼Œé‚£å°±éœ€è¦å›åˆ° top å’Œ pidstatï¼Œæ‰¾å‡ºè¿™äº›å¤„äºè¿è¡ŒçŠ¶æ€çš„åˆ°åº•æ˜¯ä»€ä¹ˆè¿›ç¨‹ï¼Œç„¶åå†ç”¨è¿›ç¨‹åˆ†æå·¥å…·ï¼Œåšè¿›ä¸€æ­¥åˆ†æã€‚</p>
</li>
</ul><p>æœ€åä¸€ä¸ªä¾‹å­ï¼Œå½“å‘ç° top è¾“å‡ºçš„è½¯ä¸­æ–­ CPU ä½¿ç”¨ç‡å‡é«˜æ—¶ï¼Œå¯ä»¥æŸ¥çœ‹ /proc/softirqs æ–‡ä»¶ä¸­å„ç§ç±»å‹è½¯ä¸­æ–­çš„å˜åŒ–æƒ…å†µï¼Œç¡®å®šåˆ°åº•æ˜¯å“ªç§è½¯ä¸­æ–­å‡ºçš„é—®é¢˜ã€‚æ¯”å¦‚ï¼Œå‘ç°æ˜¯ç½‘ç»œæ¥æ”¶ä¸­æ–­å¯¼è‡´çš„é—®é¢˜ï¼Œé‚£å°±å¯ä»¥ç»§ç»­ç”¨ç½‘ç»œåˆ†æå·¥å…· sar å’Œ tcpdump æ¥åˆ†æã€‚</p><p>æ³¨æ„ï¼Œæˆ‘åœ¨è¿™ä¸ªå›¾ä¸­åªåˆ—å‡ºäº†æœ€æ ¸å¿ƒçš„å‡ ä¸ªæ€§èƒ½å·¥å…·ï¼Œå¹¶æ²¡æœ‰åˆ—å‡ºæ‰€æœ‰ã€‚è¿™ä¹ˆåšï¼Œä¸€æ–¹é¢æ˜¯ä¸æƒ³ç”¨å¤§é‡çš„å·¥å…·åˆ—è¡¨å“åˆ°ä½ ã€‚åœ¨å­¦ä¹ ä¹‹åˆå°±æ¥è§¦æ‰€æœ‰æˆ–æ ¸å¿ƒæˆ–å°ä¼—çš„å·¥å…·ï¼Œä¸è§å¾—æ˜¯å¥½äº‹ã€‚å¦ä¸€æ–¹é¢ï¼Œæ˜¯å¸Œæœ›ä½ èƒ½å…ˆæŠŠé‡å¿ƒæ”¾åœ¨æ ¸å¿ƒå·¥å…·ä¸Šï¼Œæ¯•ç«Ÿç†Ÿç»ƒæŒæ¡å®ƒä»¬ï¼Œå°±å¯ä»¥è§£å†³å¤§å¤šæ•°é—®é¢˜ã€‚</p><p>æ‰€ä»¥ï¼Œä½ å¯ä»¥ä¿å­˜ä¸‹è¿™å¼ å›¾ï¼Œä½œä¸ºCPUæ€§èƒ½åˆ†æçš„æ€è·¯å›¾è°±ã€‚ä»æœ€æ ¸å¿ƒçš„è¿™å‡ ä¸ªå·¥å…·å¼€å§‹ï¼Œé€šè¿‡æˆ‘æä¾›çš„é‚£äº›æ¡ˆä¾‹ï¼Œè‡ªå·±åœ¨çœŸå®ç¯å¢ƒé‡Œå®è·µï¼Œæ‹¿ä¸‹å®ƒä»¬ã€‚</p><h2>å°ç»“</h2><p>ä»Šå¤©ï¼Œæˆ‘å¸¦ä½ å›å¿†äº†å¸¸è§çš„ CPU æ€§èƒ½æŒ‡æ ‡ï¼Œæ¢³ç†äº†å¸¸è§çš„ CPU æ€§èƒ½è§‚æµ‹å·¥å…·ï¼Œæœ€åè¿˜æ€»ç»“äº†å¿«é€Ÿåˆ†æ CPU æ€§èƒ½é—®é¢˜çš„æ€è·¯ã€‚</p><p>è™½ç„¶ CPU çš„æ€§èƒ½æŒ‡æ ‡å¾ˆå¤šï¼Œç›¸åº”çš„æ€§èƒ½åˆ†æå·¥å…·ä¹Ÿå¾ˆå¤šï¼Œä½†ç†Ÿæ‚‰äº†å„ç§æŒ‡æ ‡çš„å«ä¹‰ä¹‹åï¼Œä½ å°±ä¼šå‘ç°å®ƒä»¬å…¶å®éƒ½æœ‰ä¸€å®šçš„å…³è”ã€‚é¡ºç€è¿™ä¸ªæ€è·¯ï¼ŒæŒæ¡å¸¸ç”¨çš„åˆ†æå¥—è·¯å¹¶ä¸éš¾ã€‚</p><h2>æ€è€ƒ</h2><p>ç”±äºç¯‡å¹…é™åˆ¶ï¼Œæˆ‘åœ¨è¿™é‡Œåªä¸¾äº†å‡ ä¸ªæœ€å¸¸è§çš„æ¡ˆä¾‹ï¼Œå¸®ä½ ç†è§£ CPU æ€§èƒ½é—®é¢˜çš„åŸç†å’Œåˆ†ææ–¹æ³•ã€‚ä½ è‚¯å®šä¹Ÿç¢°åˆ°è¿‡å¾ˆå¤šè·Ÿè¿™äº›æ¡ˆä¾‹ä¸åŒçš„ CPU æ€§èƒ½é—®é¢˜å§ã€‚æˆ‘æƒ³è¯·ä½ ä¸€èµ·æ¥èŠèŠï¼Œä½ ç¢°åˆ°è¿‡ä»€ä¹ˆä¸ä¸€æ ·çš„ CPU æ€§èƒ½é—®é¢˜å‘¢ï¼Ÿä½ åˆæ˜¯æ€ä¹ˆåˆ†æå‡ºå®ƒçš„ç“¶é¢ˆçš„å‘¢ï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå’Œæˆ‘è®¨è®ºï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„åŒäº‹ã€æœ‹å‹ã€‚æˆ‘ä»¬ä¸€èµ·åœ¨å®æˆ˜ä¸­æ¼”ç»ƒï¼Œåœ¨äº¤æµä¸­è¿›æ­¥ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/a3/e9/a396aed4116c2c989771c1295736abe9.jpg" alt=""></p>
                    </div>
                </div>

            </div>
            <div data-v-87ffcada="" class="article-comments pd"><h2 data-v-87ffcada=""><span
                    data-v-87ffcada="">ç²¾é€‰ç•™è¨€</span></h2>
                <ul data-v-87ffcada="">
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æˆ‘æ¥ä¹Ÿ</span>
                            </div>
                            <div class="bd">[D11æ‰“å¡]<br>è¿™ç®€ç›´å°±æ˜¯å°æŠ„ğŸ˜<br>å¥½åƒåœ¨æˆ‘çš„åœºæ™¯ä¸­,ä½¿ç”¨è€å¸ˆæåˆ°çš„è¿™äº›å·¥å…·å°±å¤Ÿç”¨äº†.<br>å…ˆæŠŠè¿™äº›æ€§ä»·æ¯”é«˜çš„å·¥å…·ç¢ç£¨å¥½äº†,ä»¥åæœ‰ç²¾åŠ›äº†å†å»å­¦äº›å°ä¼—çš„.<br>æ„Ÿè°¢è€å¸ˆå¸®æˆ‘ä»¬æŒ‘å‡ºäº†é‡ç‚¹,å“ˆå“ˆ!<br>æ—¶é—´å°±æ˜¯é‡‘é’±å•Š,æ„Ÿè°¢è€å¸ˆå¸®æˆ‘ä»¬èŠ‚çº¦æ—¶é—´,æ›´é«˜æ•ˆçš„å­¦ä¹ .ğŸ‘ <br></div>
                            <span class="time">2018-12-14 16:57</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ğŸ˜Š</p>
                                <p class="reply-time">2018-12-17 08:05</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/47/46/61f16147.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å”¯ç¾</span>
                            </div>
                            <div class="bd">è€å¸ˆï¼Œç¯å¢ƒä¸Šæœ‰ä¸ªtomcat ï¼Œç”¨æˆ·cpu ä¸€ç›´æ˜¯100%ï¼Œ æˆ‘ç”¨strace -c -p  pid å‘½ä»¤ï¼ŒæŸ¥åˆ°æ˜¯  futex(0x402f4900, FUTEX_WAIT, 2, NULLï¼Œçœ‹åˆ°æ˜¯futex æ˜¯linux çš„ç”¨æˆ·ç©ºé—´ å’Œç³»ç»Ÿç©ºé—´çš„ä¸€ç§åŒæ­¥æœºåˆ¶ï¼Œè¿™å¯¹äºjava ç¼–å†™çš„tomcat ï¼Œæ€ä¹ˆä¼šé€ æˆè¿™ç§é—®é¢˜ï¼Œæ€ä¹ˆç†è§£å‘¢ï¼Ÿ ï¼Œ <br></div>
                            <span class="time">2018-12-15 15:06</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/54/9a/76c0af70.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æ¯å¤©æ™’ç™½ç‰™</span>
                            </div>
                            <div class="bd">ã€D11æ‰“å¡ã€‘<br>æ€»ç»“ç¯‡æ–‡ç« ï¼Œå¯ä»¥å¤šçœ‹ï¼Œå¤šæ“ä½œï¼Œé‡åˆ°é—®é¢˜å¯ä»¥æŒ‰ç…§æ€è·¯åˆ†æï¼Œæ…¢æ…¢å†…åŒ–æˆè‡ªå·±çš„æ€è·¯ <br></div>
                            <span class="time">2018-12-14 07:02</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ğŸ‘</p>
                                <p class="reply-time">2018-12-14 07:53</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/61/90/3bca40d4.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">dongge</span>
                            </div>
                            <div class="bd">è¿™ä¸ªä¸“æ çš„è¿™ç¯‡æ–‡ç« å€¼ä¸€ä¸ªäº¿ <br></div>
                            <span class="time">2018-12-18 13:13</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">è°¢è°¢ğŸ˜Š</p>
                                <p class="reply-time">2018-12-18 22:18</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">åˆ’æ—¶ä»£</span>
                            </div>
                            <div class="bd">æ•´ä½“å›é¡¾å¤ä¹ äº†å®è·µæ¡ˆä¾‹ï¼Œå®è·µç»ƒä¹ æ¶ˆåŒ–ï¼ŒCPUæ€§èƒ½æŒ‡æ ‡å…³ç³»è¯¦è§£å›¾å¾ˆèµã€‚ <br></div>
                            <span class="time">2018-12-14 09:56</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ğŸ˜Š</p>
                                <p class="reply-time">2018-12-14 18:39</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/fc/fc/1e235814.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">è€¿é•¿å­¦</span>
                            </div>
                            <div class="bd">æŸ¥çœ‹ï¼Œåˆ†æï¼Œæ‰¾åˆ°è¿›ç¨‹ï¼Œæ‰¾åˆ°å‡½æ•° <br></div>
                            <span class="time">2018-12-14 08:08</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/14/81/c2/314460b8.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">VIC</span>
                            </div>
                            <div class="bd">TFSç³»ç»Ÿï¼Œdataserverè¿è¡Œæ—¶sysè´Ÿè½½ç‰¹åˆ«é«˜ï¼Œæ€ä¹ˆæŸ¥å‡ºåŸå› è¿›è¡Œä¼˜åŒ– <br></div>
                            <span class="time">2019-01-03 14:04</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å¯ä»¥è€ƒè™‘ä»I&#47;Oæ–¹é¢å…¥æ‰‹åˆ†æï¼Œåé¢I&#47;Oæ¨¡å—ä¼šè®²æ–‡ä»¶ç³»ç»Ÿå’Œç£ç›˜I&#47;O</p>
                                <p class="reply-time">2019-01-10 20:34</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/ce/6c/9d8851a6.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æä¸¹é‘«</span>
                            </div>
                            <div class="bd">execsnoopè¿™ä¸ªæ€ä¹ˆç”¨å‘¢ã€‚æŒ‡æ•™ä¸€ä¸‹ <br></div>
                            <span class="time">2018-12-31 16:22</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKibu8C3CeYGF6JCBribiaEPia5gibaQnj9icryPVwoF6ibosmdicXJIhBEUdn0aDwZQ32oTyJL86DgDswhAg/132" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">èŠ±å¼€è¶è‡ªæ¥</span>
                            </div>
                            <div class="bd">d4æ‰“å¡ <br></div>
                            <span class="time">2018-12-30 16:59</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/ae/95/d1b13c9e.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">f</span>
                            </div>
                            <div class="bd">æ‰“å¡ <br></div>
                            <span class="time">2018-12-28 08:58</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å¦‚æœ</span>
                            </div>
                            <div class="bd">DAY11ï¼Œæ‰“å¡ <br></div>
                            <span class="time">2018-12-25 14:20</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ğŸ‘</p>
                                <p class="reply-time">2018-12-25 17:27</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/7c/59/26b1e65a.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">ç§‘å­¦Jia</span>
                            </div>
                            <div class="bd">è€å¸ˆï¼Œå¥³åŒå­¦ç»§ç»­ä¸¾æ‰‹å‘è¨€ï¼šä½ ç”»å›¾çš„å·¥å…·æ˜¯ä»€ä¹ˆï¼Ÿåšçš„å¾ˆç²¾è‡´ï¼ <br></div>
                            <span class="time">2018-12-25 11:57</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">omnigraffle</p>
                                <p class="reply-time">2018-12-25 17:28</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/97/61/34a0da09.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Griffin</span>
                            </div>
                            <div class="bd">å“ˆå“ˆå“ˆï¼Œåªæœ‰ä»ä¸€å¹´çº§å¼€å§‹å°±å½“è¯¾ä»£è¡¨æ‰èƒ½æ€»ç»“çš„è¿™ä¹ˆå¥½ã€‚ <br></div>
                            <span class="time">2018-12-23 18:23</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ç»ˆäºåœ†äº†å½“è¯¾ä»£è¡¨çš„æ¢¦ğŸ˜‚</p>
                                <p class="reply-time">2018-12-25 08:22</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/02/5b/ce326cfc.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Orcsir</span>
                            </div>
                            <div class="bd">Flag <br></div>
                            <span class="time">2018-12-22 12:26</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/7b/63/23a4e7da.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Balich</span>
                            </div>
                            <div class="bd">å¬å›ä¸€å¸­è¯ï¼Œèƒœè¯»åå¹´ä¹¦ï¼è€å¸ˆè¿™ä¸ªä¸“æ çœŸçš„å¤ªæ£’äº†ï¼› <br></div>
                            <span class="time">2018-12-22 11:12</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">è°¢è°¢ğŸ˜Š</p>
                                <p class="reply-time">2018-12-23 11:37</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/14/15/9b/0380a1c3.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Nemo</span>
                            </div>
                            <div class="bd">è€å¸ˆä½ å¥½<br>æˆ‘æ˜¯ç”¨android 7.1æ¥å®éªŒçš„ï¼Œvmstatã€dstatè¯•äº†å¾ˆå¤šä¸ªç‰ˆæœ¬éƒ½æ— æ³•è¿è¡Œï¼Œèƒ½å¦å¸®å¿™æä¾›ä¸€ä¸ªå¯ç”¨çš„ï¼Œååˆ†æ„Ÿè°¢ <br></div>
                            <span class="time">2018-12-20 17:59</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ä¸å¥½æ„æ€ï¼Œæ²¡æœ‰åœ¨Androidä¸­ç”¨è¿‡è¿™äº›å·¥å…·ï¼Œéº»çƒ¦ç½‘ç»œæœç´¢ä¸€ä¸‹æˆ–è€…è¯•è¯•æºä»£ç ç¼–è¯‘å®‰è£…</p>
                                <p class="reply-time">2018-12-20 21:30</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/ac/a4/e51a1fd0.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">JasperHsu</span>
                            </div>
                            <div class="bd">æ‰“å¡ã€‚åˆšæ¢äº†å…¬å¸ï¼Œè¿™å‡ å¤©æŠ½æ—¶é—´è¿½ä¸Šæ¥ <br></div>
                            <span class="time">2018-12-20 13:01</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ğŸ˜Š</p>
                                <p class="reply-time">2018-12-20 21:32</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/14/17/07/83f030c9.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">kakasir</span>
                            </div>
                            <div class="bd">è¿™ä¸ªæ€»ç»“å¤ªæ£’äº†ï¼Œåé¢åº”è¯¥æ¯ä¸€ä¸ªé˜¶æ®µéƒ½æœ‰æ€»ç»“ï¼Œæ–°æ‰‹çœ‹å‰é¢çš„è¯¾ç¨‹åŸºæœ¬æ¶ˆåŒ–ä¸äº†ï¼Œæ€»ç»“å¸®åŠ©å¾ˆå¤§ <br></div>
                            <span class="time">2018-12-20 09:38</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ä¼šæœ‰çš„ğŸ˜Š</p>
                                <p class="reply-time">2018-12-20 21:42</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/42/18/edc1b373.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">é£é£˜ï¼Œå¾ç‹¬æ€</span>
                            </div>
                            <div class="bd">æ‰“å¡ï¼Œæ€»ç»“çš„å¤ªå¥½äº† <br></div>
                            <span class="time">2018-12-19 23:13</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/14/14/3a/94e25d0c.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">ç”·äººåå…«ä¸€æèŠ±</span>
                            </div>
                            <div class="bd">top - 22:08:46 up 86 days, 16:05,  2 users,  load average: 0.00, 0.00, 0.00<br>Tasks:  89 total,   1 running,  53 sleeping,   0 stopped,   0 zombie<br><br><br>è€å¸ˆï¼Œè¯·é—®ä¸€ä¸‹ï¼Œæˆ‘åœ¨æ¬ç“¦å·¥ä¸Šä¹°çš„äº‘ä¸»æœºä¸Šæ‰§è¡Œtopå‘½ä»¤ï¼ŒTaské‚£ä¸€è¡Œrunningï¼ˆ1ï¼‰+sleepingï¼ˆ53ï¼‰+stopped+zombieçš„æ€»æ•°å¹¶ä¸ç­‰äºtotalï¼ˆ89ï¼‰.è¯·é—®è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ <br></div>
                            <span class="time">2018-12-18 11:13</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">totalæ˜¯æ‰€æœ‰ä»»åŠ¡æ•°ï¼ˆæˆ–è€…çº¿ç¨‹æ•°ï¼‰ï¼Œä½†åé¢é‚£äº›å¹¶ä¸æ˜¯æ‰€æœ‰çš„è¿›ç¨‹çŠ¶æ€ï¼Œæ¯”å¦‚ç”¨åœ¨å†…æ ¸çº¿ç¨‹ä¸Šçš„ I çŠ¶æ€</p>
                                <p class="reply-time">2018-12-18 22:32</p>
                            </div>
                            
                        </div>
                    </li>
                    


                </ul>
            </div>
        </div>
    </div>
</div>
</body>
</html>