<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover">
    <meta name="format-detection" content="telephone=no">
    <style type="text/css">

#watermark {

  position: relative;
  overflow: hidden;
}

#watermark .x {
  position: absolute;
  top: 800;
  left: 400;
  color: #3300ff;
  font-size: 50px;
  pointer-events: none;
  opacity:0.3;
  filter:Alpha(opacity=50);
  -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
}
    </style>


    <style type="text/css">
 html{color:#333;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;text-rendering:optimizelegibility;font-family:Helvetica Neue,PingFang SC,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif}html.borderbox *,html.borderbox :after,html.borderbox :before{box-sizing:border-box}article,aside,blockquote,body,button,code,dd,details,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hr,input,legend,li,menu,nav,ol,p,pre,section,td,textarea,th,ul{margin:0;padding:0}article,aside,details,figcaption,figure,footer,header,menu,nav,section{display:block}audio,canvas,video{display:inline-block}body,button,input,select,textarea{font:300 1em/1.8 PingFang SC,Lantinghei SC,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,Helvetica,sans-serif}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}blockquote{position:relative;color:#999;font-weight:400;border-left:1px solid #1abc9c;padding-left:1em;margin:1em 3em 1em 2em}@media only screen and (max-width:640px){blockquote{margin:1em 0}}abbr,acronym{border-bottom:1px dotted;font-variant:normal}abbr{cursor:help}del{text-decoration:line-through}address,caption,cite,code,dfn,em,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}q:after,q:before{content:""}sub,sup{font-size:75%;line-height:0;position:relative}:root sub,:root sup{vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}a{color:#1abc9c}a:hover{text-decoration:underline}.typo a{border-bottom:1px solid #1abc9c}.typo a:hover{border-bottom-color:#555;color:#555}.typo a:hover,a,ins{text-decoration:none}.typo-u,u{text-decoration:underline}mark{background:#fffdd1;border-bottom:1px solid #ffedce;padding:2px;margin:0 5px}code,pre,pre tt{font-family:Courier,Courier New,monospace}pre{background:hsla(0,0%,97%,.7);border:1px solid #ddd;padding:1em 1.5em;display:block;-webkit-overflow-scrolling:touch}hr{border:none;border-bottom:1px solid #cfcfcf;margin-bottom:.8em;height:10px}.typo-small,figcaption,small{font-size:.9em;color:#888}b,strong{font-weight:700;color:#000}[draggable]{cursor:move}.clearfix:after,.clearfix:before{content:"";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.textwrap,.textwrap td,.textwrap th{word-wrap:break-word;word-break:break-all}.textwrap-table{table-layout:fixed}.serif{font-family:Palatino,Optima,Georgia,serif}.typo-dl,.typo-form,.typo-hr,.typo-ol,.typo-p,.typo-pre,.typo-table,.typo-ul,.typo dl,.typo form,.typo hr,.typo ol,.typo p,.typo pre,.typo table,.typo ul,blockquote{margin-bottom:1rem}h1,h2,h3,h4,h5,h6{font-family:PingFang SC,Helvetica Neue,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#000;line-height:1.35}.typo-h1,.typo-h2,.typo-h3,.typo-h4,.typo-h5,.typo-h6,.typo h1,.typo h2,.typo h3,.typo h4,.typo h5,.typo h6{margin-top:1.2em;margin-bottom:.6em;line-height:1.35}.typo-h1,.typo h1{font-size:2em}.typo-h2,.typo h2{font-size:1.8em}.typo-h3,.typo h3{font-size:1.6em}.typo-h4,.typo h4{font-size:1.4em}.typo-h5,.typo-h6,.typo h5,.typo h6{font-size:1.2em}.typo-ul,.typo ul{margin-left:1.3em;list-style:disc}.typo-ol,.typo ol{list-style:decimal;margin-left:1.9em}.typo-ol ol,.typo-ol ul,.typo-ul ol,.typo-ul ul,.typo li ol,.typo li ul{margin-bottom:.8em;margin-left:2em}.typo-ol ul,.typo-ul ul,.typo li ul{list-style:circle}.typo-table td,.typo-table th,.typo table caption,.typo table td,.typo table th{border:1px solid #ddd;padding:.5em 1em;color:#666}.typo-table th,.typo table th{background:#fbfbfb}.typo-table thead th,.typo table thead th{background:hsla(0,0%,95%,.7)}.typo table caption{border-bottom:none}.typo-input,.typo-textarea{-webkit-appearance:none;border-radius:0}.typo-em,.typo em,caption,legend{color:#000;font-weight:inherit}.typo-em{position:relative}.typo-em:after{position:absolute;top:.65em;left:0;width:100%;overflow:hidden;white-space:nowrap;content:"\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"}.typo img{max-width:100%}.common-content{font-weight:400;color:#353535;line-height:1.75rem;white-space:normal;word-break:normal;font-size:1rem}.common-content img{display:block;max-width:100%;background-color:#eee}.common-content audio,.common-content video{width:100%;background-color:#eee}.common-content center,.common-content font{margin-top:1rem;display:inline-block}.common-content center{width:100%}.common-content pre{margin-top:1rem;padding-left:0;padding-right:0;position:relative;overflow:hidden}.common-content pre code{font-size:.8rem;font-family:Consolas,Liberation Mono,Menlo,monospace,Courier;display:block;width:100%;box-sizing:border-box;padding-left:1rem;padding-right:1rem;overflow-x:auto}.common-content hr{border:none;margin-top:1.5rem;margin-bottom:1.5rem;border-top:1px solid #f5f5f5;height:1px;background:none}.common-content b,.common-content h1,.common-content h2,.common-content h3,.common-content h4,.common-content h5,.common-content strong{font-weight:700}.common-content h1,.common-content h2{font-size:1.125rem;margin-bottom:.45rem}.common-content h3,.common-content h4,.common-content h5{font-size:1rem;margin-bottom:.45rem}.common-content p{font-weight:400;color:#353535;margin-top:.15rem}.common-content .orange{color:#ff5a05}.common-content .reference{font-size:1rem;color:#888}.custom-rich-content h1{margin-top:0;font-weight:400;font-size:15.25px;border-bottom:1px solid #eee;line-height:2.8}.custom-rich-content li,.custom-rich-content p{font-size:14px;color:#888;line-height:1.6}table.hljs-ln{margin-bottom:0;border-spacing:0;border-collapse:collapse}table.hljs-ln,table.hljs-ln tbody,table.hljs-ln td,table.hljs-ln tr{box-sizing:border-box}table.hljs-ln td{padding:0;border:0}table.hljs-ln td.hljs-ln-numbers{min-width:15px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;cursor:pointer;user-select:none}table.hljs-ln td.hljs-ln-code,table.hljs-ln td.hljs-ln-numbers{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;line-height:20px;vertical-align:top}table.hljs-ln td.hljs-ln-code{position:relative;padding-right:10px;padding-left:10px;overflow:visible;color:#24292e;word-wrap:normal;white-space:pre}video::-webkit-media-controls{overflow:hidden!important}video::-webkit-media-controls-enclosure{width:calc(100% + 32px);margin-left:auto}.button-cancel{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel,.button-primary{-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary{color:#fff;background-color:#ff5a05;border-radius:3px}@font-face{font-family:iconfont;src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot);src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.woff) format("woff"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.ttf) format("truetype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.svg#iconfont) format("svg")}@font-face{font-family:player-font;src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot);src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.woff) format("woff"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.ttf) format("truetype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.svg#player-font) format("svg")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-webkit-text-stroke-width:.2px;-moz-osx-font-smoothing:grayscale}html{background:#fff;min-height:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{width:100%}body.fixed{overflow:hidden;position:fixed;width:100vw;height:100vh}i{font-style:normal}a{word-wrap:break-word;-webkit-tap-highlight-color:rgba(0,0,0,0)}a:hover{text-decoration:none}.fade-enter-active,.fade-leave-active{transition:opacity .3s}.fade-enter,.fade-leave-to{opacity:0}.MathJax,.MathJax_CHTML,.MathJax_MathContainer,.MathJax_MathML,.MathJax_PHTML,.MathJax_PlainSource,.MathJax_SVG{outline:0}.ios-app-switch .js-audit{display:none}._loading_wrap_{position:fixed;width:100vw;height:100vh;top:50%;left:50%;transform:translate(-50%,-50%);z-index:999}._loading_div_class_,._loading_wrap_{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}._loading_div_class_{word-wrap:break-word;padding:.5rem .75rem;text-align:center;z-index:9999;font-size:.6rem;max-width:60%;color:#fff;border-radius:.25rem;-ms-flex-direction:column;flex-direction:column}._loading_div_class_ .message{color:#353535;font-size:16px;line-height:3}.spinner{animation:circle-rotator 1.4s linear infinite}.spinner *{line-height:0;box-sizing:border-box}@keyframes circle-rotator{0%{transform:rotate(0deg)}to{transform:rotate(270deg)}}.path{stroke-dasharray:187;stroke-dashoffset:0;transform-origin:center;animation:circle-dash 1.4s ease-in-out infinite,circle-colors 5.6s ease-in-out infinite}@keyframes circle-colors{0%{stroke:#ff5a05}to{stroke:#ff5a05}}@keyframes circle-dash{0%{stroke-dashoffset:187}50%{stroke-dashoffset:46.75;transform:rotate(135deg)}to{stroke-dashoffset:187;transform:rotate(450deg)}}.confirm-box-wrapper,.confirm-box-wrapper .mask{position:absolute;top:0;left:0;right:0;bottom:0}.confirm-box-wrapper .mask{background:rgba(0,0,0,.6)}.confirm-box-wrapper .confirm-box{position:fixed;top:50%;left:50%;width:267px;background:#fff;transform:translate(-50%,-50%);border-radius:7px}.confirm-box-wrapper .confirm-box .head{margin:0 18px;font-size:18px;text-align:center;line-height:65px;border-bottom:1px solid #d9d9d9}.confirm-box-wrapper .confirm-box .body{padding:18px;padding-bottom:0;color:#353535;font-size:12.5px;max-height:150px;overflow:auto}.confirm-box-wrapper .confirm-box .foot{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding:18px}.confirm-box-wrapper .confirm-box .foot .button-cancel{border:1px solid #d9d9d9}.hljs{display:block;overflow-x:auto;padding:.5em;color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}




    </style>
    <style type="text/css">
        .button-cancel[data-v-87ffcada]{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel[data-v-87ffcada],.button-primary[data-v-87ffcada]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary[data-v-87ffcada]{color:#fff;background-color:#ff5a05;border-radius:3px}.pd[data-v-87ffcada]{padding-left:1.375rem;padding-right:1.375rem}.article[data-v-87ffcada]{max-width:70rem;margin:0 auto}.article .article-unavailable[data-v-87ffcada]{color:#fa8919;font-size:15px;font-weight:600;line-height:24px;border-radius:5px;padding:12px;background-color:#f6f7fb;margin-top:20px}.article .article-unavailable .iconfont[data-v-87ffcada]{font-size:12px}.article .main[data-v-87ffcada]{padding:1.25rem 0;margin-bottom:52px}.article-title[data-v-87ffcada]{color:#353535;font-weight:400;line-height:1.65rem;font-size:1.34375rem}.article-info[data-v-87ffcada]{color:#888;font-size:.9375rem;margin-top:1.0625rem}.article-content[data-v-87ffcada]{margin-top:1.0625rem}.article-content.android video[data-v-87ffcada]::-webkit-media-controls-fullscreen-button{display:none}.copyright[data-v-87ffcada]{color:#b2b2b2;padding-bottom:20px;margin-top:20px;font-size:13px}.audio-player[data-v-87ffcada]{width:100%;margin:20px 0}.to-comment[data-v-87ffcada]{overflow:hidden;padding-top:10px;margin-bottom:-30px}.to-comment a.button-primary[data-v-87ffcada]{float:right;height:20px;font-size:12px;line-height:20px;padding:4px 8px;cursor:pointer}.article-comments[data-v-87ffcada]{margin-top:2rem}.article-comments h2[data-v-87ffcada]{text-align:center;color:#888;position:relative;z-index:1;margin-bottom:1rem}.article-comments h2[data-v-87ffcada]:before{border-top:1px dotted #888;content:"";position:absolute;top:56%;left:0;width:100%;z-index:-1}.article-comments h2 span[data-v-87ffcada]{font-size:15.25px;font-weight:400;padding:0 1rem;background:#fff;display:inline-block}.article-sub-bottom[data-v-87ffcada]{z-index:10;cursor:pointer}.switch-btns[data-v-87ffcada]{height:76px;cursor:pointer;padding-top:24px;padding-bottom:24px;border-bottom:10px solid #f6f7fb;position:relative}.switch-btns[data-v-87ffcada]:before{content:" ";height:1px;background:#e8e8e8;position:absolute;top:0;left:0;-webkit-box-sizing:border-box;box-sizing:border-box;left:1.375rem;right:1.375rem}.switch-btns .btn[data-v-87ffcada]{height:38px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.switch-btns .btn .tag[data-v-87ffcada]{-webkit-box-flex:0;-ms-flex:0 0 62px;flex:0 0 62px;text-align:center;color:#888;font-size:14px;border-radius:10px;height:22px;line-height:22px;background:#f6f7fb;font-weight:400}.switch-btns .btn .txt[data-v-87ffcada]{margin-left:10px;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;color:#888;font-size:15px;height:22px;line-height:22px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:400}@media (max-width:769px){.article .breadcrumb[data-v-87ffcada]{padding-top:10px;padding-bottom:10px}}





    </style>

    <style type="text/css">
        .comment-item{list-style-position:inside;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-bottom:1rem}.comment-item a{border-bottom:none}.comment-item .avatar{width:2.625rem;height:2.625rem;-ms-flex-negative:0;flex-shrink:0;border-radius:50%}.comment-item .info{margin-left:.5rem;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.comment-item .info .hd{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .username{color:#888;font-size:15.25px;font-weight:400;line-height:1.2}.comment-item .info .hd .control{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .control .btn-share{color:#888;font-size:.75rem;margin-right:1rem}.comment-item .info .hd .control .btn-praise{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:15.25px;text-decoration:none}.comment-item .info .hd .control .btn-praise i{color:#888;display:inline-block;font-size:.75rem;margin-right:.3rem;margin-top:-.01rem}.comment-item .info .hd .control .btn-praise i.on,.comment-item .info .hd .control .btn-praise span{color:#ff5a05}.comment-item .info .bd{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6}.comment-item .info .time{color:#888;font-size:9px;line-height:1}.comment-item .info .reply .reply-hd{font-size:15.25px}.comment-item .info .reply .reply-hd span{margin-left:-12px;color:#888;font-weight:400}.comment-item .info .reply .reply-hd i{color:#ff5a05;font-size:15.25px}.comment-item .info .reply .reply-content{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all}.comment-item .info .reply .reply-time{color:#888;font-size:9px}




    </style>
</head>
<body>
<div id="app">


    <div data-v-87ffcada="" class="article" id="watermark">
        <p class="x">æ›´å¤šè¯¾ç¨‹è¯·åŠ QQç¾¤170701297</p>
        <div data-v-87ffcada="" class="main main-app">
            <h1 data-v-87ffcada="" class="article-title pd">
                22è®²Linuxæ€§èƒ½ä¼˜åŒ–ç­”ç–‘ï¼ˆä¸‰ï¼‰
            </h1>
            <div data-v-87ffcada="" class="article-content typo common-content pd"><img data-v-87ffcada=""
                                                                                        src="https://static001.geekbang.org/resource/image/10/b9/1012be3625c19b019caba97caa644ab9.jpg">


                <div data-v-87ffcada="" id="article-content" class="">
                    <div class="text">
                        <p>ä½ å¥½ï¼Œæˆ‘æ˜¯å€ªæœ‹é£ã€‚</p><p>ä¸“æ æ›´æ–°è‡³ä»Šï¼Œå››å¤§åŸºç¡€æ¨¡å—çš„ç¬¬äºŒä¸ªæ¨¡å—â€”â€”å†…å­˜æ€§èƒ½ç¯‡ï¼Œæˆ‘ä»¬å°±å·²ç»å­¦å®Œäº†ã€‚å¾ˆå¼€å¿ƒä½ è¿˜æ²¡æœ‰æ‰é˜Ÿï¼Œä»ç„¶åœ¨ç§¯æå­¦ä¹ å’Œå®è·µæ“ä½œï¼Œå¹¶ä¸”çƒ­æƒ…åœ°ç•™è¨€ä¸è®¨è®ºã€‚</p><p>è¿™äº›ç•™è¨€ä¸­ï¼Œæˆ‘éå¸¸é«˜å…´çœ‹åˆ°ï¼Œå¾ˆå¤šåŒå­¦ç”¨å­¦è¿‡çš„æ¡ˆä¾‹æ€è·¯ï¼Œè§£å†³äº†å®é™…å·¥ä½œä¸­çš„æ€§èƒ½é—®é¢˜ã€‚æˆ‘ä¹Ÿéå¸¸æ„Ÿè°¢ espzestã€å¤§ç”œèœã€Smile ç­‰ç§¯ææ€è€ƒçš„åŒå­¦ï¼ŒæŒ‡å‡ºäº†æ–‡ç« ä¸­æŸäº›ä¸å½“æˆ–è€…ä¸ä¸¥è°¨çš„åœ°æ–¹ã€‚å¦å¤–ï¼Œè¿˜æœ‰æˆ‘æ¥ä¹Ÿã€JohnT3eã€ç™½åç­‰åŒå­¦ï¼Œç§¯æåœ¨ç•™è¨€åŒºè®¨è®ºå­¦ä¹ å’Œå®è·µä¸­çš„é—®é¢˜ï¼Œä¹Ÿåˆ†äº«äº†å®è´µçš„ç»éªŒï¼Œåœ¨è¿™é‡Œä¹Ÿéå¸¸æ„Ÿè°¢ä½ ä»¬ã€‚</p><p>ä»Šå¤©æ˜¯æ€§èƒ½ä¼˜åŒ–çš„ç¬¬ä¸‰æœŸã€‚ç…§ä¾‹ï¼Œæˆ‘ä»å†…å­˜æ¨¡å—çš„ç•™è¨€ä¸­æ‘˜å‡ºäº†ä¸€äº›å…¸å‹é—®é¢˜ï¼Œä½œä¸ºä»Šå¤©çš„ç­”ç–‘å†…å®¹ï¼Œé›†ä¸­å›å¤ã€‚ä¸ºäº†ä¾¿äºä½ å­¦ä¹ ç†è§£ï¼Œå®ƒä»¬å¹¶ä¸æ˜¯ä¸¥æ ¼æŒ‰ç…§æ–‡ç« é¡ºåºæ’åˆ—çš„ã€‚</p><p>æ¯ä¸ªé—®é¢˜ï¼Œæˆ‘éƒ½é™„ä¸Šäº†ç•™è¨€åŒºæé—®çš„æˆªå±ã€‚å¦‚æœä½ éœ€è¦å›é¡¾å†…å®¹åŸæ–‡ï¼Œå¯ä»¥æ‰«ææ¯ä¸ªé—®é¢˜å³ä¸‹æ–¹çš„äºŒç»´ç æŸ¥çœ‹ã€‚</p><h2>é—®é¢˜1ï¼šå†…å­˜å›æ”¶ä¸OOM</h2><p>è™è™çš„è¿™ä¸ªé—®é¢˜ï¼Œå®é™…ä¸ŠåŒ…æ‹¬å››ä¸ªå­é—®é¢˜ï¼Œå³ï¼Œ</p><ul>
<li>
<p>æ€ä¹ˆç†è§£ LRU å†…å­˜å›æ”¶ï¼Ÿ</p>
</li>
<li>
<p>å›æ”¶åçš„å†…å­˜åˆåˆ°å“ªé‡Œå»äº†ï¼Ÿ</p>
</li>
<li>
<p>OOM æ˜¯æŒ‰ç…§è™šæ‹Ÿå†…å­˜è¿˜æ˜¯å®é™…å†…å­˜æ¥æ‰“åˆ†ï¼Ÿ</p>
</li>
<li>
<p>æ€ä¹ˆä¼°è®¡åº”ç”¨ç¨‹åºçš„æœ€å°å†…å­˜ï¼Ÿ</p>
</li>
</ul><p><img src="https://static001.geekbang.org/resource/image/90/36/905b15ee0df924038befe0e61ce81436.png" alt=""></p><p>å…¶å®åœ¨ Linux <a href="https://time.geekbang.org/column/article/74272">å†…å­˜çš„åŸç†ç¯‡</a>å’Œ <a href="https://time.geekbang.org/column/article/75797">Swap åŸç†ç¯‡</a>ä¸­æˆ‘æ›¾ç»è®²åˆ°ï¼Œä¸€æ—¦å‘ç°å†…å­˜ç´§å¼ ï¼Œç³»ç»Ÿä¼šé€šè¿‡ä¸‰ç§æ–¹å¼å›æ”¶å†…å­˜ã€‚æˆ‘ä»¬æ¥å¤ä¹ ä¸€ä¸‹ï¼Œè¿™ä¸‰ç§æ–¹å¼åˆ†åˆ«æ˜¯ ï¼š</p><!-- [[[read_end]]] --><ul>
<li>
<p>åŸºäº LRUï¼ˆLeast Recently Usedï¼‰ç®—æ³•ï¼Œå›æ”¶ç¼“å­˜ï¼›</p>
</li>
<li>
<p>åŸºäº Swap æœºåˆ¶ï¼Œå›æ”¶ä¸å¸¸è®¿é—®çš„åŒ¿åé¡µï¼›</p>
</li>
<li>
<p>åŸºäº OOMï¼ˆOut of Memoryï¼‰æœºåˆ¶ï¼Œæ€æ‰å ç”¨å¤§é‡å†…å­˜çš„è¿›ç¨‹ã€‚</p>
</li>
</ul><p>å‰ä¸¤ç§æ–¹å¼ï¼Œç¼“å­˜å›æ”¶å’Œ Swap å›æ”¶ï¼Œå®é™…ä¸Šéƒ½æ˜¯åŸºäº LRU ç®—æ³•ï¼Œä¹Ÿå°±æ˜¯ä¼˜å…ˆå›æ”¶ä¸å¸¸è®¿é—®çš„å†…å­˜ã€‚LRU å›æ”¶ç®—æ³•ï¼Œå®é™…ä¸Šç»´æŠ¤ç€ active å’Œ inactive ä¸¤ä¸ªåŒå‘é“¾è¡¨ï¼Œå…¶ä¸­ï¼š</p><ul>
<li>
<p>active è®°å½•æ´»è·ƒçš„å†…å­˜é¡µï¼›</p>
</li>
<li>
<p>inactive è®°å½•éæ´»è·ƒçš„å†…å­˜é¡µã€‚</p>
</li>
</ul><p>è¶Šæ¥è¿‘é“¾è¡¨å°¾éƒ¨ï¼Œå°±è¡¨ç¤ºå†…å­˜é¡µè¶Šä¸å¸¸è®¿é—®ã€‚è¿™æ ·ï¼Œåœ¨å›æ”¶å†…å­˜æ—¶ï¼Œç³»ç»Ÿå°±å¯ä»¥æ ¹æ®æ´»è·ƒç¨‹åº¦ï¼Œä¼˜å…ˆå›æ”¶ä¸æ´»è·ƒçš„å†…å­˜ã€‚</p><p>æ´»è·ƒå’Œéæ´»è·ƒçš„å†…å­˜é¡µï¼ŒæŒ‰ç…§ç±»å‹çš„ä¸åŒï¼Œåˆåˆ†åˆ«åˆ†ä¸ºæ–‡ä»¶é¡µå’ŒåŒ¿åé¡µï¼Œå¯¹åº”ç€ç¼“å­˜å›æ”¶å’Œ Swap å›æ”¶ã€‚</p><p>å½“ç„¶ï¼Œä½ å¯ä»¥ä» /proc/meminfo ä¸­ï¼ŒæŸ¥è¯¢å®ƒä»¬çš„å¤§å°ï¼Œæ¯”å¦‚ï¼š</p><pre><code># grepè¡¨ç¤ºåªä¿ç•™åŒ…å«activeçš„æŒ‡æ ‡ï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰
# sortè¡¨ç¤ºæŒ‰ç…§å­—æ¯é¡ºåºæ’åº
$ cat /proc/meminfo | grep -i active | sort
Active(anon):     167976 kB
Active(file):     971488 kB
Active:          1139464 kB
Inactive(anon):      720 kB
Inactive(file):  2109536 kB
Inactive:        2110256 kB
</code></pre><p>ç¬¬ä¸‰ç§æ–¹å¼ï¼ŒOOM æœºåˆ¶æŒ‰ç…§ oom_score ç»™è¿›ç¨‹æ’åºã€‚oom_score è¶Šå¤§ï¼Œè¿›ç¨‹å°±è¶Šå®¹æ˜“è¢«ç³»ç»Ÿæ€æ­»ã€‚</p><p>å½“ç³»ç»Ÿå‘ç°å†…å­˜ä¸è¶³ä»¥åˆ†é…æ–°çš„å†…å­˜è¯·æ±‚æ—¶ï¼Œå°±ä¼šå°è¯•<a href="https://time.geekbang.org/column/article/75797">ç›´æ¥å†…å­˜å›æ”¶</a>ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœå›æ”¶å®Œæ–‡ä»¶é¡µå’ŒåŒ¿åé¡µåï¼Œå†…å­˜å¤Ÿç”¨äº†ï¼Œå½“ç„¶çš†å¤§æ¬¢å–œï¼ŒæŠŠå›æ”¶å›æ¥çš„å†…å­˜åˆ†é…ç»™è¿›ç¨‹å°±å¯ä»¥äº†ã€‚ä½†å¦‚æœå†…å­˜è¿˜æ˜¯ä¸è¶³ï¼ŒOOMå°±è¦ç™»åœºäº†ã€‚</p><p>OOM å‘ç”Ÿæ—¶ï¼Œä½ å¯ä»¥åœ¨ dmesg ä¸­çœ‹åˆ° Out of memory çš„ä¿¡æ¯ï¼Œä»è€ŒçŸ¥é“æ˜¯å“ªäº›è¿›ç¨‹è¢« OOM æ€æ­»äº†ã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼ŒæŸ¥è¯¢ OOM æ—¥å¿—ï¼š</p><pre><code>$ dmesg | grep -i &quot;Out of memory&quot;
Out of memory: Kill process 9329 (java) score 321 or sacrifice child
</code></pre><p>å½“ç„¶äº†ï¼Œå¦‚æœä½ ä¸å¸Œæœ›åº”ç”¨ç¨‹åºè¢« OOM æ€æ­»ï¼Œå¯ä»¥è°ƒæ•´è¿›ç¨‹çš„ oom_score_adjï¼Œå‡å° OOM åˆ†å€¼ï¼Œè¿›è€Œé™ä½è¢«æ€æ­»çš„æ¦‚ç‡ã€‚æˆ–è€…ï¼Œä½ è¿˜å¯ä»¥å¼€å¯å†…å­˜çš„ overcommitï¼Œå…è®¸è¿›ç¨‹ç”³è¯·è¶…è¿‡ç‰©ç†å†…å­˜çš„è™šæ‹Ÿå†…å­˜ï¼ˆè¿™å„¿å®é™…ä¸Šå‡è®¾çš„æ˜¯ï¼Œè¿›ç¨‹ä¸ä¼šç”¨å…‰ç”³è¯·åˆ°çš„è™šæ‹Ÿå†…å­˜ï¼‰ã€‚</p><p>è¿™ä¸‰ç§æ–¹å¼ï¼Œæˆ‘ä»¬å°±å¤ä¹ å®Œäº†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å›åˆ°å¼€å§‹çš„å››ä¸ªé—®é¢˜ï¼Œç›¸ä¿¡ä½ è‡ªå·±å·²ç»æœ‰äº†ç­”æ¡ˆã€‚</p><ol>
<li>
<p>LRU ç®—æ³•çš„åŸç†åˆšæ‰å·²ç»æåˆ°äº†ï¼Œè¿™é‡Œä¸å†é‡å¤ã€‚</p>
</li>
<li>
<p>å†…å­˜å›æ”¶åï¼Œä¼šè¢«é‡æ–°æ”¾åˆ°æœªä½¿ç”¨å†…å­˜ä¸­ã€‚è¿™æ ·ï¼Œæ–°çš„è¿›ç¨‹å°±å¯ä»¥è¯·æ±‚ã€ä½¿ç”¨å®ƒä»¬ã€‚</p>
</li>
<li>
<p>OOM è§¦å‘çš„æ—¶æœºåŸºäºè™šæ‹Ÿå†…å­˜ã€‚æ¢å¥è¯è¯´ï¼Œè¿›ç¨‹åœ¨ç”³è¯·å†…å­˜æ—¶ï¼Œå¦‚æœç”³è¯·çš„è™šæ‹Ÿå†…å­˜åŠ ä¸ŠæœåŠ¡å™¨å®é™…å·²ç”¨çš„å†…å­˜ä¹‹å’Œï¼Œæ¯”æ€»çš„ç‰©ç†å†…å­˜è¿˜å¤§ï¼Œå°±ä¼šè§¦å‘ OOMã€‚</p>
</li>
<li>
<p>è¦ç¡®å®šä¸€ä¸ªè¿›ç¨‹æˆ–è€…å®¹å™¨çš„æœ€å°å†…å­˜ï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯è®©å®ƒè¿è¡Œèµ·æ¥ï¼Œå†é€šè¿‡ ps æˆ–è€… smap ï¼ŒæŸ¥çœ‹å®ƒçš„å†…å­˜ä½¿ç”¨æƒ…å†µã€‚ä¸è¿‡è¦æ³¨æ„ï¼Œè¿›ç¨‹åˆšå¯åŠ¨æ—¶ï¼Œå¯èƒ½è¿˜æ²¡å¼€å§‹å¤„ç†å®é™…ä¸šåŠ¡ï¼Œä¸€æ—¦å¼€å§‹å¤„ç†å®é™…ä¸šåŠ¡ï¼Œå°±ä¼šå ç”¨æ›´å¤šå†…å­˜ã€‚æ‰€ä»¥ï¼Œè¦è®°å¾—ç»™å†…å­˜ç•™ä¸€å®šçš„ä½™é‡ã€‚</p>
</li>
</ol><h2>é—®é¢˜2: æ–‡ä»¶ç³»ç»Ÿä¸ç£ç›˜çš„åŒºåˆ«</h2><p>æ–‡ä»¶ç³»ç»Ÿå’Œç£ç›˜çš„åŸç†ï¼Œæˆ‘å°†åœ¨ä¸‹ä¸€ä¸ªæ¨¡å—ä¸­è®²è§£ï¼Œå®ƒä»¬è·Ÿå†…å­˜çš„å…³ç³»ä¹Ÿååˆ†å¯†åˆ‡ã€‚ä¸è¿‡ï¼Œåœ¨å­¦ä¹ Buffer å’Œ Cache çš„åŸç†æ—¶ï¼Œæˆ‘æ›¾æåˆ°ï¼ŒBuffer ç”¨äºç£ç›˜ï¼Œè€Œ Cache ç”¨äºæ–‡ä»¶ã€‚å› æ­¤ï¼Œæœ‰ä¸å°‘åŒå­¦å›°æƒ‘äº†ï¼Œæ¯”å¦‚ JJ ç•™è¨€ä¸­çš„è¿™ä¸¤ä¸ªé—®é¢˜ã€‚</p><ul>
<li>
<p>è¯»å†™æ–‡ä»¶æœ€ç»ˆä¹Ÿæ˜¯è¯»å†™ç£ç›˜ï¼Œåˆ°åº•è¦æ€ä¹ˆåŒºåˆ†ï¼Œæ˜¯è¯»å†™æ–‡ä»¶è¿˜æ˜¯è¯»å†™ç£ç›˜å‘¢ï¼Ÿ</p>
</li>
<li>
<p>è¯»å†™ç£ç›˜éš¾é“å¯ä»¥ä¸ç»è¿‡æ–‡ä»¶ç³»ç»Ÿå—ï¼Ÿ</p>
</li>
</ul><p><img src="https://static001.geekbang.org/resource/image/6a/b1/6ac5f2e0bf43098a3ba2d14f057eeeb1.png" alt=""></p><p>å¦‚æœä½ ä¹Ÿæœ‰ç›¸åŒçš„ç–‘é—®ï¼Œä¸»è¦è¿˜æ˜¯æ²¡ææ¸…æ¥šï¼Œç£ç›˜å’Œæ–‡ä»¶çš„åŒºåˆ«ã€‚æˆ‘åœ¨â€œ<a href="https://time.geekbang.org/column/article/74633">æ€ä¹ˆç†è§£å†…å­˜ä¸­çš„Bufferå’ŒCache</a>â€æ–‡ç« çš„ç•™è¨€åŒºç®€å•å›å¤è¿‡ï¼Œä¸è¿‡æ‹…å¿ƒæœ‰åŒå­¦æ²¡æœ‰çœ‹åˆ°ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œé‡æ–°è®²ä¸€ä¸‹ã€‚</p><p>ç£ç›˜æ˜¯ä¸€ä¸ªå­˜å‚¨è®¾å¤‡ï¼ˆç¡®åˆ‡åœ°è¯´æ˜¯å—è®¾å¤‡ï¼‰ï¼Œå¯ä»¥è¢«åˆ’åˆ†ä¸ºä¸åŒçš„ç£ç›˜åˆ†åŒºã€‚è€Œåœ¨ç£ç›˜æˆ–è€…ç£ç›˜åˆ†åŒºä¸Šï¼Œè¿˜å¯ä»¥å†åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶æŒ‚è½½åˆ°ç³»ç»Ÿçš„æŸä¸ªç›®å½•ä¸­ã€‚è¿™æ ·ï¼Œç³»ç»Ÿå°±å¯ä»¥é€šè¿‡è¿™ä¸ªæŒ‚è½½ç›®å½•ï¼Œæ¥è¯»å†™æ–‡ä»¶ã€‚</p><p>æ¢å¥è¯è¯´ï¼Œç£ç›˜æ˜¯å­˜å‚¨æ•°æ®çš„å—è®¾å¤‡ï¼Œä¹Ÿæ˜¯æ–‡ä»¶ç³»ç»Ÿçš„è½½ä½“ã€‚æ‰€ä»¥ï¼Œæ–‡ä»¶ç³»ç»Ÿç¡®å®è¿˜æ˜¯è¦é€šè¿‡ç£ç›˜ï¼Œæ¥ä¿è¯æ•°æ®çš„æŒä¹…åŒ–å­˜å‚¨ã€‚</p><p>ä½ åœ¨å¾ˆå¤šåœ°æ–¹éƒ½ä¼šçœ‹åˆ°è¿™å¥è¯ï¼Œ Linux ä¸­ä¸€åˆ‡çš†æ–‡ä»¶ã€‚æ¢å¥è¯è¯´ï¼Œä½ å¯ä»¥é€šè¿‡ç›¸åŒçš„æ–‡ä»¶æ¥å£ï¼Œæ¥è®¿é—®ç£ç›˜å’Œæ–‡ä»¶ï¼ˆæ¯”å¦‚ openã€readã€writeã€close ç­‰ï¼‰ã€‚</p><ul>
<li>
<p>æˆ‘ä»¬é€šå¸¸è¯´çš„â€œæ–‡ä»¶â€ï¼Œå…¶å®æ˜¯æŒ‡æ™®é€šæ–‡ä»¶ã€‚</p>
</li>
<li>
<p>è€Œç£ç›˜æˆ–è€…åˆ†åŒºï¼Œåˆ™æ˜¯æŒ‡å—è®¾å¤‡æ–‡ä»¶ã€‚</p>
</li>
</ul><p>ä½ å¯ä»¥æ‰§è¡Œ â€œls -l &lt;è·¯å¾„&gt;â€ æŸ¥çœ‹å®ƒä»¬çš„åŒºåˆ«ã€‚å¦‚æœä¸æ‡‚ls è¾“å‡ºçš„å«ä¹‰ï¼Œåˆ«å¿˜äº†manä¸€ä¸‹å°±å¯ä»¥ã€‚æ‰§è¡Œ man ls å‘½ä»¤ï¼Œä»¥åŠ info â€˜(coreutils) ls invocationâ€™ å‘½ä»¤ï¼Œå°±å¯ä»¥æŸ¥åˆ°äº†ã€‚</p><p>åœ¨è¯»å†™æ™®é€šæ–‡ä»¶æ—¶ï¼ŒI/O è¯·æ±‚ä¼šé¦–å…ˆç»è¿‡æ–‡ä»¶ç³»ç»Ÿï¼Œç„¶åç”±æ–‡ä»¶ç³»ç»Ÿè´Ÿè´£ï¼Œæ¥ä¸ç£ç›˜è¿›è¡Œäº¤äº’ã€‚è€Œåœ¨è¯»å†™å—è®¾å¤‡æ–‡ä»¶æ—¶ï¼Œä¼šè·³è¿‡æ–‡ä»¶ç³»ç»Ÿï¼Œç›´æ¥ä¸ç£ç›˜äº¤äº’ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„â€œè£¸I/Oâ€ã€‚</p><p>è¿™ä¸¤ç§è¯»å†™æ–¹å¼ä½¿ç”¨çš„ç¼“å­˜è‡ªç„¶ä¸åŒã€‚æ–‡ä»¶ç³»ç»Ÿç®¡ç†çš„ç¼“å­˜ï¼Œå…¶å®å°±æ˜¯ Cache çš„ä¸€éƒ¨åˆ†ã€‚è€Œè£¸ç£ç›˜çš„ç¼“å­˜ï¼Œç”¨çš„æ­£æ˜¯Bufferã€‚</p><p>æ›´å¤šå…³äºæ–‡ä»¶ç³»ç»Ÿã€ç£ç›˜ä»¥åŠ I/O çš„åŸç†ï¼Œä½ å…ˆä¸è¦ç€æ€¥ï¼Œå¾€åæˆ‘ä»¬éƒ½ä¼šè®²åˆ°ã€‚</p><h2>é—®é¢˜3: å¦‚ä½•ç»Ÿè®¡æ‰€æœ‰è¿›ç¨‹çš„ç‰©ç†å†…å­˜ä½¿ç”¨é‡</h2><p>è¿™å…¶å®æ˜¯ <a href="https://time.geekbang.org/column/article/74633">æ€ä¹ˆç†è§£å†…å­˜ä¸­çš„Bufferå’ŒCache</a> çš„è¯¾åæ€è€ƒé¢˜ï¼Œæ— åè€å’ã€Griffinã€JohnT3e ç­‰å°‘æ•°å‡ ä¸ªåŒå­¦ï¼Œéƒ½ç»™å‡ºäº†ä¸€äº›æ€è·¯ã€‚</p><p>æ¯”å¦‚ï¼Œæ— åè€å’åŒå­¦çš„æ–¹æ³•ï¼Œæ˜¯æŠŠæ‰€æœ‰è¿›ç¨‹çš„ RSS å…¨éƒ¨ç´¯åŠ ï¼š</p><p><img src="https://static001.geekbang.org/resource/image/ba/64/baa48809addf1f7b4d7c280f4ce03764.png" alt=""></p><p>è¿™ç§æ–¹æ³•ï¼Œå®é™…ä¸Šå¯¼è‡´ä¸å°‘åœ°æ–¹ä¼šè¢«é‡å¤è®¡ç®—ã€‚RSS è¡¨ç¤ºå¸¸é©»å†…å­˜ï¼ŒæŠŠè¿›ç¨‹ç”¨åˆ°çš„å…±äº«å†…å­˜ä¹Ÿç®—äº†è¿›å»ã€‚æ‰€ä»¥ï¼Œç›´æ¥ç´¯åŠ ä¼šå¯¼è‡´å…±äº«å†…å­˜è¢«é‡å¤è®¡ç®—ï¼Œä¸èƒ½å¾—åˆ°å‡†ç¡®çš„ç­”æ¡ˆã€‚</p><p>ç•™è¨€ä¸­å¥½å‡ ä¸ªåŒå­¦çš„ç­”æ¡ˆéƒ½æœ‰ç±»ä¼¼é—®é¢˜ã€‚ä½ å¯ä»¥é‡æ–°æ£€æŸ¥ä¸€ä¸‹è‡ªå·±çš„æ–¹æ³•ï¼Œå¼„æ¸…æ¥šæ¯ä¸ªæŒ‡æ ‡çš„å®šä¹‰å’ŒåŸç†ï¼Œé˜²æ­¢é‡å¤è®¡ç®—ã€‚</p><p>å½“ç„¶ï¼Œä¹Ÿæœ‰åŒå­¦çš„æ€è·¯éå¸¸æ­£ç¡®ï¼Œæ¯”å¦‚ JohnT3e æåˆ°çš„ï¼Œè¿™ä¸ªé—®é¢˜çš„å…³é”®åœ¨äºç†è§£ PSS çš„å«ä¹‰ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/f5/1c/f5c56462ba5c821de1454a9c021e0f1c.png" alt=""></p><p>ä½ å½“ç„¶å¯ä»¥é€šè¿‡ stackexchange ä¸Šçš„<a href="https://unix.stackexchange.com/questions/33381/getting-information-about-a-process-memory-usage-from-proc-pid-smaps">é“¾æ¥</a>æ‰¾åˆ°ç­”æ¡ˆï¼Œä¸è¿‡ï¼Œæˆ‘è¿˜æ˜¯æ›´æ¨èï¼Œç›´æ¥æŸ¥ proc æ–‡ä»¶ç³»ç»Ÿçš„<a href="https://www.kernel.org/doc/Documentation/filesystems/proc.txt">æ–‡æ¡£</a>ï¼š</p><blockquote>
<p>The â€œproportional set sizeâ€ (PSS) of a process is the count of pages it has in memory, where each page is divided by the number of processes sharing it. So if a process has 1000 pages all to itself, and 1000 shared with one other process, its PSS will be 1500.</p>
</blockquote><p>è¿™é‡Œæˆ‘ç®€å•è§£é‡Šä¸€ä¸‹ï¼Œæ¯ä¸ªè¿›ç¨‹çš„PSS ï¼Œæ˜¯æŒ‡æŠŠå…±äº«å†…å­˜å¹³åˆ†åˆ°å„ä¸ªè¿›ç¨‹åï¼Œå†åŠ ä¸Šè¿›ç¨‹æœ¬èº«çš„éå…±äº«å†…å­˜å¤§å°çš„å’Œã€‚</p><p>å°±åƒæ–‡æ¡£ä¸­çš„è¿™ä¸ªä¾‹å­ï¼Œä¸€ä¸ªè¿›ç¨‹çš„éå…±äº«å†…å­˜ä¸º  1000 é¡µï¼Œå®ƒå’Œå¦ä¸€ä¸ªè¿›ç¨‹çš„å…±äº«è¿›ç¨‹ä¹Ÿæ˜¯  1000 é¡µï¼Œé‚£ä¹ˆå®ƒçš„PSS=1000/2+1000=1500 é¡µã€‚</p><p>è¿™æ ·ï¼Œä½ å°±å¯ä»¥ç›´æ¥ç´¯åŠ  PSS ï¼Œä¸ç”¨æ‹…å¿ƒå…±äº«å†…å­˜é‡å¤è®¡ç®—çš„é—®é¢˜äº†ã€‚</p><p>æ¯”å¦‚ï¼Œä½ å¯ä»¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥è®¡ç®—ï¼š</p><pre><code># ä½¿ç”¨grepæŸ¥æ‰¾PssæŒ‡æ ‡åï¼Œå†ç”¨awkè®¡ç®—ç´¯åŠ å€¼
$ grep Pss /proc/[1-9]*/smaps | awk '{total+=$2}; END {printf &quot;%d kB\n&quot;, total }'
391266 kB
</code></pre><h2>é—®é¢˜4: CentOSç³»ç»Ÿä¸­å¦‚ä½•å®‰è£… bcc-tools</h2><p>å¾ˆå¤šåŒå­¦ç•™è¨€è¯´ç”¨çš„æ˜¯ CentOS ç³»ç»Ÿã€‚è™½ç„¶æˆ‘åœ¨æ–‡ç« ä¸­ä¹Ÿç»™å‡ºäº†ä¸€ä¸ª<a href="https://github.com/iovisor/bcc/issues/462">å‚è€ƒæ–‡æ¡£</a>ï¼Œä¸è¿‡ bcc-tools å·¥å…·å®‰è£…èµ·æ¥è¿˜æ˜¯æœ‰äº›å›°éš¾ã€‚</p><p>æ¯”å¦‚ç™½ååŒå­¦ç•™è¨€è¡¨ç¤ºï¼Œç½‘ç»œä¸Šçš„æ•™ç¨‹ä¸å¤ªå®Œæ•´ï¼Œæ­¥éª¤æœ‰äº›ä¹±ï¼š</p><p><img src="https://static001.geekbang.org/resource/image/03/91/036cde548f2455e3d80b6b1c50e33c91.png" alt=""></p><p>ä¸è¿‡ï¼Œç™½åå’Œæ¸¡æ¸¡é¸Ÿ_linuxåŒå­¦åœ¨æ¢ç´¢å®è·µåï¼Œç•™è¨€åˆ†äº«äº†ä»–ä»¬çš„ç»éªŒï¼Œæ„Ÿè°¢ä½ ä»¬çš„åˆ†äº«ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/8b/17/8b80a335c3fa543226f42dcb2c506017.png" alt=""><img src="https://static001.geekbang.org/resource/image/f3/0d/f34b80fc9f7eefc928959bfb41ce590d.png" alt=""></p><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä¹Ÿç»Ÿä¸€å›å¤ä¸€ä¸‹ï¼Œåœ¨ CentOS ä¸­å®‰è£… bcc-tools çš„æ­¥éª¤ã€‚ä»¥ CentOS 7 ä¸ºä¾‹ï¼Œæ•´ä¸ªå®‰è£…ä¸»è¦å¯ä»¥åˆ†ä¸¤æ­¥ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼Œå‡çº§å†…æ ¸ã€‚ä½ å¯ä»¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥æ“ä½œï¼š</p><pre><code># å‡çº§ç³»ç»Ÿ
yum update -y

# å®‰è£…ELRepo
rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org
rpm -Uvh https://www.elrepo.org/elrepo-release-7.0-3.el7.elrepo.noarch.rpm

# å®‰è£…æ–°å†…æ ¸
yum remove -y kernel-headers kernel-tools kernel-tools-libs
yum --enablerepo=&quot;elrepo-kernel&quot; install -y kernel-ml kernel-ml-devel kernel-ml-headers kernel-ml-tools kernel-ml-tools-libs kernel-ml-tools-libs-devel

# æ›´æ–°Grubåé‡å¯
grub2-mkconfig -o /boot/grub2/grub.cfg
grub2-set-default 0
reboot

# é‡å¯åç¡®è®¤å†…æ ¸ç‰ˆæœ¬å·²å‡çº§ä¸º4.20.0-1.el7.elrepo.x86_64
uname -r
</code></pre><p>ç¬¬äºŒæ­¥ï¼Œå®‰è£… bcc-toolsï¼š</p><pre><code># å®‰è£…bcc-tools
yum install -y bcc-tools

# é…ç½®PATHè·¯å¾„
export PATH=$PATH:/usr/share/bcc/tools

# éªŒè¯å®‰è£…æˆåŠŸ
cachestat 
</code></pre><h2>é—®é¢˜5: å†…å­˜æ³„æ¼æ¡ˆä¾‹çš„ä¼˜åŒ–æ–¹æ³•</h2><p>è¿™æ˜¯æˆ‘åœ¨ <a href="https://time.geekbang.org/column/article/75670">å†…å­˜æ³„æ¼äº†ï¼Œæˆ‘è¯¥å¦‚ä½•å®šä½å’Œå¤„ç†</a> ä¸­ç•™çš„ä¸€ä¸ªæ€è€ƒé¢˜ã€‚è¿™ä¸ªé—®é¢˜æ˜¯è¿™æ ·çš„ï¼š</p><p>åœ¨å†…å­˜æ³„æ¼æ¡ˆä¾‹çš„æœ€åï¼Œæˆ‘ä»¬é€šè¿‡å¢åŠ  free() è°ƒç”¨ï¼Œé‡Šæ”¾äº†å‡½æ•° fibonacci() åˆ†é…çš„å†…å­˜ï¼Œä¿®å¤äº†å†…å­˜æ³„æ¼çš„é—®é¢˜ã€‚å°±è¿™ä¸ªæ¡ˆä¾‹è€Œè¨€ï¼Œè¿˜æœ‰æ²¡æœ‰å…¶ä»–æ›´å¥½çš„ä¿®å¤æ–¹æ³•å‘¢ï¼Ÿ</p><p>å¾ˆå¤šåŒå­¦ç•™è¨€å†™ä¸‹äº†è‡ªå·±çš„æƒ³æ³•ï¼Œéƒ½å¾ˆä¸é”™ã€‚è¿™é‡Œï¼Œæˆ‘é‡ç‚¹è¡¨æ‰¬ä¸‹éƒ­æ±Ÿä¼ŸåŒå­¦ï¼Œä»–ç»™å‡ºçš„æ–¹æ³•éå¸¸å¥½ï¼š</p><p><img src="https://static001.geekbang.org/resource/image/75/e4/757c532b561d142306c435a57277cae4.png" alt=""></p><p>ä»–çš„æ€è·¯æ˜¯ä¸ç”¨åŠ¨æ€å†…å­˜åˆ†é…çš„æ–¹æ³•ï¼Œè€Œæ˜¯ç”¨æ•°ç»„æ¥æš‚å­˜è®¡ç®—ç»“æœã€‚è¿™æ ·å°±å¯ä»¥ç”±ç³»ç»Ÿè‡ªåŠ¨ç®¡ç†è¿™äº›æ ˆå†…å­˜ï¼Œä¹Ÿä¸å­˜åœ¨å†…å­˜æ³„æ¼çš„é—®é¢˜äº†ã€‚</p><p>è¿™ç§å‡å°‘åŠ¨æ€å†…å­˜åˆ†é…çš„æ€è·¯ï¼Œé™¤äº†å¯ä»¥è§£å†³å†…å­˜æ³„æ¼é—®é¢˜ï¼Œå…¶å®ä¹Ÿæ˜¯å¸¸ç”¨çš„å†…å­˜ä¼˜åŒ–æ–¹æ³•ã€‚æ¯”å¦‚ï¼Œåœ¨éœ€è¦å¤§é‡å†…å­˜çš„åœºæ™¯ä¸­ï¼Œä½ å°±å¯ä»¥è€ƒè™‘ç”¨æ ˆå†…å­˜ã€å†…å­˜æ± ã€HugePage ç­‰æ–¹æ³•ï¼Œæ¥ä¼˜åŒ–å†…å­˜çš„åˆ†é…å’Œç®¡ç†ã€‚</p><p>é™¤äº†è¿™äº”ä¸ªé—®é¢˜ï¼Œè¿˜æœ‰ä¸€ç‚¹æˆ‘ä¹Ÿæƒ³è¯´ä¸€ä¸‹ã€‚å¾ˆå¤šåŒå­¦åœ¨è¯´å·¥å…·çš„ç‰ˆæœ¬é—®é¢˜ï¼Œçš„ç¡®ï¼Œç”Ÿäº§ç¯å¢ƒä¸­çš„ Linux ç‰ˆæœ¬å¾€å¾€éƒ½æ¯”è¾ƒä½ï¼Œå¯¼è‡´å¾ˆå¤šæ–°å·¥å…·ä¸èƒ½åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç›´æ¥ä½¿ç”¨ã€‚</p><p>ä¸è¿‡ï¼Œè¿™å¹¶ä¸ä»£è¡¨æˆ‘ä»¬å°±æ— èƒ½ä¸ºåŠ›äº†ã€‚æ¯•ç«Ÿï¼Œç³»ç»Ÿçš„åŸç†éƒ½æ˜¯å¤§åŒå°å¼‚çš„ã€‚è¿™å…¶å®ä¹Ÿæ˜¯æˆ‘ä¸€ç›´å¼ºè°ƒçš„è§‚ç‚¹ã€‚</p><ul>
<li>
<p>åœ¨å­¦ä¹ æ—¶ï¼Œæœ€å¥½å…ˆç”¨æœ€æ–°çš„ç³»ç»Ÿå’Œå·¥å…·ï¼Œå®ƒä»¬å¯ä»¥ä¸ºä½ æä¾›æ›´ç®€å•ç›´è§‚çš„ç»“æœï¼Œå¸®ä½ æ›´å¥½çš„ç†è§£ç³»ç»Ÿçš„åŸç†ã€‚</p>
</li>
<li>
<p>åœ¨ä½ æŒæ¡äº†è¿™äº›åŸç†åï¼Œå›è¿‡å¤´æ¥ï¼Œå†å»ç†è§£æ—§ç‰ˆæœ¬ç³»ç»Ÿä¸­çš„å·¥å…·å’ŒåŸç†ï¼Œä½ ä¼šå‘ç°ï¼Œå³ä¾¿æ—§ç‰ˆæœ¬ä¸­çš„å¾ˆå¤šå·¥å…·å¹¶ä¸æ˜¯é‚£ä¹ˆå¥½ç”¨ï¼Œä½†æ˜¯åŸç†å’ŒæŒ‡æ ‡æ˜¯ç±»ä¼¼çš„ï¼Œä½ ä¾ç„¶å¯ä»¥è½»æ¾æŒæ¡å®ƒä»¬çš„ä½¿ç”¨æ–¹æ³•ã€‚</p>
</li>
</ul><p>æœ€åï¼Œæ¬¢è¿ç»§ç»­åœ¨ç•™è¨€åŒºå†™ä¸‹ä½ çš„ç–‘é—®ï¼Œæˆ‘ä¼šæŒç»­ä¸æ–­åœ°è§£ç­”ã€‚æˆ‘çš„ç›®çš„ä¸å˜ï¼Œå¸Œæœ›å¯ä»¥å’Œä½ ä¸€èµ·ï¼ŒæŠŠæ–‡ç« çš„çŸ¥è¯†å˜æˆä½ çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬ä¸ä»…ä»…åœ¨å®æˆ˜ä¸­æ¼”ç»ƒï¼Œä¹Ÿè¦åœ¨äº¤æµä¸­è¿›æ­¥ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/a3/e9/a396aed4116c2c989771c1295736abe9.jpg" alt=""></p>
                    </div>
                </div>

            </div>
            <div data-v-87ffcada="" class="article-comments pd"><h2 data-v-87ffcada=""><span
                    data-v-87ffcada="">ç²¾é€‰ç•™è¨€</span></h2>
                <ul data-v-87ffcada="">
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/14/13/52/db1b01fc.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">ç™½å</span>
                            </div>
                            <div class="bd">è‡ªå·±è·‘è™šæ‹Ÿæœºè·‘çš„k8så°é›†ç¾¤ï¼ŒnodeèŠ‚ç‚¹è·‘çš„é•œåƒå¤ªå¤šï¼Œå°±ç‰¹åˆ«å¡ï¼Œçœ‹é›†ç¾¤æƒ…å†µå‘ç°å¥½å¤špodéƒ½æ­»äº†ï¼Œçœ‹è™šæ‹Ÿæœºä¸Šé¢å°±å†™åˆ°oomè‡ªåŠ¨æ€è¿›ç¨‹äº†ï¼Œä»¥å‰ä»æ²¡é‡åˆ°è¿‡oomï¼Œè¿™æ¬¡ä¸€ä¸‹å°±çŸ¥é“æ€ä¹ˆå›äº‹äº† <br></div>
                            <span class="time">2019-01-09 07:28</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ğŸ˜Š k8såˆ«å¿˜äº†è®¾ç½®å¥½å†…å­˜èµ„æºçš„è¯·æ±‚å’Œé™åˆ¶</p>
                                <p class="reply-time">2019-01-09 17:51</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">åˆ’æ—¶ä»£</span>
                            </div>
                            <div class="bd">è€å¸ˆï¼Œåœ¨â€œå¦‚ä½•ç»Ÿè®¡æ‰€æœ‰è¿›ç¨‹çš„ç‰©ç†å†…å­˜ä½¿ç”¨é‡â€çš„é—®é¢˜ä¸­ï¼Œæˆ‘æ›¾å°è¯•å°†&#47;proc&#47;[pid]&#47;smapsä¸­çš„é¡¹Pssç›¸åŠ ï¼Œä½†å‘ç°ä¸€ä¸ªè¿›ç¨‹ä¸­æœ‰å¤šä¸ªåœ°å€æ®µçš„Pssä¸º0kBï¼Œè€ŒRssæ˜¯ä¸ä¸º0kBçš„ï¼Œè¯¥åŒºåŸŸå ç”¨äº†ç‰©ç†å†…å­˜å´æ²¡æœ‰è®¡ç®—åœ¨Psså†…ï¼Œè¡¨ç¤ºä¸å¤ªç†è§£ï¼Ÿ <br></div>
                            <span class="time">2019-01-09 10:16</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ä»€ä¹ˆè¿›ç¨‹ï¼Ÿ</p>
                                <p class="reply-time">2019-01-10 20:57</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/20/36/b3e2f1d5.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">wykkx</span>
                            </div>
                            <div class="bd">è€å¸ˆæ‚¨å¥½ï¼Œè¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œæ‚¨è¯´åŒ¿åé¡µå›æ”¶æ˜¯ä½¿ç”¨swapæœºåˆ¶ï¼Œé‚£ä¹ˆè¿™é‡Œæœ‰å‡ ä¸ªé—®é¢˜ï¼šä¸€æ˜¯å¦‚æœæˆ‘çš„ç³»ç»Ÿä¸å¼€å¯swapï¼ˆç°åœ¨å¾ˆå¤šç³»ç»Ÿéƒ½æ˜¯ä¸å¼€å¯swapçš„ï¼Œå°¤å…¶æ˜¯webç±»åº”ç”¨ï¼Œä¸ºäº†æå‡å“åº”æ—¶é—´ï¼‰ï¼Œé‚£ä¹ˆåŒ¿åé¡µè¿˜æ€ä¹ˆå›æ”¶ï¼ŸäºŒæ˜¯å³ä½¿æˆ‘å¼€å¯äº†swapï¼ŒåŒ¿åé¡µè¢«æ”¾åˆ°äº†swapä¸Šï¼Œé‚£ä¹ˆswapæ˜¯å¦‚ä½•æ¸…ç†è¿™äº›åŒ¿åé¡µçš„ï¼Œæ€»ä¸èƒ½ä¸€è‡´ä¿å­˜è¿™äº›åŒ¿åé¡µå§ã€‚è°¢è°¢è€å¸ˆ<br>2019-01-10<br>î˜ˆ ä½œè€…å›å¤<br>1. ä¸å¼€swapï¼Œæ²¡æ³•å›æ”¶<br>2. å–å†³äºè¿™äº›é¡µçš„å®é™…è®¿é—®æƒ…å†µï¼Œåªè¦ä¸€è®¿é—®ï¼Œå°±ä¼šæ¢å…¥åˆ°å†…å­˜ä¸­<br>---------è¿½é—®-------------------------<br>é¦–å…ˆè°¢è°¢è€å¸ˆçš„é—®ç­”ï¼Œå¯èƒ½æ˜¯æˆ‘æ²¡æœ‰æè¿°æ¸…æ¥šã€‚ä¸€æ˜¯ï¼Œå¦‚æœæŒ‰ç…§è€å¸ˆè¯´çš„â€œä¸å¼€swapï¼Œæ²¡æ³•å›æ”¶â€é‚£ä¹ˆæˆ‘ç³»ç»Ÿäº§ç”Ÿçš„å¤§é‡åŒ¿åé¡µæ€ä¹ˆåŠï¼Ÿæ˜¯ä¸æ˜¯ä¸€ç›´åœ¨å†…å­˜é‡Œï¼Œä¸èƒ½è¢«å›æ”¶ï¼Ÿç›´åˆ°å¼•å‘oomï¼ŒæŠŠè¿™ä¸ªè¿›ç¨‹å¹²æ‰ï¼Ÿï¼›äºŒæ˜¯â€œ å–å†³äºè¿™äº›é¡µçš„å®é™…è®¿é—®æƒ…å†µï¼Œåªè¦ä¸€è®¿é—®ï¼Œå°±ä¼šæ¢å…¥åˆ°å†…å­˜ä¸­â€å¦‚æœè¿™äº›è¢«æ¢åˆ°swapä¸Šçš„åŒ¿åé¡µé‡å¾ˆå¤§ ï¼ŒæŠŠswapéƒ½å†™æ»¡äº†ï¼Œè¿™ä¸ªæ—¶å€™æ˜¯æ€ä¹ˆé€‰æ‹©ä»swapé‡Œæ¸…ç†å“ªäº›åŒ¿åé¡µå‘¢ï¼Ÿ <br></div>
                            <span class="time">2019-01-12 11:19</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="http://thirdwx.qlogo.cn/mmopen/vi_32/dwehJHP4ycAfDb9MoudXb4QSt7YgmISqwwsa928XZ6aTWqwWh0kx0iatjocSibLa7iajXmbGlJ5svegY3P6LfKJ0w/132" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">solar</span>
                            </div>
                            <div class="bd">æˆ‘æƒ³è¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨æˆ‘çš„ç³»ç»Ÿä¸­ï¼Œ64Gçš„å†…å­˜åŸºæœ¬è¢«è€—å°½ï¼Œä½†æ˜¯æœ‰14ä¸ªGçš„cacheï¼Œæˆ‘æƒ³æŸ¥è¯¢åˆ°åº•æ˜¯å“ªä¸ªè¿›ç¨‹ä½¿ç”¨äº†è¿™ä¹ˆå¤šçš„cacheï¼Œå¦‚ä½•æŸ¥è¯¢å‘¢ï¼Ÿæˆ‘ä½¿ç”¨top,smemç­‰å·¥å…·ï¼Œéƒ½çœ‹ä¸åˆ°åˆ°åº•æ˜¯å“ªä¸ªè¿›ç¨‹ä½¿ç”¨è¿™ä¹ˆå¤šçš„cacheï¼Œè¯·æŒ‡æ•™å¦‚ä½•æŸ¥è¯¢ã€‚ <br></div>
                            <span class="time">2019-01-11 15:23</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/14/12/04/5837b21c.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Brownç¾Šç¾Š</span>
                            </div>
                            <div class="bd">æ‰“å¡ä¸€ä¸‹ <br></div>
                            <span class="time">2019-01-11 11:16</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/02/5b/ce326cfc.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Orcsir</span>
                            </div>
                            <div class="bd">Flag<br>è¿˜å¥½æ²¡æ‰é˜Ÿï¼Œè¿™ç§å®šæœŸçš„ç­”ç–‘ä¸æ€»ç»“è¶…èµã€‚ <br></div>
                            <span class="time">2019-01-10 21:00</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æˆ‘æ¥ä¹Ÿ</span>
                            </div>
                            <div class="bd">[D22æ‰“å¡]<br>é€šè¿‡å­¦ä¹  å†…å­˜æ€§èƒ½ç¯‡ å¯¹linuxå†…å­˜çš„åˆ†é…æœ‰äº†æ›´æ·±å…¥çš„ç†è§£.<br>å‡†å¤‡ç”¨å­¦ä¹ çš„çŸ¥è¯†æ¥åˆ†æç”Ÿäº§ç¯å¢ƒä¸­çš„ä¸€ä¸ªå†…å­˜é—®é¢˜:<br>æŸä¸ªè¿›ç¨‹(C+LUA)å†…å­˜æŒç»­å‡é«˜,céƒ¨åˆ†çš„å†…å­˜æ˜¯ç¨‹åºå¯åŠ¨æ—¶å°±ç”³è¯·å¥½äº†çš„,è¿è¡Œè¿‡ç¨‹ä¸­ä¸ä¼šæœ‰æ˜æ˜¾å˜åŒ–.<br>luaä¸­é€šè¿‡è°ƒç”¨ collectgarbage(&#39;count&#39;)  å’Œ   collectgarbage(&#39;collect&#39;) æ¯”è¾ƒå›æ”¶å‰å’Œå›æ”¶åçš„å†…å­˜.<br>å¯åŠ¨æ—¶æ•´ä¸ªç¨‹åºçš„å®é™…å ç”¨å†…å­˜100M, è·‘ä¸äº†ä¸€å¤©, å®é™…å†…å­˜å°±å‡åˆ°äº†400M+,è€ŒLUAä¸­æ‰“å°çš„å†…å­˜ä¹Ÿæ‰70M+.<br>è™½ç„¶ä¹Ÿäº†è§£luaè™šæ‹Ÿæœºé‡Šæ”¾çš„å†…å­˜,å¹¶ä¸ä¼šåŠæ—¶çš„è¢«ç¨‹åºé‡Šæ”¾, ä½†è¿™å¤šå‡ºæ¥çš„200Må†…å­˜ä¸çŸ¥é“æ¶ˆè€—åœ¨ä»€ä¹ˆåœ°æ–¹äº†.<br>ä¸€å°æœºå™¨ä¸Š,åå‡ ä¸ªè¿›ç¨‹éƒ½è¿™æ ·,æ€»æ¶ˆè€—çš„å†…å­˜å°±æ¯”è¾ƒå¯è§‚äº†.<br><br>æœŸå¾…æ¥ä¸‹æ¥çš„ I&#47;O æ€§èƒ½ç¯‡.<br>æœ€è¿‘å‡ å¤©å¤ªå¿™äº†, æ˜¨å¤©å‡ºçš„æ–‡ç« ç°åœ¨æ‰æœ‰æ—¶é—´çœ‹.<br> <br></div>
                            <span class="time">2019-01-10 16:04</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/20/36/b3e2f1d5.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">wykkx</span>
                            </div>
                            <div class="bd">è€å¸ˆæ‚¨å¥½ï¼Œè¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œæ‚¨è¯´åŒ¿åé¡µå›æ”¶æ˜¯ä½¿ç”¨swapæœºåˆ¶ï¼Œé‚£ä¹ˆè¿™é‡Œæœ‰å‡ ä¸ªé—®é¢˜ï¼šä¸€æ˜¯å¦‚æœæˆ‘çš„ç³»ç»Ÿä¸å¼€å¯swapï¼ˆç°åœ¨å¾ˆå¤šç³»ç»Ÿéƒ½æ˜¯ä¸å¼€å¯swapçš„ï¼Œå°¤å…¶æ˜¯webç±»åº”ç”¨ï¼Œä¸ºäº†æå‡å“åº”æ—¶é—´ï¼‰ï¼Œé‚£ä¹ˆåŒ¿åé¡µè¿˜æ€ä¹ˆå›æ”¶ï¼ŸäºŒæ˜¯å³ä½¿æˆ‘å¼€å¯äº†swapï¼ŒåŒ¿åé¡µè¢«æ”¾åˆ°äº†swapä¸Šï¼Œé‚£ä¹ˆswapæ˜¯å¦‚ä½•æ¸…ç†è¿™äº›åŒ¿åé¡µçš„ï¼Œæ€»ä¸èƒ½ä¸€è‡´ä¿å­˜è¿™äº›åŒ¿åé¡µå§ã€‚è°¢è°¢è€å¸ˆ <br></div>
                            <span class="time">2019-01-10 08:43</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">1. ä¸å¼€swapï¼Œæ²¡æ³•å›æ”¶<br>2. å–å†³äºè¿™äº›é¡µçš„å®é™…è®¿é—®æƒ…å†µï¼Œåªè¦ä¸€è®¿é—®ï¼Œå°±ä¼šæ¢å…¥åˆ°å†…å­˜ä¸­</p>
                                <p class="reply-time">2019-01-10 20:44</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/40/12/b0206f40.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Bruce</span>
                            </div>
                            <div class="bd">è€å¸ˆå¥½ï¼Œå·¥ä½œä¸­é‡åˆ°è¿™æ ·æƒ…æ™¯ï¼š  ä¸€ä¸ªæœåŠ¡è·‘åœ¨Linuxä¸Šï¼Œ å®¢æˆ·ç«¯é€šè¿‡httpå’ŒæœåŠ¡ç«¯é€šä¿¡ï¼Œä¸ç®¡å®¢æˆ·ç«¯æ€ä¹ˆå¢åŠ ï¼ŒæœåŠ¡ç«¯çš„cpu memå§‹ç»ˆå˜åŒ–ä¸å¤§ï¼Œ è¿™ç§æƒ…å†µä¸‹æƒ³å¬å¬è€å¸ˆå¹³æ—¶ä¸€èˆ¬æ˜¯æ€ä¹ˆç³»ç»Ÿæ€§debugçš„ <br></div>
                            <span class="time">2019-01-10 07:58</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">é™¤äº†CPUã€Memï¼Œè¿˜æœ‰ I&#47;O å’Œç½‘ç»œï¼Œå…·ä½“æ€ä¹ˆåˆ†æè¿˜è¦çœ‹ä½ ç¢°åˆ°äº†ä»€ä¹ˆé—®é¢˜ã€‚cpuå’Œmemå˜åŒ–ä¸å¤§çœ‹èµ·æ¥æ˜¯ä¸ªå¥½äº‹å‘€</p>
                                <p class="reply-time">2019-01-10 20:48</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/ec/21/b0fe1bfd.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Adam</span>
                            </div>
                            <div class="bd">è¿™ä¸ªä¸“æ ï¼Œå¯¹äºè¿ç»´åŒå­¦æ¥è¯´çœŸæ˜¯å¤ªæ£’äº†ã€‚ <br></div>
                            <span class="time">2019-01-09 10:58</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ğŸ˜Š è°¢è°¢</p>
                                <p class="reply-time">2019-01-09 17:49</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/42/18/edc1b373.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">é£é£˜ï¼Œå¾ç‹¬æ€</span>
                            </div>
                            <div class="bd">æ‰“å¡ <br></div>
                            <span class="time">2019-01-09 08:52</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://wx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKQMM4m7NHuicr55aRiblTSEWIYe0QqbpyHweaoAbG7j2v7UUElqqeP3Ihrm3UfDPDRb1Hv8LvPwXqA/132" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">ninuxer</span>
                            </div>
                            <div class="bd">æ‰“å¡day23<br>å–œæ¬¢ä¸€ç¯‡æ–‡ç« çœ‹ä¸¤æ¬¡ï¼Œç¬¬ä¸€æ¬¡çœ‹ï¼Œç¬¬äºŒæ¬¡æ˜¯å®è·µçš„æ—¶å€™å†çœ‹ä¸€é <br></div>
                            <span class="time">2019-01-09 08:40</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ğŸ‘</p>
                                <p class="reply-time">2019-01-09 17:51</p>
                            </div>
                            
                        </div>
                    </li>
                    


                </ul>
            </div>
        </div>
    </div>
</div>
</body>
</html>