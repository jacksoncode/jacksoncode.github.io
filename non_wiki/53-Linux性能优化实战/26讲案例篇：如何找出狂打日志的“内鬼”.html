<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover">
    <meta name="format-detection" content="telephone=no">
    <style type="text/css">

#watermark {

  position: relative;
  overflow: hidden;
}

#watermark .x {
  position: absolute;
  top: 800;
  left: 400;
  color: #3300ff;
  font-size: 50px;
  pointer-events: none;
  opacity:0.3;
  filter:Alpha(opacity=50);
  -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
}
    </style>


    <style type="text/css">
 html{color:#333;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;text-rendering:optimizelegibility;font-family:Helvetica Neue,PingFang SC,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif}html.borderbox *,html.borderbox :after,html.borderbox :before{box-sizing:border-box}article,aside,blockquote,body,button,code,dd,details,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hr,input,legend,li,menu,nav,ol,p,pre,section,td,textarea,th,ul{margin:0;padding:0}article,aside,details,figcaption,figure,footer,header,menu,nav,section{display:block}audio,canvas,video{display:inline-block}body,button,input,select,textarea{font:300 1em/1.8 PingFang SC,Lantinghei SC,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,Helvetica,sans-serif}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}blockquote{position:relative;color:#999;font-weight:400;border-left:1px solid #1abc9c;padding-left:1em;margin:1em 3em 1em 2em}@media only screen and (max-width:640px){blockquote{margin:1em 0}}abbr,acronym{border-bottom:1px dotted;font-variant:normal}abbr{cursor:help}del{text-decoration:line-through}address,caption,cite,code,dfn,em,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}q:after,q:before{content:""}sub,sup{font-size:75%;line-height:0;position:relative}:root sub,:root sup{vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}a{color:#1abc9c}a:hover{text-decoration:underline}.typo a{border-bottom:1px solid #1abc9c}.typo a:hover{border-bottom-color:#555;color:#555}.typo a:hover,a,ins{text-decoration:none}.typo-u,u{text-decoration:underline}mark{background:#fffdd1;border-bottom:1px solid #ffedce;padding:2px;margin:0 5px}code,pre,pre tt{font-family:Courier,Courier New,monospace}pre{background:hsla(0,0%,97%,.7);border:1px solid #ddd;padding:1em 1.5em;display:block;-webkit-overflow-scrolling:touch}hr{border:none;border-bottom:1px solid #cfcfcf;margin-bottom:.8em;height:10px}.typo-small,figcaption,small{font-size:.9em;color:#888}b,strong{font-weight:700;color:#000}[draggable]{cursor:move}.clearfix:after,.clearfix:before{content:"";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.textwrap,.textwrap td,.textwrap th{word-wrap:break-word;word-break:break-all}.textwrap-table{table-layout:fixed}.serif{font-family:Palatino,Optima,Georgia,serif}.typo-dl,.typo-form,.typo-hr,.typo-ol,.typo-p,.typo-pre,.typo-table,.typo-ul,.typo dl,.typo form,.typo hr,.typo ol,.typo p,.typo pre,.typo table,.typo ul,blockquote{margin-bottom:1rem}h1,h2,h3,h4,h5,h6{font-family:PingFang SC,Helvetica Neue,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#000;line-height:1.35}.typo-h1,.typo-h2,.typo-h3,.typo-h4,.typo-h5,.typo-h6,.typo h1,.typo h2,.typo h3,.typo h4,.typo h5,.typo h6{margin-top:1.2em;margin-bottom:.6em;line-height:1.35}.typo-h1,.typo h1{font-size:2em}.typo-h2,.typo h2{font-size:1.8em}.typo-h3,.typo h3{font-size:1.6em}.typo-h4,.typo h4{font-size:1.4em}.typo-h5,.typo-h6,.typo h5,.typo h6{font-size:1.2em}.typo-ul,.typo ul{margin-left:1.3em;list-style:disc}.typo-ol,.typo ol{list-style:decimal;margin-left:1.9em}.typo-ol ol,.typo-ol ul,.typo-ul ol,.typo-ul ul,.typo li ol,.typo li ul{margin-bottom:.8em;margin-left:2em}.typo-ol ul,.typo-ul ul,.typo li ul{list-style:circle}.typo-table td,.typo-table th,.typo table caption,.typo table td,.typo table th{border:1px solid #ddd;padding:.5em 1em;color:#666}.typo-table th,.typo table th{background:#fbfbfb}.typo-table thead th,.typo table thead th{background:hsla(0,0%,95%,.7)}.typo table caption{border-bottom:none}.typo-input,.typo-textarea{-webkit-appearance:none;border-radius:0}.typo-em,.typo em,caption,legend{color:#000;font-weight:inherit}.typo-em{position:relative}.typo-em:after{position:absolute;top:.65em;left:0;width:100%;overflow:hidden;white-space:nowrap;content:"\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"}.typo img{max-width:100%}.common-content{font-weight:400;color:#353535;line-height:1.75rem;white-space:normal;word-break:normal;font-size:1rem}.common-content img{display:block;max-width:100%;background-color:#eee}.common-content audio,.common-content video{width:100%;background-color:#eee}.common-content center,.common-content font{margin-top:1rem;display:inline-block}.common-content center{width:100%}.common-content pre{margin-top:1rem;padding-left:0;padding-right:0;position:relative;overflow:hidden}.common-content pre code{font-size:.8rem;font-family:Consolas,Liberation Mono,Menlo,monospace,Courier;display:block;width:100%;box-sizing:border-box;padding-left:1rem;padding-right:1rem;overflow-x:auto}.common-content hr{border:none;margin-top:1.5rem;margin-bottom:1.5rem;border-top:1px solid #f5f5f5;height:1px;background:none}.common-content b,.common-content h1,.common-content h2,.common-content h3,.common-content h4,.common-content h5,.common-content strong{font-weight:700}.common-content h1,.common-content h2{font-size:1.125rem;margin-bottom:.45rem}.common-content h3,.common-content h4,.common-content h5{font-size:1rem;margin-bottom:.45rem}.common-content p{font-weight:400;color:#353535;margin-top:.15rem}.common-content .orange{color:#ff5a05}.common-content .reference{font-size:1rem;color:#888}.custom-rich-content h1{margin-top:0;font-weight:400;font-size:15.25px;border-bottom:1px solid #eee;line-height:2.8}.custom-rich-content li,.custom-rich-content p{font-size:14px;color:#888;line-height:1.6}table.hljs-ln{margin-bottom:0;border-spacing:0;border-collapse:collapse}table.hljs-ln,table.hljs-ln tbody,table.hljs-ln td,table.hljs-ln tr{box-sizing:border-box}table.hljs-ln td{padding:0;border:0}table.hljs-ln td.hljs-ln-numbers{min-width:15px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;cursor:pointer;user-select:none}table.hljs-ln td.hljs-ln-code,table.hljs-ln td.hljs-ln-numbers{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;line-height:20px;vertical-align:top}table.hljs-ln td.hljs-ln-code{position:relative;padding-right:10px;padding-left:10px;overflow:visible;color:#24292e;word-wrap:normal;white-space:pre}video::-webkit-media-controls{overflow:hidden!important}video::-webkit-media-controls-enclosure{width:calc(100% + 32px);margin-left:auto}.button-cancel{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel,.button-primary{-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary{color:#fff;background-color:#ff5a05;border-radius:3px}@font-face{font-family:iconfont;src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot);src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.woff) format("woff"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.ttf) format("truetype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.svg#iconfont) format("svg")}@font-face{font-family:player-font;src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot);src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.woff) format("woff"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.ttf) format("truetype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.svg#player-font) format("svg")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-webkit-text-stroke-width:.2px;-moz-osx-font-smoothing:grayscale}html{background:#fff;min-height:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{width:100%}body.fixed{overflow:hidden;position:fixed;width:100vw;height:100vh}i{font-style:normal}a{word-wrap:break-word;-webkit-tap-highlight-color:rgba(0,0,0,0)}a:hover{text-decoration:none}.fade-enter-active,.fade-leave-active{transition:opacity .3s}.fade-enter,.fade-leave-to{opacity:0}.MathJax,.MathJax_CHTML,.MathJax_MathContainer,.MathJax_MathML,.MathJax_PHTML,.MathJax_PlainSource,.MathJax_SVG{outline:0}.ios-app-switch .js-audit{display:none}._loading_wrap_{position:fixed;width:100vw;height:100vh;top:50%;left:50%;transform:translate(-50%,-50%);z-index:999}._loading_div_class_,._loading_wrap_{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}._loading_div_class_{word-wrap:break-word;padding:.5rem .75rem;text-align:center;z-index:9999;font-size:.6rem;max-width:60%;color:#fff;border-radius:.25rem;-ms-flex-direction:column;flex-direction:column}._loading_div_class_ .message{color:#353535;font-size:16px;line-height:3}.spinner{animation:circle-rotator 1.4s linear infinite}.spinner *{line-height:0;box-sizing:border-box}@keyframes circle-rotator{0%{transform:rotate(0deg)}to{transform:rotate(270deg)}}.path{stroke-dasharray:187;stroke-dashoffset:0;transform-origin:center;animation:circle-dash 1.4s ease-in-out infinite,circle-colors 5.6s ease-in-out infinite}@keyframes circle-colors{0%{stroke:#ff5a05}to{stroke:#ff5a05}}@keyframes circle-dash{0%{stroke-dashoffset:187}50%{stroke-dashoffset:46.75;transform:rotate(135deg)}to{stroke-dashoffset:187;transform:rotate(450deg)}}.confirm-box-wrapper,.confirm-box-wrapper .mask{position:absolute;top:0;left:0;right:0;bottom:0}.confirm-box-wrapper .mask{background:rgba(0,0,0,.6)}.confirm-box-wrapper .confirm-box{position:fixed;top:50%;left:50%;width:267px;background:#fff;transform:translate(-50%,-50%);border-radius:7px}.confirm-box-wrapper .confirm-box .head{margin:0 18px;font-size:18px;text-align:center;line-height:65px;border-bottom:1px solid #d9d9d9}.confirm-box-wrapper .confirm-box .body{padding:18px;padding-bottom:0;color:#353535;font-size:12.5px;max-height:150px;overflow:auto}.confirm-box-wrapper .confirm-box .foot{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding:18px}.confirm-box-wrapper .confirm-box .foot .button-cancel{border:1px solid #d9d9d9}.hljs{display:block;overflow-x:auto;padding:.5em;color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}




    </style>
    <style type="text/css">
        .button-cancel[data-v-87ffcada]{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel[data-v-87ffcada],.button-primary[data-v-87ffcada]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary[data-v-87ffcada]{color:#fff;background-color:#ff5a05;border-radius:3px}.pd[data-v-87ffcada]{padding-left:1.375rem;padding-right:1.375rem}.article[data-v-87ffcada]{max-width:70rem;margin:0 auto}.article .article-unavailable[data-v-87ffcada]{color:#fa8919;font-size:15px;font-weight:600;line-height:24px;border-radius:5px;padding:12px;background-color:#f6f7fb;margin-top:20px}.article .article-unavailable .iconfont[data-v-87ffcada]{font-size:12px}.article .main[data-v-87ffcada]{padding:1.25rem 0;margin-bottom:52px}.article-title[data-v-87ffcada]{color:#353535;font-weight:400;line-height:1.65rem;font-size:1.34375rem}.article-info[data-v-87ffcada]{color:#888;font-size:.9375rem;margin-top:1.0625rem}.article-content[data-v-87ffcada]{margin-top:1.0625rem}.article-content.android video[data-v-87ffcada]::-webkit-media-controls-fullscreen-button{display:none}.copyright[data-v-87ffcada]{color:#b2b2b2;padding-bottom:20px;margin-top:20px;font-size:13px}.audio-player[data-v-87ffcada]{width:100%;margin:20px 0}.to-comment[data-v-87ffcada]{overflow:hidden;padding-top:10px;margin-bottom:-30px}.to-comment a.button-primary[data-v-87ffcada]{float:right;height:20px;font-size:12px;line-height:20px;padding:4px 8px;cursor:pointer}.article-comments[data-v-87ffcada]{margin-top:2rem}.article-comments h2[data-v-87ffcada]{text-align:center;color:#888;position:relative;z-index:1;margin-bottom:1rem}.article-comments h2[data-v-87ffcada]:before{border-top:1px dotted #888;content:"";position:absolute;top:56%;left:0;width:100%;z-index:-1}.article-comments h2 span[data-v-87ffcada]{font-size:15.25px;font-weight:400;padding:0 1rem;background:#fff;display:inline-block}.article-sub-bottom[data-v-87ffcada]{z-index:10;cursor:pointer}.switch-btns[data-v-87ffcada]{height:76px;cursor:pointer;padding-top:24px;padding-bottom:24px;border-bottom:10px solid #f6f7fb;position:relative}.switch-btns[data-v-87ffcada]:before{content:" ";height:1px;background:#e8e8e8;position:absolute;top:0;left:0;-webkit-box-sizing:border-box;box-sizing:border-box;left:1.375rem;right:1.375rem}.switch-btns .btn[data-v-87ffcada]{height:38px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.switch-btns .btn .tag[data-v-87ffcada]{-webkit-box-flex:0;-ms-flex:0 0 62px;flex:0 0 62px;text-align:center;color:#888;font-size:14px;border-radius:10px;height:22px;line-height:22px;background:#f6f7fb;font-weight:400}.switch-btns .btn .txt[data-v-87ffcada]{margin-left:10px;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;color:#888;font-size:15px;height:22px;line-height:22px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:400}@media (max-width:769px){.article .breadcrumb[data-v-87ffcada]{padding-top:10px;padding-bottom:10px}}





    </style>

    <style type="text/css">
        .comment-item{list-style-position:inside;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-bottom:1rem}.comment-item a{border-bottom:none}.comment-item .avatar{width:2.625rem;height:2.625rem;-ms-flex-negative:0;flex-shrink:0;border-radius:50%}.comment-item .info{margin-left:.5rem;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.comment-item .info .hd{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .username{color:#888;font-size:15.25px;font-weight:400;line-height:1.2}.comment-item .info .hd .control{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .control .btn-share{color:#888;font-size:.75rem;margin-right:1rem}.comment-item .info .hd .control .btn-praise{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:15.25px;text-decoration:none}.comment-item .info .hd .control .btn-praise i{color:#888;display:inline-block;font-size:.75rem;margin-right:.3rem;margin-top:-.01rem}.comment-item .info .hd .control .btn-praise i.on,.comment-item .info .hd .control .btn-praise span{color:#ff5a05}.comment-item .info .bd{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6}.comment-item .info .time{color:#888;font-size:9px;line-height:1}.comment-item .info .reply .reply-hd{font-size:15.25px}.comment-item .info .reply .reply-hd span{margin-left:-12px;color:#888;font-weight:400}.comment-item .info .reply .reply-hd i{color:#ff5a05;font-size:15.25px}.comment-item .info .reply .reply-content{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all}.comment-item .info .reply .reply-time{color:#888;font-size:9px}




    </style>
</head>
<body>
<div id="app">


    <div data-v-87ffcada="" class="article" id="watermark">
        <p class="x">æ›´å¤šè¯¾ç¨‹è¯·åŠ QQç¾¤170701297</p>
        <div data-v-87ffcada="" class="main main-app">
            <h1 data-v-87ffcada="" class="article-title pd">
                26è®²æ¡ˆä¾‹ç¯‡ï¼šå¦‚ä½•æ‰¾å‡ºç‹‚æ‰“æ—¥å¿—çš„â€œå†…é¬¼â€
            </h1>
            <div data-v-87ffcada="" class="article-content typo common-content pd"><img data-v-87ffcada=""
                                                                                        src="https://static001.geekbang.org/resource/image/31/f5/31f78228f9e0d357e84ef64c202fedf5.jpg">


                <div data-v-87ffcada="" id="article-content" class="">
                    <div class="text">
                        <p>ä½ å¥½ï¼Œæˆ‘æ˜¯å€ªæœ‹é£ã€‚</p><p>å‰ä¸¤èŠ‚ï¼Œæˆ‘ä»¬å­¦äº†æ–‡ä»¶ç³»ç»Ÿå’Œç£ç›˜çš„ I/O åŸç†ï¼Œæˆ‘å…ˆå¸¦ä½ å¤ä¹ ä¸€ä¸‹ã€‚</p><p>æ–‡ä»¶ç³»ç»Ÿï¼Œæ˜¯å¯¹å­˜å‚¨è®¾å¤‡ä¸Šçš„æ–‡ä»¶è¿›è¡Œç»„ç»‡ç®¡ç†çš„ä¸€ç§æœºåˆ¶ã€‚ä¸ºäº†æ”¯æŒå„ç±»ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿï¼ŒLinuxåœ¨å„ç§æ–‡ä»¶ç³»ç»Ÿä¸Šï¼ŒæŠ½è±¡äº†ä¸€å±‚è™šæ‹Ÿæ–‡ä»¶ç³»ç»ŸVFSã€‚</p><p>å®ƒå®šä¹‰äº†ä¸€ç»„æ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿéƒ½æ”¯æŒçš„æ•°æ®ç»“æ„å’Œæ ‡å‡†æ¥å£ã€‚è¿™æ ·ï¼Œåº”ç”¨ç¨‹åºå’Œå†…æ ¸ä¸­çš„å…¶ä»–å­ç³»ç»Ÿï¼Œå°±åªéœ€è¦è·Ÿ VFS æä¾›çš„ç»Ÿä¸€æ¥å£è¿›è¡Œäº¤äº’ã€‚</p><p>åœ¨æ–‡ä»¶ç³»ç»Ÿçš„ä¸‹å±‚ï¼Œä¸ºäº†æ”¯æŒå„ç§ä¸åŒç±»å‹çš„å­˜å‚¨è®¾å¤‡ï¼ŒLinuxåˆåœ¨å„ç§å­˜å‚¨è®¾å¤‡çš„åŸºç¡€ä¸Šï¼ŒæŠ½è±¡äº†ä¸€ä¸ªé€šç”¨å—å±‚ã€‚</p><p>é€šç”¨å—å±‚ï¼Œä¸ºæ–‡ä»¶ç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºæä¾›äº†è®¿é—®å—è®¾å¤‡çš„æ ‡å‡†æ¥å£ï¼›åŒæ—¶ï¼Œä¸ºå„ç§å—è®¾å¤‡çš„é©±åŠ¨ç¨‹åºæä¾›äº†ç»Ÿä¸€çš„æ¡†æ¶ã€‚æ­¤å¤–ï¼Œé€šç”¨å—å±‚è¿˜ä¼šå¯¹æ–‡ä»¶ç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºå‘é€è¿‡æ¥çš„ I/O è¯·æ±‚è¿›è¡Œæ’é˜Ÿï¼Œå¹¶é€šè¿‡é‡æ–°æ’åºã€è¯·æ±‚åˆå¹¶ç­‰æ–¹å¼ï¼Œæé«˜ç£ç›˜è¯»å†™çš„æ•ˆç‡ã€‚</p><p>é€šç”¨å—å±‚çš„ä¸‹ä¸€å±‚ï¼Œè‡ªç„¶å°±æ˜¯è®¾å¤‡å±‚äº†ï¼ŒåŒ…æ‹¬å„ç§å—è®¾å¤‡çš„é©±åŠ¨ç¨‹åºä»¥åŠç‰©ç†å­˜å‚¨è®¾å¤‡ã€‚</p><p>æ–‡ä»¶ç³»ç»Ÿã€é€šç”¨å—å±‚ä»¥åŠè®¾å¤‡å±‚ï¼Œå°±æ„æˆäº† Linux çš„å­˜å‚¨ I/O æ ˆã€‚å­˜å‚¨ç³»ç»Ÿçš„ I/O ï¼Œé€šå¸¸æ˜¯æ•´ä¸ªç³»ç»Ÿä¸­æœ€æ…¢çš„ä¸€ç¯ã€‚æ‰€ä»¥ï¼ŒLinux é‡‡ç”¨å¤šç§ç¼“å­˜æœºåˆ¶ï¼Œæ¥ä¼˜åŒ– I/O çš„æ•ˆç‡ï¼Œæ¯”æ–¹è¯´ï¼Œ</p><ul>
<li>
<p>ä¸ºäº†ä¼˜åŒ–æ–‡ä»¶è®¿é—®çš„æ€§èƒ½ï¼Œé‡‡ç”¨é¡µç¼“å­˜ã€ç´¢å¼•èŠ‚ç‚¹ç¼“å­˜ã€ç›®å½•é¡¹ç¼“å­˜ç­‰å¤šç§ç¼“å­˜æœºåˆ¶ï¼Œå‡å°‘å¯¹ä¸‹å±‚å—è®¾å¤‡çš„ç›´æ¥è°ƒç”¨ã€‚</p>
</li>
<li>
<p>åŒæ ·çš„ï¼Œä¸ºäº†ä¼˜åŒ–å—è®¾å¤‡çš„è®¿é—®æ•ˆç‡ï¼Œä½¿ç”¨ç¼“å†²åŒºæ¥ç¼“å­˜å—è®¾å¤‡çš„æ•°æ®ã€‚</p>
</li>
</ul><!-- [[[read_end]]] --><p>ä¸è¿‡ï¼Œåœ¨ç¢°åˆ°æ–‡ä»¶ç³»ç»Ÿå’Œç£ç›˜çš„ I/O é—®é¢˜æ—¶ï¼Œå…·ä½“åº”è¯¥æ€ä¹ˆå®šä½å’Œåˆ†æå‘¢ï¼Ÿä»Šå¤©ï¼Œæˆ‘å°±ä»¥ä¸€ä¸ªæœ€å¸¸è§çš„åº”ç”¨ç¨‹åºè®°å½•å¤§é‡æ—¥å¿—çš„æ¡ˆä¾‹ï¼Œå¸¦ä½ æ¥åˆ†æè¿™ç§æƒ…å†µã€‚</p><h2>æ¡ˆä¾‹å‡†å¤‡</h2><p>æœ¬æ¬¡æ¡ˆä¾‹è¿˜æ˜¯åŸºäº Ubuntu 18.04ï¼ŒåŒæ ·é€‚ç”¨äºå…¶ä»–çš„ Linux ç³»ç»Ÿã€‚æˆ‘ä½¿ç”¨çš„æ¡ˆä¾‹ç¯å¢ƒå¦‚ä¸‹æ‰€ç¤ºï¼š</p><ul>
<li>
<p>æœºå™¨é…ç½®ï¼š2 CPUï¼Œ8GB å†…å­˜</p>
</li>
<li>
<p>é¢„å…ˆå®‰è£… dockerã€sysstat ç­‰å·¥å…·ï¼Œå¦‚ apt install  <a href="http://docker.io/">docker.io</a>  sysstat</p>
</li>
</ul><p>è¿™é‡Œè¦æ„Ÿè°¢å”¯å“ä¼šèµ„æ·±è¿ç»´å·¥ç¨‹å¸ˆé˜³ç¥¥ä¹‰å¸®å¿™ï¼Œåˆ†æ‹…äº†ä»Šå¤©çš„æ¡ˆä¾‹ã€‚è¿™ä¸ªæ¡ˆä¾‹ï¼Œæ˜¯ä¸€ä¸ªç”¨ Python å¼€å‘çš„å°åº”ç”¨ï¼Œä¸ºäº†æ–¹ä¾¿è¿è¡Œï¼Œæˆ‘æŠŠå®ƒæ‰“åŒ…æˆäº†ä¸€ä¸ª Docker é•œåƒã€‚è¿™æ ·ï¼Œä½ åªè¦è¿è¡Œ Docker å‘½ä»¤ï¼Œå°±å¯ä»¥å¯åŠ¨å®ƒã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæ‰“å¼€ä¸€ä¸ªç»ˆç«¯ï¼ŒSSH ç™»å½•åˆ°æ¡ˆä¾‹æ‰€ç”¨çš„æœºå™¨ä¸­ï¼Œå¹¶å®‰è£…ä¸Šè¿°å·¥å…·ã€‚è·Ÿä»¥å‰ä¸€æ ·ï¼Œæ¡ˆä¾‹ä¸­æ‰€æœ‰å‘½ä»¤ï¼Œéƒ½é»˜è®¤ä»¥ root ç”¨æˆ·è¿è¡Œã€‚å¦‚æœä½ æ˜¯ç”¨æ™®é€šç”¨æˆ·èº«ä»½ç™»é™†ç³»ç»Ÿï¼Œè¯·è¿è¡Œ sudo su root å‘½ä»¤ï¼Œåˆ‡æ¢åˆ° root ç”¨æˆ·ã€‚</p><p>åˆ°è¿™é‡Œï¼Œå‡†å¤‡å·¥ä½œå°±å®Œæˆäº†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ­£å¼è¿›å…¥æ“ä½œç¯èŠ‚ã€‚</p><blockquote>
<p>æ¸©é¦¨æç¤ºï¼šæ¡ˆä¾‹ä¸­ Python åº”ç”¨çš„æ ¸å¿ƒé€»è¾‘æ¯”è¾ƒç®€å•ï¼Œä½ å¯èƒ½ä¸€çœ¼å°±èƒ½çœ‹å‡ºé—®é¢˜ï¼Œä½†å®é™…ç”Ÿäº§ç¯å¢ƒä¸­çš„æºç å°±å¤æ‚å¤šäº†ã€‚æ‰€ä»¥ï¼Œæˆ‘ä¾æ—§å»ºè®®ï¼Œæ“ä½œä¹‹å‰åˆ«çœ‹æºç ï¼Œé¿å…å…ˆå…¥ä¸ºä¸»ï¼Œè¦æŠŠå®ƒå½“æˆä¸€ä¸ªé»‘ç›’æ¥åˆ†æã€‚è¿™æ ·ï¼Œä½ å¯ä»¥æ›´å¥½æŠŠæ¡ä½ï¼Œæ€ä¹ˆä»ç³»ç»Ÿçš„èµ„æºä½¿ç”¨é—®é¢˜å‡ºå‘ï¼Œåˆ†æå‡ºç“¶é¢ˆæ‰€åœ¨çš„åº”ç”¨ï¼Œä»¥åŠç“¶é¢ˆåœ¨åº”ç”¨ä¸­å¤§æ¦‚çš„ä½ç½®ã€‚</p>
</blockquote><h2>æ¡ˆä¾‹åˆ†æ</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œè¿è¡Œä»Šå¤©çš„ç›®æ ‡åº”ç”¨ï¼š</p><pre><code>$ docker run -v /tmp:/tmp --name=app -itd feisky/logapp 
</code></pre><p>ç„¶åï¼Œåœ¨ç»ˆç«¯ä¸­è¿è¡Œ ps å‘½ä»¤ï¼Œç¡®è®¤æ¡ˆä¾‹åº”ç”¨æ­£å¸¸å¯åŠ¨ã€‚å¦‚æœæ“ä½œæ— è¯¯ï¼Œä½ åº”è¯¥å¯ä»¥åœ¨ ps çš„è¾“å‡ºä¸­ï¼Œçœ‹åˆ°ä¸€ä¸ª <a href="http://app.py">app.py</a> çš„è¿›ç¨‹ï¼š</p><pre><code>$ ps -ef | grep /app.py 
root     18940 18921 73 14:41 pts/0    00:00:02 python /app.py 
</code></pre><p>æ¥ç€ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ç³»ç»Ÿæœ‰æ²¡æœ‰æ€§èƒ½é—®é¢˜ã€‚è¦è§‚å¯Ÿå“ªäº›æ€§èƒ½æŒ‡æ ‡å‘¢ï¼Ÿå‰é¢æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“ CPUã€å†…å­˜å’Œç£ç›˜ I/O ç­‰ç³»ç»Ÿèµ„æºï¼Œå¾ˆå®¹æ˜“å‡ºç°èµ„æºç“¶é¢ˆï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è§‚å¯Ÿçš„æ–¹å‘äº†ã€‚æˆ‘ä»¬æ¥è§‚å¯Ÿä¸€ä¸‹è¿™äº›èµ„æºçš„ä½¿ç”¨æƒ…å†µã€‚</p><p>å½“ç„¶ï¼ŒåŠ¨æ‰‹ä¹‹å‰ä½ åº”è¯¥æƒ³æ¸…æ¥šï¼Œè¦ç”¨å“ªäº›å·¥å…·æ¥åšï¼Œä»¥åŠå·¥å…·çš„ä½¿ç”¨é¡ºåºåˆæ˜¯æ€æ ·çš„ã€‚ä½ å¯ä»¥å…ˆå›å¿†ä¸‹å‰é¢çš„æ¡ˆä¾‹å’Œæ€è·¯ï¼Œè‡ªå·±æƒ³ä¸€æƒ³ï¼Œç„¶åå†ç»§ç»­ä¸‹é¢çš„æ­¥éª¤ã€‚</p><p>æˆ‘çš„æƒ³æ³•æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆç”¨ top ï¼Œæ¥è§‚å¯Ÿ CPU å’Œå†…å­˜çš„ä½¿ç”¨æƒ…å†µï¼›ç„¶åå†ç”¨ iostat ï¼Œæ¥è§‚å¯Ÿç£ç›˜çš„ I/O æƒ…å†µã€‚</p><p>æ‰€ä»¥ï¼Œæ¥ä¸‹æ¥ï¼Œä½ å¯ä»¥åœ¨ç»ˆç«¯ä¸­è¿è¡Œ top å‘½ä»¤ï¼Œè§‚å¯Ÿ CPU å’Œå†…å­˜çš„ä½¿ç”¨æƒ…å†µï¼š</p><pre><code># æŒ‰1åˆ‡æ¢åˆ°æ¯ä¸ªCPUçš„ä½¿ç”¨æƒ…å†µ 
$ top 
top - 14:43:43 up 1 day,  1:39,  2 users,  load average: 2.48, 1.09, 0.63 
Tasks: 130 total,   2 running,  74 sleeping,   0 stopped,   0 zombie 
%Cpu0  :  0.7 us,  6.0 sy,  0.0 ni,  0.7 id, 92.7 wa,  0.0 hi,  0.0 si,  0.0 st 
%Cpu1  :  0.0 us,  0.3 sy,  0.0 ni, 92.3 id,  7.3 wa,  0.0 hi,  0.0 si,  0.0 st 
KiB Mem :  8169308 total,   747684 free,   741336 used,  6680288 buff/cache 
KiB Swap:        0 total,        0 free,        0 used.  7113124 avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND 
18940 root      20   0  656108 355740   5236 R   6.3  4.4   0:12.56 python 
1312 root      20   0  236532  24116   9648 S   0.3  0.3   9:29.80 python3 
</code></pre><p>è§‚å¯Ÿ top çš„è¾“å‡ºï¼Œä½ ä¼šå‘ç°ï¼ŒCPU0 çš„ä½¿ç”¨ç‡éå¸¸é«˜ï¼Œå®ƒçš„ç³»ç»ŸCPUä½¿ç”¨ç‡ï¼ˆsys%ï¼‰ä¸º 6%ï¼Œè€Œ iowait è¶…è¿‡äº† 90%ã€‚è¿™è¯´æ˜ CPU0 ä¸Šï¼Œå¯èƒ½æ­£åœ¨è¿è¡Œ I/O å¯†é›†å‹çš„è¿›ç¨‹ã€‚ä¸è¿‡ï¼Œç©¶ç«Ÿæ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿè¿™ä¸ªç–‘é—®å…ˆä¿ç•™ç€ï¼Œæˆ‘ä»¬å…ˆç»§ç»­çœ‹å®Œã€‚</p><p>æ¥ç€æˆ‘ä»¬æ¥çœ‹ï¼Œè¿›ç¨‹éƒ¨åˆ†çš„ CPU ä½¿ç”¨æƒ…å†µã€‚ä½ ä¼šå‘ç°ï¼Œ python è¿›ç¨‹çš„ CPU ä½¿ç”¨ç‡å·²ç»è¾¾åˆ°äº† 6%ï¼Œè€Œå…¶ä½™è¿›ç¨‹çš„ CPU ä½¿ç”¨ç‡éƒ½æ¯”è¾ƒä½ï¼Œä¸è¶…è¿‡ 0.3%ã€‚çœ‹èµ·æ¥ python æ˜¯ä¸ªå¯ç–‘è¿›ç¨‹ã€‚è®°ä¸‹ python è¿›ç¨‹çš„ PID å· 18940ï¼Œæˆ‘ä»¬ç¨ååˆ†æã€‚</p><p>æœ€åå†çœ‹å†…å­˜çš„ä½¿ç”¨æƒ…å†µï¼Œæ€»å†…å­˜ 8Gï¼Œå‰©ä½™å†…å­˜åªæœ‰ 730 MBï¼Œè€Œ Buffer/Cacheå ç”¨å†…å­˜é«˜è¾¾6GB ä¹‹å¤šï¼Œè¿™è¯´æ˜å†…å­˜ä¸»è¦è¢«ç¼“å­˜å ç”¨ã€‚è™½ç„¶å¤§éƒ¨åˆ†ç¼“å­˜å¯å›æ”¶ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¾—äº†è§£ä¸‹ç¼“å­˜çš„å»å¤„ï¼Œç¡®è®¤ç¼“å­˜ä½¿ç”¨éƒ½æ˜¯åˆç†çš„ã€‚</p><p>åˆ°è¿™ä¸€æ­¥ï¼Œä½ åŸºæœ¬å¯ä»¥åˆ¤æ–­å‡ºï¼ŒCPU ä½¿ç”¨ç‡ä¸­çš„ iowait æ˜¯ä¸€ä¸ªæ½œåœ¨ç“¶é¢ˆï¼Œè€Œå†…å­˜éƒ¨åˆ†çš„ç¼“å­˜å æ¯”è¾ƒå¤§ï¼Œé‚£ç£ç›˜ I/O åˆæ˜¯æ€ä¹ˆæ ·çš„æƒ…å†µå‘¢ï¼Ÿ</p><p>æˆ‘ä»¬åœ¨ç»ˆç«¯ä¸­æŒ‰ Ctrl+C ï¼Œåœæ­¢ top å‘½ä»¤ï¼Œå†è¿è¡Œ iostat å‘½ä»¤ï¼Œè§‚å¯Ÿ I/O çš„ä½¿ç”¨æƒ…å†µï¼š</p><pre><code># -dè¡¨ç¤ºæ˜¾ç¤ºI/Oæ€§èƒ½æŒ‡æ ‡ï¼Œ-xè¡¨ç¤ºæ˜¾ç¤ºæ‰©å±•ç»Ÿè®¡ï¼ˆå³æ‰€æœ‰I/OæŒ‡æ ‡ï¼‰ 
$ iostat -x -d 1 
Device            r/s     w/s     rkB/s     wkB/s   rrqm/s   wrqm/s  %rrqm  %wrqm r_await w_await aqu-sz rareq-sz wareq-sz  svctm  %util 
loop0            0.00    0.00      0.00      0.00     0.00     0.00   0.00   0.00    0.00    0.00   0.00     0.00     0.00   0.00   0.00 
sdb              0.00    0.00      0.00      0.00     0.00     0.00   0.00   0.00    0.00    0.00   0.00     0.00     0.00   0.00   0.00 
sda              0.00   64.00      0.00  32768.00     0.00     0.00   0.00   0.00    0.00 7270.44 1102.18     0.00   512.00  15.50  99.20
</code></pre><p>è¿˜è®°å¾—è¿™äº›æ€§èƒ½æŒ‡æ ‡çš„å«ä¹‰å—ï¼Ÿå…ˆè‡ªå·±å›å¿†ä¸€ä¸‹ï¼Œå¦‚æœå®åœ¨æƒ³ä¸èµ·æ¥ï¼ŒæŸ¥çœ‹ä¸Šä¸€èŠ‚çš„å†…å®¹ï¼Œæˆ–è€…ç”¨ man iostat æŸ¥è¯¢ã€‚</p><p>è§‚å¯Ÿ iostat çš„æœ€åä¸€åˆ—ï¼Œä½ ä¼šçœ‹åˆ°ï¼Œç£ç›˜ sda çš„ I/O ä½¿ç”¨ç‡å·²ç»é«˜è¾¾ 99%ï¼Œå¾ˆå¯èƒ½å·²ç»æ¥è¿‘ I/O é¥±å’Œã€‚</p><p>å†çœ‹å‰é¢çš„å„ä¸ªæŒ‡æ ‡ï¼Œæ¯ç§’å†™ç£ç›˜è¯·æ±‚æ•°æ˜¯ 64 ï¼Œå†™å¤§å°æ˜¯ 32 MBï¼Œå†™è¯·æ±‚çš„å“åº”æ—¶é—´ä¸º 7 ç§’ï¼Œè€Œè¯·æ±‚é˜Ÿåˆ—é•¿åº¦åˆ™è¾¾åˆ°äº† 1100ã€‚</p><p>è¶…æ…¢çš„å“åº”æ—¶é—´å’Œç‰¹é•¿çš„è¯·æ±‚é˜Ÿåˆ—é•¿åº¦ï¼Œè¿›ä¸€æ­¥éªŒè¯äº† I/O å·²ç»é¥±å’Œçš„çŒœæƒ³ã€‚æ­¤æ—¶ï¼Œsda ç£ç›˜å·²ç»é‡åˆ°äº†ä¸¥é‡çš„æ€§èƒ½ç“¶é¢ˆã€‚</p><p>åˆ°è¿™é‡Œï¼Œä¹Ÿå°±å¯ä»¥ç†è§£ï¼Œä¸ºä»€ä¹ˆå‰é¢çœ‹åˆ°çš„ iowait é«˜è¾¾ 90% äº†ï¼Œè¿™æ­£æ˜¯ç£ç›˜ sda çš„ I/O ç“¶é¢ˆå¯¼è‡´çš„ã€‚æ¥ä¸‹æ¥çš„é‡ç‚¹å°±æ˜¯åˆ†æ I/O æ€§èƒ½ç“¶é¢ˆçš„æ ¹æºäº†ã€‚é‚£è¦æ€ä¹ˆçŸ¥é“ï¼Œè¿™äº› I/Oè¯·æ±‚ç›¸å…³çš„è¿›ç¨‹å‘¢ï¼Ÿ</p><p>ä¸çŸ¥é“ä½ è¿˜è®°ä¸è®°å¾—ï¼Œä¸Šä¸€èŠ‚æˆ‘æ›¾æåˆ°è¿‡ï¼Œå¯ä»¥ç”¨ pidstat æˆ–è€… iotop ï¼Œè§‚å¯Ÿè¿›ç¨‹çš„ I/O æƒ…å†µã€‚è¿™é‡Œï¼Œæˆ‘å°±ç”¨ pidstat æ¥çœ‹ä¸€ä¸‹ã€‚</p><p>ä½¿ç”¨ pidstat åŠ ä¸Š -d å‚æ•°ï¼Œå°±å¯ä»¥æ˜¾ç¤ºæ¯ä¸ªè¿›ç¨‹çš„ I/O æƒ…å†µã€‚æ‰€ä»¥ï¼Œä½ å¯ä»¥åœ¨ç»ˆç«¯ä¸­è¿è¡Œå¦‚ä¸‹å‘½ä»¤æ¥è§‚å¯Ÿï¼š</p><pre><code>$ pidstat -d 1 

15:08:35      UID       PID   kB_rd/s   kB_wr/s kB_ccwr/s iodelay  Command 
15:08:36        0     18940      0.00  45816.00      0.00      96  python 

15:08:36      UID       PID   kB_rd/s   kB_wr/s kB_ccwr/s iodelay  Command 
15:08:37        0       354      0.00      0.00      0.00     350  jbd2/sda1-8 
15:08:37        0     18940      0.00  46000.00      0.00      96  python 
15:08:37        0     20065      0.00      0.00      0.00    1503  kworker/u4:2 
</code></pre><p>ä» pidstat çš„è¾“å‡ºï¼Œä½ å¯ä»¥å‘ç°ï¼Œåªæœ‰ python è¿›ç¨‹çš„å†™æ¯”è¾ƒå¤§ï¼Œè€Œä¸”æ¯ç§’å†™çš„æ•°æ®è¶…è¿‡ 45 MBï¼Œæ¯”ä¸Šé¢ iostat å‘ç°çš„ 32MB çš„ç»“æœè¿˜è¦å¤§ã€‚å¾ˆæ˜æ˜¾ï¼Œæ­£æ˜¯ python è¿›ç¨‹å¯¼è‡´äº† I/O ç“¶é¢ˆã€‚</p><p>å†å¾€ä¸‹çœ‹ iodelay é¡¹ã€‚è™½ç„¶åªæœ‰ python åœ¨å¤§é‡å†™æ•°æ®ï¼Œä½†ä½ åº”è¯¥æ³¨æ„åˆ°äº†ï¼Œæœ‰ä¸¤ä¸ªè¿›ç¨‹ ï¼ˆkworker å’Œ jbd2 ï¼‰çš„å»¶è¿Ÿï¼Œå±…ç„¶æ¯” python è¿›ç¨‹è¿˜å¤§å¾ˆå¤šã€‚</p><p>è¿™å…¶ä¸­ï¼Œkworker æ˜¯ä¸€ä¸ªå†…æ ¸çº¿ç¨‹ï¼Œè€Œ jbd2 æ˜¯ ext4 æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œç”¨æ¥ä¿è¯æ•°æ®å®Œæ•´æ€§çš„å†…æ ¸çº¿ç¨‹ã€‚ä»–ä»¬éƒ½æ˜¯ä¿è¯æ–‡ä»¶ç³»ç»ŸåŸºæœ¬åŠŸèƒ½çš„å†…æ ¸çº¿ç¨‹ï¼Œæ‰€ä»¥å…·ä½“ç»†èŠ‚æš‚æ—¶å°±ä¸ç”¨ç®¡äº†ï¼Œæˆ‘ä»¬åªéœ€è¦æ˜ç™½ï¼Œå®ƒä»¬å»¶è¿Ÿçš„æ ¹æºè¿˜æ˜¯å¤§é‡ I/Oã€‚</p><p>ç»¼åˆpidstatçš„è¾“å‡ºæ¥çœ‹ï¼Œè¿˜æ˜¯pythonè¿›ç¨‹çš„å«Œç–‘æœ€å¤§ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥åˆ†æ python è¿›ç¨‹åˆ°åº•åœ¨å†™ä»€ä¹ˆã€‚</p><p>é¦–å…ˆç•™æ„ä¸€ä¸‹ python è¿›ç¨‹çš„ PID å·ï¼Œ 18940ã€‚çœ‹åˆ° 18940 ï¼Œä½ æœ‰æ²¡æœ‰è§‰å¾—ç†Ÿæ‚‰ï¼Ÿå…¶å®å‰é¢åœ¨ä½¿ç”¨topæ—¶ï¼Œæˆ‘ä»¬è®°å½•è¿‡çš„ CPU ä½¿ç”¨ç‡æœ€é«˜çš„è¿›ç¨‹ï¼Œä¹Ÿæ­£æ˜¯å®ƒã€‚ä¸è¿‡ï¼Œè™½ç„¶åœ¨topä¸­ä½¿ç”¨ç‡æœ€é«˜ï¼Œä¹Ÿä¸è¿‡æ˜¯ 6%ï¼Œå¹¶ä¸ç®—é«˜ã€‚æ‰€ä»¥ï¼Œä»¥I/Oé—®é¢˜ä¸ºåˆ†ææ–¹å‘è¿˜æ˜¯æ­£ç¡®çš„ã€‚</p><p>çŸ¥é“äº†è¿›ç¨‹çš„ PID å·ï¼Œå…·ä½“è¦æ€ä¹ˆæŸ¥çœ‹å†™çš„æƒ…å†µå‘¢ï¼Ÿ</p><p>å…¶å®ï¼Œæˆ‘åœ¨ç³»ç»Ÿè°ƒç”¨çš„æ¡ˆä¾‹ä¸­è®²è¿‡ï¼Œè¯»å†™æ–‡ä»¶å¿…é¡»é€šè¿‡ç³»ç»Ÿè°ƒç”¨å®Œæˆã€‚è§‚å¯Ÿç³»ç»Ÿè°ƒç”¨æƒ…å†µï¼Œå°±å¯ä»¥çŸ¥é“è¿›ç¨‹æ­£åœ¨å†™çš„æ–‡ä»¶ã€‚æƒ³èµ· strace äº†å—ï¼Œå®ƒæ­£æ˜¯æˆ‘ä»¬åˆ†æç³»ç»Ÿè°ƒç”¨æ—¶æœ€å¸¸ç”¨çš„å·¥å…·ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨ç»ˆç«¯ä¸­è¿è¡Œstrace å‘½ä»¤ï¼Œå¹¶é€šè¿‡ -p 18940 æŒ‡å®š python è¿›ç¨‹çš„ PID å·ï¼š</p><pre><code>$ strace -p 18940 
strace: Process 18940 attached 
...
mmap(NULL, 314576896, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f0f7aee9000 
mmap(NULL, 314576896, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f0f682e8000 
write(3, &quot;2018-12-05 15:23:01,709 - __main&quot;..., 314572844 
) = 314572844 
munmap(0x7f0f682e8000, 314576896)       = 0 
write(3, &quot;\n&quot;, 1)                       = 1 
munmap(0x7f0f7aee9000, 314576896)       = 0 
close(3)                                = 0 
stat(&quot;/tmp/logtest.txt.1&quot;, {st_mode=S_IFREG|0644, st_size=943718535, ...}) = 0 
</code></pre><p>ä» write() ç³»ç»Ÿè°ƒç”¨ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿›ç¨‹å‘æ–‡ä»¶æè¿°ç¬¦ç¼–å·ä¸º 3 çš„æ–‡ä»¶ä¸­ï¼Œå†™å…¥äº† 300MB çš„æ•°æ®ã€‚çœ‹æ¥ï¼Œå®ƒåº”è¯¥æ˜¯æˆ‘ä»¬è¦æ‰¾çš„æ–‡ä»¶ã€‚ä¸è¿‡ï¼Œwrite() è°ƒç”¨ä¸­åªèƒ½çœ‹åˆ°æ–‡ä»¶çš„æè¿°ç¬¦ç¼–å·ï¼Œæ–‡ä»¶åå’Œè·¯å¾„è¿˜æ˜¯æœªçŸ¥çš„ã€‚</p><p>å†è§‚å¯Ÿåé¢çš„ stat() è°ƒç”¨ï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼Œå®ƒæ­£åœ¨è·å– /tmp/logtest.txt.1 çš„çŠ¶æ€ã€‚ è¿™ç§â€œç‚¹+æ•°å­—æ ¼å¼â€çš„æ–‡ä»¶ï¼Œåœ¨æ—¥å¿—å›æ»šä¸­éå¸¸å¸¸è§ã€‚æˆ‘ä»¬å¯ä»¥çŒœæµ‹ï¼Œè¿™æ˜¯ç¬¬ä¸€ä¸ªæ—¥å¿—å›æ»šæ–‡ä»¶ï¼Œè€Œæ­£åœ¨å†™çš„æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼Œåˆ™æ˜¯/tmp/logtest.txtã€‚</p><p>å½“ç„¶ï¼Œè¿™åªæ˜¯æˆ‘ä»¬çš„çŒœæµ‹ï¼Œè‡ªç„¶è¿˜éœ€è¦éªŒè¯ã€‚è¿™é‡Œï¼Œæˆ‘å†ç»™ä½ ä»‹ç»ä¸€ä¸ªæ–°çš„å·¥å…· lsofã€‚å®ƒä¸“é—¨ç”¨æ¥æŸ¥çœ‹è¿›ç¨‹æ‰“å¼€æ–‡ä»¶åˆ—è¡¨ï¼Œä¸è¿‡ï¼Œè¿™é‡Œçš„â€œæ–‡ä»¶â€ä¸åªæœ‰æ™®é€šæ–‡ä»¶ï¼Œè¿˜åŒ…æ‹¬äº†ç›®å½•ã€å—è®¾å¤‡ã€åŠ¨æ€åº“ã€ç½‘ç»œå¥—æ¥å­—ç­‰ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨ç»ˆç«¯ä¸­è¿è¡Œä¸‹é¢çš„ lsof å‘½ä»¤ï¼Œçœ‹çœ‹è¿›ç¨‹ 18940 éƒ½æ‰“å¼€äº†å“ªäº›æ–‡ä»¶ï¼š</p><pre><code>$ lsof -p 18940 
COMMAND   PID USER   FD   TYPE DEVICE  SIZE/OFF    NODE NAME 
python  18940 root  cwd    DIR   0,50      4096 1549389 / 
python  18940 root  rtd    DIR   0,50      4096 1549389 / 
â€¦ 
python  18940 root    2u   CHR  136,0       0t0       3 /dev/pts/0 
python  18940 root    3w   REG    8,1 117944320     303 /tmp/logtest.txt 
</code></pre><p>è¿™ä¸ªè¾“å‡ºç•Œé¢ä¸­ï¼Œæœ‰å‡ åˆ—æˆ‘ç®€å•ä»‹ç»ä¸€ä¸‹ï¼ŒFD è¡¨ç¤ºæ–‡ä»¶æè¿°ç¬¦å·ï¼ŒTYPE è¡¨ç¤ºæ–‡ä»¶ç±»å‹ï¼ŒNAME è¡¨ç¤ºæ–‡ä»¶è·¯å¾„ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨çš„é‡ç‚¹ã€‚</p><p>å†çœ‹æœ€åä¸€è¡Œï¼Œè¿™è¯´æ˜ï¼Œè¿™ä¸ªè¿›ç¨‹æ‰“å¼€äº†æ–‡ä»¶ /tmp/logtest.txtï¼Œå¹¶ä¸”å®ƒçš„æ–‡ä»¶æè¿°ç¬¦æ˜¯ 3 å·ï¼Œè€Œ3 åé¢çš„ w ï¼Œè¡¨ç¤ºä»¥å†™çš„æ–¹å¼æ‰“å¼€ã€‚</p><p>è¿™è·Ÿåˆšæ‰ strace å®Œæˆ‘ä»¬çŒœæµ‹çš„ç»“æœä¸€è‡´ï¼Œçœ‹æ¥è¿™å°±æ˜¯é—®é¢˜çš„æ ¹æºï¼šè¿›ç¨‹ 18940 ä»¥æ¯æ¬¡ 300MB çš„é€Ÿåº¦ï¼Œåœ¨â€œç–¯ç‹‚â€å†™æ—¥å¿—ï¼Œè€Œæ—¥å¿—æ–‡ä»¶çš„è·¯å¾„æ˜¯ /tmp/logtest.txtã€‚</p><p>æ—¢ç„¶æ‰¾å‡ºäº†é—®é¢˜æ ¹æºï¼Œæ¥ä¸‹æ¥æŒ‰ç…§æƒ¯ä¾‹ï¼Œå°±è¯¥æŸ¥çœ‹æºä»£ç ï¼Œç„¶ååˆ†æä¸ºä»€ä¹ˆè¿™ä¸ªè¿›ç¨‹ä¼šç‹‚æ‰“æ—¥å¿—äº†ã€‚</p><p>ä½ å¯ä»¥è¿è¡Œ docker cp å‘½ä»¤ï¼ŒæŠŠæ¡ˆä¾‹åº”ç”¨çš„æºä»£ç æ‹·è´å‡ºæ¥ï¼Œç„¶åæŸ¥çœ‹å®ƒçš„å†…å®¹ã€‚ï¼ˆä½ ä¹Ÿå¯ä»¥ç‚¹å‡»<a href="https://github.com/feiskyer/linux-perf-examples/tree/master/logging-app">è¿™é‡Œ</a>æŸ¥çœ‹æ¡ˆä¾‹åº”ç”¨çš„æºç ï¼‰ï¼š</p><pre><code>#æ‹·è´æ¡ˆä¾‹åº”ç”¨æºä»£ç åˆ°å½“å‰ç›®å½•
$ docker cp app:/app.py . 

#æŸ¥çœ‹æ¡ˆä¾‹åº”ç”¨çš„æºä»£ç 
$ cat app.py 

logger = logging.getLogger(__name__) 
logger.setLevel(level=logging.INFO) 
rHandler = RotatingFileHandler(&quot;/tmp/logtest.txt&quot;, maxBytes=1024 * 1024 * 1024, backupCount=1) 
rHandler.setLevel(logging.INFO) 

def write_log(size): 
  '''Write logs to file''' 
  message = get_message(size) 
  while True: 
    logger.info(message) 
    time.sleep(0.1) 

if __name__ == '__main__': 
  msg_size = 300 * 1024 * 1024 
  write_log(msg_size) 
</code></pre><p>åˆ†æè¿™ä¸ªæºç ï¼Œæˆ‘ä»¬å‘ç°ï¼Œå®ƒçš„æ—¥å¿—è·¯å¾„æ˜¯ /tmp/logtest.txtï¼Œé»˜è®¤è®°å½• INFO çº§åˆ«ä»¥ä¸Šçš„æ‰€æœ‰æ—¥å¿—ï¼Œè€Œä¸”æ¯æ¬¡å†™æ—¥å¿—çš„å¤§å°æ˜¯ 300MBã€‚è¿™è·Ÿæˆ‘ä»¬ä¸Šé¢çš„åˆ†æç»“æœæ˜¯ä¸€è‡´çš„ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œç”Ÿäº§ç³»ç»Ÿçš„åº”ç”¨ç¨‹åºï¼Œåº”è¯¥æœ‰åŠ¨æ€è°ƒæ•´æ—¥å¿—çº§åˆ«çš„åŠŸèƒ½ã€‚ç»§ç»­æŸ¥çœ‹æºç ï¼Œä½ ä¼šå‘ç°ï¼Œè¿™ä¸ªç¨‹åºä¹Ÿå¯ä»¥è°ƒæ•´æ—¥å¿—çº§åˆ«ã€‚å¦‚æœä½ ç»™å®ƒå‘é€ SIGUSR1 ä¿¡å·ï¼Œå°±å¯ä»¥æŠŠæ—¥å¿—è°ƒæ•´ä¸º INFO çº§ï¼›å‘é€ SIGUSR2 ä¿¡å·ï¼Œåˆ™ä¼šè°ƒæ•´ä¸º WARNING çº§ï¼š</p><pre><code>def set_logging_info(signal_num, frame): 
  '''Set loging level to INFO when receives SIGUSR1''' 
  logger.setLevel(logging.INFO) 

def set_logging_warning(signal_num, frame): 
  '''Set loging level to WARNING when receives SIGUSR2''' 
  logger.setLevel(logging.WARNING) 

signal.signal(signal.SIGUSR1, set_logging_info) 
signal.signal(signal.SIGUSR2, set_logging_warning) 
</code></pre><p>æ ¹æ®æºç ä¸­çš„æ—¥å¿—è°ƒç”¨ logger. info(message) ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œå®ƒçš„æ—¥å¿—æ˜¯ INFO çº§ï¼Œè¿™ä¹Ÿæ­£æ˜¯å®ƒçš„é»˜è®¤çº§åˆ«ã€‚é‚£ä¹ˆï¼Œåªè¦æŠŠé»˜è®¤çº§åˆ«è°ƒé«˜åˆ° WARNING çº§ï¼Œæ—¥å¿—é—®é¢˜åº”è¯¥å°±è§£å†³äº†ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥æ£€æŸ¥ä¸€ä¸‹ï¼Œåˆšåˆšçš„åˆ†æå¯¹ä¸å¯¹ã€‚åœ¨ç»ˆç«¯ä¸­è¿è¡Œä¸‹é¢çš„ kill å‘½ä»¤ï¼Œç»™è¿›ç¨‹ 18940 å‘é€ SIGUSR2 ä¿¡å·ï¼š</p><pre><code>$ kill -SIGUSR2 18940 
</code></pre><p>ç„¶åï¼Œå†æ‰§è¡Œ top å’Œ iostat è§‚å¯Ÿä¸€ä¸‹ï¼š</p><pre><code>$ top 
... 
%Cpu(s):  0.3 us,  0.2 sy,  0.0 ni, 99.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st 
</code></pre><pre><code>$ instat -d -x 1
Device            r/s     w/s     rkB/s     wkB/s   rrqm/s   wrqm/s  %rrqm  %wrqm r_await w_await aqu-sz rareq-sz wareq-sz  svctm  %util 
loop0            0.00    0.00      0.00      0.00     0.00     0.00   0.00   0.00    0.00    0.00   0.00     0.00     0.00   0.00   0.00 
sdb              0.00    0.00      0.00      0.00     0.00     0.00   0.00   0.00    0.00    0.00   0.00     0.00     0.00   0.00   0.00 
sda              0.00    0.00      0.00      0.00     0.00     0.00   0.00   0.00    0.00    0.00   0.00     0.00     0.00   0.00   0.00
</code></pre><p>è§‚å¯Ÿtop å’Œ iostat çš„è¾“å‡ºï¼Œä½ ä¼šå‘ç°ï¼Œç¨ç­‰ä¸€æ®µæ—¶é—´åï¼Œiowait ä¼šå˜æˆ 0ï¼Œè€Œ sda ç£ç›˜çš„ I/O ä½¿ç”¨ç‡ä¹Ÿä¼šé€æ¸å‡å°‘åˆ° 0ã€‚</p><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬ä¸ä»…å®šä½äº†ç‹‚æ‰“æ—¥å¿—çš„åº”ç”¨ç¨‹åºï¼Œå¹¶é€šè¿‡è°ƒé«˜æ—¥å¿—çº§åˆ«çš„æ–¹æ³•ï¼Œå®Œç¾è§£å†³äº† I/O çš„æ€§èƒ½ç“¶é¢ˆã€‚</p><p>æ¡ˆä¾‹æœ€åï¼Œå½“ç„¶ä¸è¦å¿˜äº†è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œåœæ­¢æ¡ˆä¾‹åº”ç”¨ï¼š</p><pre><code>$ docker rm -f app 
</code></pre><h2>å°ç»“</h2><p>æ—¥å¿—ï¼Œæ˜¯äº†è§£åº”ç”¨ç¨‹åºå†…éƒ¨è¿è¡Œæƒ…å†µï¼Œæœ€å¸¸ç”¨ã€ä¹Ÿæœ€æœ‰æ•ˆçš„å·¥å…·ã€‚æ— è®ºæ˜¯æ“ä½œç³»ç»Ÿï¼Œè¿˜æ˜¯åº”ç”¨ç¨‹åºï¼Œéƒ½ä¼šè®°å½•å¤§é‡çš„è¿è¡Œæ—¥å¿—ï¼Œä»¥ä¾¿äº‹åæŸ¥çœ‹å†å²è®°å½•ã€‚è¿™äº›æ—¥å¿—ä¸€èˆ¬æŒ‰ç…§ä¸åŒçº§åˆ«æ¥å¼€å¯ï¼Œæ¯”å¦‚ï¼Œå¼€å‘ç¯å¢ƒé€šå¸¸æ‰“å¼€è°ƒè¯•çº§åˆ«çš„æ—¥å¿—ï¼Œè€Œçº¿ä¸Šç¯å¢ƒåˆ™åªè®°å½•è­¦å‘Šå’Œé”™è¯¯æ—¥å¿—ã€‚</p><p>åœ¨æ’æŸ¥åº”ç”¨ç¨‹åºé—®é¢˜æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ï¼Œåœ¨çº¿ä¸Šç¯å¢ƒä¸´æ—¶å¼€å¯åº”ç”¨ç¨‹åºçš„è°ƒè¯•æ—¥å¿—ã€‚æœ‰æ—¶å€™ï¼Œäº‹åä¸€ä¸å°å¿ƒå°±å¿˜äº†è°ƒå›å»ã€‚æ²¡æŠŠçº¿ä¸Šçš„æ—¥å¿—è°ƒé«˜åˆ°è­¦å‘Šçº§åˆ«ï¼Œå¯èƒ½ä¼šå¯¼è‡´ CPU ä½¿ç”¨ç‡ã€ç£ç›˜ I/O ç­‰ä¸€ç³»åˆ—çš„æ€§èƒ½é—®é¢˜ï¼Œä¸¥é‡æ—¶ï¼Œç”šè‡³ä¼šå½±å“åˆ°åŒä¸€å°æœåŠ¡å™¨ä¸Šè¿è¡Œçš„å…¶ä»–åº”ç”¨ç¨‹åºã€‚</p><p>ä»Šåï¼Œåœ¨ç¢°åˆ°è¿™ç§â€œç‹‚æ‰“æ—¥å¿—â€çš„åœºæ™¯æ—¶ï¼Œä½ å¯ä»¥ç”¨ iostatã€straceã€lsof ç­‰å·¥å…·æ¥å®šä½ç‹‚æ‰“æ—¥å¿—çš„è¿›ç¨‹ï¼Œæ‰¾å‡ºç›¸åº”çš„æ—¥å¿—æ–‡ä»¶ï¼Œå†é€šè¿‡åº”ç”¨ç¨‹åºçš„æ¥å£ï¼Œè°ƒæ•´æ—¥å¿—çº§åˆ«æ¥è§£å†³é—®é¢˜ã€‚</p><p>å¦‚æœåº”ç”¨ç¨‹åºä¸èƒ½åŠ¨æ€è°ƒæ•´æ—¥å¿—çº§åˆ«ï¼Œä½ å¯èƒ½è¿˜éœ€è¦ä¿®æ”¹åº”ç”¨çš„é…ç½®ï¼Œå¹¶é‡å¯åº”ç”¨è®©é…ç½®ç”Ÿæ•ˆã€‚</p><h2>æ€è€ƒ</h2><p>æœ€åï¼Œç»™ä½ ç•™ä¸€ä¸ªæ€è€ƒé¢˜ã€‚</p><p>åœ¨ä»Šå¤©çš„æ¡ˆä¾‹å¼€å§‹æ—¶ï¼Œæˆ‘ä»¬ç”¨ top å’Œ iostat æŸ¥çœ‹äº†ç³»ç»Ÿèµ„æºçš„ä½¿ç”¨æƒ…å†µã€‚é™¤äº† CPU å’Œç£ç›˜ I/Oå¤–ï¼Œå‰©ä½™å†…å­˜ä¹Ÿæ¯”è¾ƒå°‘ï¼Œè€Œå†…å­˜ä¸»è¦è¢« Buffer/Cache å ç”¨ã€‚</p><p>é‚£ä¹ˆï¼Œä»Šå¤©çš„é—®é¢˜å°±æ˜¯ï¼Œè¿™äº›å†…å­˜åˆ°åº•æ˜¯è¢« Buffer è¿˜æ˜¯ Cache å ç”¨äº†å‘¢ï¼Ÿæœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•æ¥ç¡®è®¤ä½ çš„åˆ†æç»“æœå‘¢ï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå’Œæˆ‘è®¨è®ºï¼Œä¹Ÿæ¬¢è¿æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„åŒäº‹ã€æœ‹å‹ã€‚æˆ‘ä»¬ä¸€èµ·åœ¨å®æˆ˜ä¸­æ¼”ç»ƒï¼Œåœ¨äº¤æµä¸­è¿›æ­¥ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/a3/e9/a396aed4116c2c989771c1295736abe9.jpg" alt=""></p>
                    </div>
                </div>

            </div>
            <div data-v-87ffcada="" class="article-comments pd"><h2 data-v-87ffcada=""><span
                    data-v-87ffcada="">ç²¾é€‰ç•™è¨€</span></h2>
                <ul data-v-87ffcada="">
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/41/27/3ff1a1d6.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">hua168</span>
                            </div>
                            <div class="bd">å¤§ç¥ï¼Œèƒ½é—®ä¸€ä¸ªé¢˜å¤–è¯å—ï¼Œå…³äºè‡ªå·±äººç”Ÿè§„åˆ’ï¼Œæ°´å¹³å’Œçœ¼ç•Œæ‰€é™ï¼Œæƒ³ä¸é€šï¼Œ<br>éƒ½è¯´å¤§ç¥çº§è§è¯†å¾ˆå¹¿ä¹Ÿå¤šï¼Œèƒ½ç»™æˆ‘è¿™ä¸ª35å²åªç»´æŠ¤è¿‡å››äº”åå°linuxæœåŠ¡å™¨çš„è¿ç»´æŒ‡æ¡è·¯å—ï¼Ÿ<br>ç°åœ¨å¾ˆè¿·èŒ«å’Œå‹åŠ›å¤§~~<br>èƒ½åŠ›å¦‚ä¸‹ï¼š<br>ä¸€.ç½‘ç»œï¼šCCNAæ°´å¹³ï¼Œè‡ªè¿‡äº†CCNPå¿˜è®°äº†ï¼Œå½“è¿‡2å¹´ç½‘ç®¡<br>äºŒã€ç»´æŠ¤è¿‡asp.netç”µå•†ç½‘ç«™ï¼Œ3å¹´ï¼Œåªæœ‰ç®€å•çš„ï¼Œå…¼èŒç½‘ç®¡<br>ä¸‰ã€linuxè¿ç»´ï¼Œåªåœ¨ä¸€å®¶ç”µå•†åšäº†3å¹´å¤šï¼Œä¼š<br>1.webï¼šnginxã€tomcaté…ç½®ï¼ˆå°‘ç”¨ï¼‰+php:nignxçš„rewirteå’Œåä»£<br>2.æ•°æ®åº“ï¼šmysqlã€mongoDBã€redis é…ç½®åŠä¸»ä»ï¼Œä¸ä¼šmycatã€Cetusä¹‹ç±»<br>3.åä»£ï¼šä¼šnginxã€haproxyç®€å•é…ç½®<br>4.å­˜å‚¨ï¼šNFSã€fastDFSã€hadoopç®€å•çœ‹äº†ä¸€ä¸‹<br>5.ç‰ˆæœ¬æ§åˆ¶ï¼šåªä¼šgitåŠæ­å»ºgitlab+jenkinsï¼ˆç®€å•çš„CI&#47;CDï¼‰<br>6.ç›‘æ§ï¼šç®€å•é…ç½®zabbix+shellè„šæœ¬<br>7.è™šæ‹ŸåŒ–ï¼škvmå®‰è£…åŠé…ç½®ã€docker(k8sè¿˜æ²¡å­¦)<br>8.äº‘è®¡ç®—ï¼šopenstackåªä¼šå®‰è£…åšè¿‡å®éªŒ<br>9.æµ‹è¯•ï¼šåªä¼šabå·¥å…·<br>10.æ—¥å¿—ï¼šELKå®‰è£…é…ç½®ï¼Œè¿˜æ²¡ç»“åˆjavaï¼ˆåœ¨å­¦ä¸­ï¼‰<br>11.å¤§æ•°æ®ï¼šæ²¡ä½¿ç”¨è¿‡ï¼ˆä¸ä¼šflumeã€stormã€sparkã€flinkã€kafkaï¼‰<br>12.è„šæœ¬ï¼šä¸»è¦æ˜¯shellä¸ºä¸»ã€ä¼šç‚¹python<br><br>å››ã€ç¼–ç¨‹èƒ½åŠ›ï¼šè‡ªå­¦ï¼Œæ²¡é¡¹ç›®ç»éªŒ<br>1.å‰ç«¯ï¼š<br>  1ï¼‰HTMLï¼ˆHTML5ä¸æ€çœ‹ï¼‰<br>  2ï¼‰cssï¼ˆlaiuiã€å­¦äº†ä¸€ä¸‹vueï¼‰<br>  3) jsã€jqueryæ¡†æ¶ã€ES6ç®€å•çœ‹äº†ä¸€ä¸‹  <br>2.PHPï¼šè¯­æ³•ç®€å•çš„thinkphp5æ¡†æ¶<br>3.javaï¼šè€ƒè™‘è¦ç»´æŠ¤java webåœ¨å­¦<br>	åªçœ‹äº†javaã€jspåŠservetã€springã€springMVCã€spring Bootï¼ˆè¿™ä¸ªä¸ºä¸»ï¼‰<br>4.pythonï¼šè€ƒè™‘è¿ç»´ç”¨åˆ°<br>	pythonï¼šä¼šç®€å•çš„è„šæœ¬<br>	djangoï¼šåªä¼šå®˜ç½‘ç®€å•çš„<br>	<br>é—®é¢˜æ˜¯ï¼šç°åœ¨å·²35å²äº†ï¼Œå¤±ä¸šï¼Œæ€åŠï¼Ÿå¹´é¾„æ‘†åœ¨é‚£é‡Œï¼Œèƒ½åŠ›å¥½åƒä¸å¼ºï¼Œå­¦å†å¤§ä¸“ã€‚<br>èƒ½ç»™ä¸ªå»ºè®®å—ï¼Ÿéå¸¸æ„Ÿè°¢~~ <br></div>
                            <span class="time">2019-01-19 00:53</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">çœ‹å‰é¢çš„ç»å†ï¼ŒæŠ€æœ¯é¢è¿˜æ˜¯æŒºå¹¿çš„ï¼Œä½†å¯èƒ½å¾ˆå¤šåœ°æ–¹éƒ½ä¸å¤ªæ·±å…¥ã€‚<br><br>å»ºè®®è¿˜æ˜¯å…ˆæ‰¾ä»½å·¥ä½œå§ï¼Œé•¿æœŸå¾…ä¸šå¯èƒ½ä¼šåŠ é‡ç„¦è™‘ã€‚ç„¶åå¯ä»¥æ ¹æ®å®é™…å·¥ä½œéœ€è¦ï¼Œå…ˆæŠŠå·¥ä½œéœ€è¦çš„çŸ¥è¯†æŠ€èƒ½åŠ æ·±æŒæ¡ã€‚ç­‰åˆ°å¯ä»¥ä»å®¹åº”å¯¹å·¥ä½œçš„æ—¶å€™ï¼Œå†è€ƒè™‘åœ¨æŸä¸ªé¢†åŸŸåŠ å¼ºæ·±å…¥ã€‚</p>
                                <p class="reply-time">2019-01-27 15:45</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/9a/64/ad837224.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Christmas</span>
                            </div>
                            <div class="bd">pcstat(page cache stat)è¿™ä¸ªå¯ä»¥æŸ¥çœ‹ç›®æ ‡logæ–‡ä»¶åœ¨cacheä¸­çš„å¤§å° <br></div>
                            <span class="time">2019-01-18 10:04</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å—¯å—¯ æ˜¯çš„ï¼Œå¹¶ä¸”è¿™ä¸ªå·¥å…·éœ€è¦çŸ¥é“å“ªä¸ªæ–‡ä»¶</p>
                                <p class="reply-time">2019-01-23 21:40</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/14/0c/ca/6173350b.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">éƒ­æ±Ÿä¼Ÿ</span>
                            </div>
                            <div class="bd">buffers&#47;cachedä½¿ç”¨æƒ…å†µå¯ä»¥ä»procæ–‡ä»¶ç³»ç»Ÿçœ‹ï¼š<br>gjw@gjw:~$ cat &#47;proc&#47;meminfo <br>MemTotal:        7588504 kB<br>MemFree:         3621800 kB<br>MemAvailable:    6335912 kB<br>Buffers:          473920 kB<br>Cached:          2491192 kB <br></div>
                            <span class="time">2019-01-18 10:23</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/5f/28/17ed19bc.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">J</span>
                            </div>
                            <div class="bd">logger.info(message)çš„æƒ…å†µä¸‹ï¼Œè¿˜å¯ä»¥ä½¿ç”¨logger.setLevelä¿®æ”¹æ—¥å¿—çº§åˆ«å—ï¼Ÿ <br></div>
                            <span class="time">2019-01-20 23:45</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å¯ä»¥çš„ï¼Œæ¯”å¦‚è°ƒé«˜åˆ°è­¦å‘Šçº§åˆ«ï¼Œé‚£ä¹ˆ info() å®é™…ä¸Šå°±ä¸å†™äº†</p>
                                <p class="reply-time">2019-01-22 08:24</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æˆ‘æ¥ä¹Ÿ</span>
                            </div>
                            <div class="bd">[D26æ‰“å¡]<br>åˆæ˜¯è€å¥—è·¯äº†ï¼Œå“ˆå“ˆã€‚<br>å…ˆæ˜¯topçœ‹%iowaitåˆ°å‡é«˜ï¼Œå†çœ‹pidstatæ˜¯å“ªä¸ªè¿›ç¨‹åœ¨æ“ä½œç£ç›˜ï¼Œå†straceçœ‹è¿›ç¨‹çš„è°ƒç”¨æ ˆã€‚<br>çœ‹&#47;proc&#47;meminfoå°±å¯ä»¥çœ‹åˆ°ç³»ç»Ÿçš„bufferå’Œcacheå„å äº†å¤šå°‘å§ã€‚å‰åä¸€å¯¹æ¯”å°±çŸ¥é“æ˜¯è°äº†ã€‚ğŸ˜„ <br></div>
                            <span class="time">2019-01-18 22:48</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="http://thirdwx.qlogo.cn/mmopen/vi_32/wjK0unDiaUMZYGsl43dovmLWZS6WvDzpespydKfOQHDU55QPZQZvfKKYk4ZaITibGc3wwC3vqTTudWficcPhEia0Xw/132" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Geek_41dcba</span>
                            </div>
                            <div class="bd">åœ¨å›ç­”ä»Šå¤©çš„æ€è€ƒé¢˜å‰ï¼Œæˆ‘æƒ³éœ€è¦æ˜ç¡®ä¸¤ä¸ªå‰æï¼Œä¸€ä¸ªæ˜¯Bufferåˆ°åº•åœ¨æ•´ä¸ªç³»ç»Ÿç»“æ„çš„å“ªä¸€å±‚ï¼Œä¼šä¸ä¼šæ˜¯ä¸æ˜¯åœ¨IOè°ƒåº¦å™¨çš„ä¸‹ä¸€å±‚ï¼Œæˆ‘æƒ³åº”è¯¥ä¼šï¼Œç†ç”±æ˜¯Bufferç¼“å­˜ç£ç›˜å†…å®¹è°ƒåº¦å™¨åˆå¹¶åå†å»å†™ç£ç›˜æ•ˆç‡æ›´å¥½;å¦ä¸€ä¸ªæ˜¯ä¹‹å‰æœ‰çœ‹åˆ°ç•™è¨€å¯¹äºæ–‡ä»¶ç³»ç»Ÿä½¿ç”¨å¸¦Cacheçš„IOæ“ä½œåº•å±‚ä¸ºäº†æ€§èƒ½Bufferå’ŒCacheæ˜¯åˆå¹¶çš„ï¼Œå¦‚æœæ˜¯è¿™æ ·é‚£æˆ‘å°±ä»é€»è¾‘ä¸Šè®¤ä¸ºå®ƒä»¬æ˜¯åˆ†å¼€çš„ï¼Œè¿™æ ·å¥½å›ç­”é—®é¢˜(å£°æ˜æˆ‘æ²¡çœ‹è¿‡åº•å±‚ä»£ç éƒ½æ˜¯æ²¡æœ‰ä»£ç ä¾æ®çš„)ã€‚  æˆ‘è®¤ä¸ºå¢é•¿çš„åœ°æ–¹éƒ½åœ¨Bufferé‡Œé¢ï¼ŒCacheé‡Œé¢çš„å†…å®¹å¯ä»¥ç»è¿‡IOè°ƒåº¦å™¨æ•´ç†åæ”¾Bufferï¼Œæ²¡æœ‰ç†ç”±è¯´ç£ç›˜é˜»å¡ï¼ŒCacheå°±ä¸èƒ½ç§»åŠ¨åˆ°Buffer  æŸ¥çœ‹æ•°æ®çš„åœ°æ–¹åœ¨&#47;proc&#47;meminfoã€‚<br><br>ä¸Šé¢çš„éƒ½æƒ³æ³•ä»Šå¤©æ²¡æœ‰æ—¶é—´éªŒè¯ï¼Œè¦æ˜å¤©äº†! <br></div>
                            <span class="time">2019-01-18 19:25</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å—¯ å¯ä»¥å®é™…æ“ä½œéªŒè¯ä¸€ä¸‹</p>
                                <p class="reply-time">2019-01-23 21:51</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">åˆ’æ—¶ä»£</span>
                            </div>
                            <div class="bd">æŒ‡å‡ºè€å¸ˆçš„ä¸€ä¸ªé—®é¢˜ï¼Œâ€œæ—¥å¿—å›æ»šæ–‡ä»¶â€ï¼Œæ‰“å°æ—¥å¿—çš„è¿‡ç¨‹ä¸­ä»ç›´è§‰æ¥çœ‹å¾ˆå®¹æ˜“è¯¯è®¤ä¸ºæ—¥å¿—æ˜¯åœ¨â€œå›æ»šâ€ï¼Œæˆ‘ä¹ŸçŠ¯è¿‡è¿™æ ·çš„é”™è¯¯ï¼›rotatingè‹±æ–‡ç›´è¯‘ä¸ºâ€œæ—‹è½¬â€æˆ–â€œè½®æµâ€ï¼Œå®é™…çš„æ—¥å¿—æ‰“å°è¿‡ç¨‹ä¸­ï¼Œæ—¥å¿—åç§°æ˜¯â€œæ—‹è½¬â€çš„ï¼Œä¾‹å¦‚log.1(å½“å‰æ‰“å°çš„æ—¥å¿—æ–‡ä»¶å¹¶ä¸”ä¸€ç›´ä¼šæ‰“å°è¿™ä¸ªæ–‡ä»¶)ï¼Œlog.2(è¾ƒæ—©æ—¥å¿—)ï¼Œlog.3(æ›´æ—©æ—¥å¿—)ï¼Œå½“è§¦å‘â€œæ—‹è½¬â€æ¡ä»¶æ—¶ï¼Œæ—¥å¿—åç§°ä¼šå‘ç”Ÿå˜æ›´ï¼Œå‡å¦‚log.3æ˜¯ä¸Šé™æ•°ï¼Œé‚£ä¹ˆlog.3å‘ç”Ÿâ€œæ—‹è½¬â€å°±è¢«removeï¼Œlog.2è¢«renameä¸ºlog.3ã€‚æ›´å½¢è±¡ä¸€ç‚¹çš„æè¿°æ˜¯ï¼Œæ—¥å¿—åç§°å‘ç”Ÿäº†æ»šåŠ¨ï¼Œlog.1=&gt;log.2=&gt;log.3ä¸æ–­çš„æ›´æ–°ã€‚ <br></div>
                            <span class="time">2019-01-18 10:03</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">è°¢è°¢æŒ‡å‡ºï¼Œç¡®å®åªæ˜¯æ–‡ä»¶åç§°çš„æ—‹è½¬ï¼Œå†…å®¹å¹¶æ²¡æœ‰å›æ»š</p>
                                <p class="reply-time">2019-01-23 21:39</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/69/d8/112f69f8.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">wtcctw</span>
                            </div>
                            <div class="bd">é€»è¾‘æ¸…æ™°ï¼Œæ­¥éª¤è¯¦ç»†ï¼Œèµ <br></div>
                            <span class="time">2019-01-18 08:14</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æ— åè€å’</span>
                            </div>
                            <div class="bd">æŸ¥çœ‹buffer&#47;cacheå ç”¨ï¼Œå»ºè®®ä½¿ç”¨pcstatæˆ–è€…hcacheï¼Œhcacheæ˜¯åŸºäºpcstatçš„ï¼Œpcstatå¯ä»¥æŸ¥çœ‹æŸä¸ªæ–‡ä»¶æ˜¯å¦è¢«ç¼“å­˜å’Œæ ¹æ®è¿›ç¨‹pidæ¥æŸ¥çœ‹éƒ½ç¼“å­˜äº†å“ªäº›æ–‡ä»¶ã€‚hcacheåœ¨å…¶åŸºç¡€ä¸Šå¢åŠ äº†æŸ¥çœ‹æ•´ä¸ªæ“ä½œç³»ç»ŸCacheå’Œæ ¹æ®ä½¿ç”¨Cacheå¤§å°æ’åºçš„ç‰¹æ€§ã€‚<br><br>[root@linjx ~]# hcache --top 3<br>+--------------------------+----------------+------------+-----------+---------+<br>| Name                     | Size (bytes)   | Pages      | Cached    | Percent |<br>|--------------------------+----------------+------------+-----------+---------|<br>| &#47;usr&#47;bin&#47;containerd      | 44250880       | 10804      | 10804     | 100.000 |<br>| &#47;usr&#47;bin&#47;dockerd-ce      | 81622264       | 19928      | 8319      | 041.745 |<br>| &#47;usr&#47;bin&#47;containerd-shim | 4972896        | 1215       | 1215      | 100.000 |<br>+--------------------------+----------------+------------+-----------+---------+<br> <br></div>
                            <span class="time">2019-01-22 22:15</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/14/11/4b/fa64f061.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">xfan</span>
                            </div>
                            <div class="bd">æˆ‘å¼€å¯äº†äº¤æ¢swapï¼Œå’Œå®éªŒä¸åŒçš„æ˜¯æˆ‘çš„Buffer&#47;cacheå ç”¨ä¸é«˜ï¼Œåå€’æ˜¯swapå¾ˆé«˜ã€‚è¿˜æœ‰ä¸€ä¸ªæ˜¯åŸºæœ¬æ²¡æœ‰å†™ï¼Œè¯»å¾ˆé«˜ã€‚å¥‡æ€ª <br></div>
                            <span class="time">2019-01-21 22:42</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">æ£€æŸ¥ä¸‹swapinessçš„è®¾ç½®</p>
                                <p class="reply-time">2019-01-22 08:08</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ernR4NKI5tejJAV3HMTF3gszBBUAjkjLO2QYic2gx5dMGelFv4LWibib7CUGexmMcMp5HiaaibmOH3dyHg/132" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æ¸¡æ¸¡é¸Ÿ_linux</span>
                            </div>
                            <div class="bd">æˆ‘è¿™è¾¹ä½¿ç”¨centos7 2c 8g å®éªŒç»“æœä¸æ–‡ç« ä¸­æœ‰äº›åŒºåˆ«ï¼š<br>1. åœ¨è¿è¡Œå®¹å™¨åï¼Œä½¿ç”¨topå‘½ä»¤å‘ç°sysä¸iowaitå„å å•ä¸ªCPUçš„10-50%<br>2. é’ˆå¯¹iowaitï¼Œä½¿ç”¨dstatå‘ç°ç£ç›˜æ¯ç§’å†™å…¥çº¦ä¸º300M; vmstatä¸­boä¹ŸéªŒè¯äº†å†™è¯·æ±‚è¾ƒå¤§<br>3. ä½¿ç”¨pidstat -d åˆ†æå‘ç°æ˜¯Pythonå†™å…¥è¯·æ±‚å¤§ï¼Œæ ¹æ® iostatåˆ†æåˆ°å½“å‰ç£ç›˜ä½¿ç”¨ç‡90%ï¼Œå†™é˜Ÿåˆ—1000<br>4. ä½¿ç”¨straceè·Ÿè¸ªï¼Œå‘ç°å†™å…¥fdä¸º3ï¼Œè§‚å¯Ÿls -l &#47;proc&#47;$pid&#47;fd&#47;ï¼Œå‘ç°fd:3 --&gt; &#47;tmp&#47;logtest.txt<br>5. å†é€šè¿‡ watch -n 1 ls -lh &#47;tmp&#47;logtest.txt è§‚å¯Ÿæ—¥å¿—å¤§å°ï¼Œå‘ç°æ—¥å¿—åœ¨è½®è½¬<br>----<br>æœ‰ä¸ªç–‘æƒ‘ï¼Œé’ˆå¯¹ sys è¾ƒé«˜ï¼Œæ— è®ºæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè¿˜æ˜¯ä¸­æ–­ï¼Œéƒ½éå¸¸å°‘ï¼Œåªæœ‰ä¸€ä¸ªioå†™å…¥ã€‚éš¾é“ioå¯†é›†å‹åº”ç”¨ä¹Ÿèƒ½å¤§å¹…åº¦æ‹‰é«˜sysï¼Ÿæˆ‘ä¹Ÿæ²¡å‘ç°manæ‰‹å†Œä¸­æåˆ°ioç­‰å¾…æ—¶é—´åŒ…å«åœ¨sysä¸­å•Š<br>[root@centos-80 ~]# dstat 2<br>----total-cpu-usage---- -dsk&#47;total- -net&#47;total- ---paging-- ---system--<br>usr sys idl wai hiq siq| read  writ| recv  send|  in   out | int   csw<br>  6  13  68  12   0   0| 146k  312M|   0     0 |   0     0 | 854   333<br> 13  26  27  34   0   1|   0   598M|  60B  626B|   0     0 |1506   312<br> 10  22  42  25   0   0|   0   587M|  60B  354B|   0     0 |1385   270 <br></div>
                            <span class="time">2019-01-21 22:32</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">sysä½¿ç”¨é«˜æ˜¯æ­£å¸¸çš„ï¼Œä»»ä½•IOéƒ½è¦ç»è¿‡ç³»ç»Ÿè°ƒç”¨å®Œæˆï¼Œè‡ªç„¶è¦å ç”¨sysã€‚</p>
                                <p class="reply-time">2019-01-22 08:10</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/2f/f4/2dede51a.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å°è€é¼ </span>
                            </div>
                            <div class="bd">æˆ‘è§‰çš„åº”è¯¥æ˜¯cacheï¼Œå†™æ—¥å¿—ï¼Œæ—¥å¿—æ˜¯æ–‡ä»¶ <br></div>
                            <span class="time">2019-01-20 12:34</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/14/0f/84/d8e63885.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">ä»²é¬¼</span>
                            </div>
                            <div class="bd">â€œæ¯ç§’å†™çš„æ•°æ®è¶…è¿‡ 45 MBï¼Œæ¯”ä¸Šé¢ iostat å‘ç°çš„ 32MB çš„ç»“æœè¿˜è¦å¤§â€<br>è€å¸ˆå¥½ï¼Œæ²¡æ˜ç™½è¿™é‡Œçš„æ¯”è¾ƒè¦è¯´æ˜ä»€ä¹ˆé—®é¢˜ï¼Ÿ <br></div>
                            <span class="time">2019-01-18 13:36</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">è¿™å„¿æ˜¯è¦è¯´ IO çš„æ¥æºï¼Œè‚¯å®šæ˜¯ I&#47;O å¤§çš„è¿›ç¨‹</p>
                                <p class="reply-time">2019-01-23 21:45</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/cf/5c/d4e19eb6.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å®‰å°ä¾</span>
                            </div>
                            <div class="bd">Ubuntu 16.04, ä½¿ç”¨ strace åº”è¯¥éœ€è¦å…ˆä¸´æ—¶ä¿®æ”¹ç³»ç»Ÿä¸€ä¸ªé…ç½®ï¼šecho 0 | sudo tee &#47;proc&#47;sys&#47;kernel&#47;yama&#47;ptrace_scopeã€‚å¦å¤–ç”¨ java æ¨¡æ‹Ÿå†™æ–‡ä»¶ï¼Œstrace å‘ç°è¿˜æ˜¯ä¸è¡Œï¼Œä¸€ç›´å¡åœ¨è¿™ä¸ªåœ°æ–¹ï¼š<br><br>zk@zk-pc:~&#47;Documents$ strace -p 6526<br>strace: Process 6526 attached<br>futex(0x7f934a93a9d0, FUTEX_WAIT, 6527, NULL<br><br>è€å¸ˆå¸®å¿™çœ‹ä¸€ä¸‹ï¼ŒJava æºä»£ç å¦‚ä¸‹ã€‚æ³¨é‡Šæ‰çš„éƒ¨åˆ† System.out æ˜¯ç–¯ç‹‚æ‰“æ—¥å¿— ï¼ˆæ ‡å‡†è¾“å‡ºï¼‰ï¼Œçº¿ä¸Šç¯å¢ƒå‡ºç°è¿‡ï¼Œç–¯ç‹‚ println ç»“æœç£ç›˜æ‰“æ»¡çš„é—®é¢˜ï¼Œæƒ³æ¨¡æ‹Ÿä¸€ä¸‹ï¼Œç»“æœå‘ç°ä¸è¡Œã€‚ç„¶åæ¢æˆäº†å†™æ–‡ä»¶ï¼Œç»“æœ strace è¿˜æ˜¯çœ‹ä¸å‡ºæ¥ï¼Œå¡åœ¨é‚£ä¸ªåœ°æ–¹ä¸€ç›´ä¸åŠ¨ï¼š<br><br>    public static void main(String...args) throws Exception {<br>        File file = new File(&quot;&#47;tmp&#47;aaa&quot;);<br>        PrintWriter printWriter = new PrintWriter(file);<br><br>        while (true) {<br>            printWriter.write(UUID.randomUUID().toString());<br>            &#47;&#47; System.out.println(&quot;------------------------------NULL-------------------&quot;);<br>            LockSupport.parkNanos(1);<br>        }<br>    }<br><br>å¦å¤–é—®ä¸€ä¸‹è€å¸ˆï¼Œä¸€ç›´å‘æ ‡å‡†è¾“å‡ºæ‰“å°çš„è¯ï¼Œæœ€ç»ˆçš„é‚£ä¸ªæ–‡ä»¶æ˜¯æ”¾åœ¨å“ªé‡Œå‘¢äº†ï¼Ÿæ€ä¹ˆå°±æŠŠç£ç›˜æ‰“æ»¡äº†å‘¢ï¼Ÿ <br></div>
                            <span class="time">2019-01-18 11:33</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ä½ è¿™ä¸ªä¾‹å­æ˜¯å‘æ–‡ä»¶ &#47;tmp&#47;aaa å†™ï¼Œä¸æ˜¯æ ‡å‡†è¾“å‡º</p>
                                <p class="reply-time">2019-01-23 21:42</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/47/46/61f16147.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å”¯ç¾</span>
                            </div>
                            <div class="bd">æ‰“å¡Day26 <br>day day up! <br></div>
                            <span class="time">2019-01-18 10:19</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://wx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKQMM4m7NHuicr55aRiblTSEWIYe0QqbpyHweaoAbG7j2v7UUElqqeP3Ihrm3UfDPDRb1Hv8LvPwXqA/132" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">ninuxer</span>
                            </div>
                            <div class="bd">æ‰“å¡day27<br>åº”è¯¥æ˜¯è¢«cacheå ç”¨ï¼Œå› ä¸ºå†…å­˜ç¯‡æåˆ°cacheä¸»è¦æ˜¯è´Ÿè´£æ–‡ä»¶çš„è¯»å†™ç¼“å­˜ï¼Œbufferæ˜¯è´Ÿè´£å—è®¾å¤‡è¯»å†™ç¼“å­˜ï¼Œè€Œæ¡ˆä¾‹ä¸­å†™çš„æ˜¯æ–‡ä»¶<br>å¯ä»¥é€šè¿‡cachestatéªŒè¯ <br></div>
                            <span class="time">2019-01-18 08:20</span>
                            
                        </div>
                    </li>
                    


                </ul>
            </div>
        </div>
    </div>
</div>
</body>
</html>